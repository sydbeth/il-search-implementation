(function(){"use strict";var Ds=Object.defineProperty,js=(i,e,t)=>e in i?Ds(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,l=(i,e,t)=>(js(i,typeof e!="symbol"?e+"":e,t),t),P=(i=>(i[i.mustache=0]="mustache",i[i.vue=1]="vue",i[i.react=2]="react",i[i.angular=3]="angular",i))(P||{});function At(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}var ve=At();function va(i){ve=i}var Be={exec:()=>null};function I(i,e=""){let t=typeof i=="string"?i:i.source;const s={replace:(a,r)=>{let o=typeof r=="string"?r:r.source;return o=o.replace(Y.caret,"$1"),t=t.replace(a,o),s},getRegex:()=>new RegExp(t,e)};return s}var Y={codeRemoveIndent:/^(?: {1,4}| {0,3}\t)/gm,outputLinkReplace:/\\([\[\]])/g,indentCodeCompensation:/^(\s+)(?:```)/,beginningSpace:/^\s+/,endingHash:/#$/,startingSpaceChar:/^ /,endingSpaceChar:/ $/,nonSpaceChar:/[^ ]/,newLineCharGlobal:/\n/g,tabCharGlobal:/\t/g,multipleSpaceGlobal:/\s+/g,blankLine:/^[ \t]*$/,doubleBlankLine:/\n[ \t]*\n[ \t]*$/,blockquoteStart:/^ {0,3}>/,blockquoteSetextReplace:/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,blockquoteSetextReplace2:/^ {0,3}>[ \t]?/gm,listReplaceTabs:/^\t+/,listReplaceNesting:/^ {1,4}(?=( {4})*[^ ])/g,listIsTask:/^\[[ xX]\] /,listReplaceTask:/^\[[ xX]\] +/,anyLine:/\n.*\n/,hrefBrackets:/^<(.*)>$/,tableDelimiter:/[:|]/,tableAlignChars:/^\||\| *$/g,tableRowBlankLine:/\n[ \t]*$/,tableAlignRight:/^ *-+: *$/,tableAlignCenter:/^ *:-+: *$/,tableAlignLeft:/^ *:-+ *$/,startATag:/^<a /i,endATag:/^<\/a>/i,startPreScriptTag:/^<(pre|code|kbd|script)(\s|>)/i,endPreScriptTag:/^<\/(pre|code|kbd|script)(\s|>)/i,startAngleBracket:/^</,endAngleBracket:/>$/,pedanticHrefTitle:/^([^'"]*[^\s])\s+(['"])(.*)\2/,unicodeAlphaNumeric:/[\p{L}\p{N}]/u,escapeTest:/[&<>"']/,escapeReplace:/[&<>"']/g,escapeTestNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,escapeReplaceNoEncode:/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/g,unescapeTest:/&(#(?:\d+)|(?:#x[0-9A-Fa-f]+)|(?:\w+));?/ig,caret:/(^|[^\[])\^/g,percentDecode:/%25/g,findPipe:/\|/g,splitPipe:/ \|/,slashPipe:/\\\|/g,carriageReturn:/\r\n|\r/g,spaceLine:/^ +$/gm,notSpaceStart:/^\S*/,endingNewline:/\n$/,listItemRegex:i=>new RegExp(`^( {0,3}${i})((?:[	 ][^\\n]*)?(?:\\n|$))`),nextBulletRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ 	][^\\n]*)?(?:\\n|$))`),hrRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),fencesBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}(?:\`\`\`|~~~)`),headingBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}#`),htmlBeginRegex:i=>new RegExp(`^ {0,${Math.min(3,i-1)}}<(?:[a-z].*>|!--)`,"i")},Rs=/^(?:[ \t]*(?:\n|$))+/,Ns=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,Os=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,_e=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,Ps=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,Et=/(?:[*+-]|\d{1,9}[.)])/,Ma=/^(?!bull |blockCode|fences|blockquote|heading|html|table)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html|table))+?)\n {0,3}(=+|-+) *(?:\n+|$)/,Ca=I(Ma).replace(/bull/g,Et).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/\|table/g,"").getRegex(),zs=I(Ma).replace(/bull/g,Et).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).replace(/table/g,/ {0,3}\|?(?:[:\- ]*\|)+[\:\- ]*\n/).getRegex(),It=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,$s=/^[^\n]+/,Dt=/(?!\s*\])(?:\\.|[^\[\]\\])+/,Fs=I(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",Dt).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),Vs=I(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,Et).getRegex(),lt="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",jt=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,Qs=I("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ 	]*)+\\n|$))","i").replace("comment",jt).replace("tag",lt).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),ba=I(It).replace("hr",_e).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lt).getRegex(),Bs=I(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",ba).getRegex(),Rt={blockquote:Bs,code:Ns,def:Fs,fences:Os,heading:Ps,hr:_e,html:Qs,lheading:Ca,list:Vs,newline:Rs,paragraph:ba,table:Be,text:$s},xa=I("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",_e).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}	)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lt).getRegex(),_s={...Rt,lheading:zs,table:xa,paragraph:I(It).replace("hr",_e).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",xa).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",lt).getRegex()},qs={...Rt,html:I(`^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:"[^"]*"|'[^']*'|\\s[^'"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))`).replace("comment",jt).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:Be,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:I(It).replace("hr",_e).replace("heading",` *#{1,6} *[^
]`).replace("lheading",Ca).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},Us=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,Hs=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,ka=/^( {2,}|\\)\n(?!\s*$)/,Ws=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,ct=/[\p{P}\p{S}]/u,Nt=/[\s\p{P}\p{S}]/u,Sa=/[^\s\p{P}\p{S}]/u,Ys=I(/^((?![*_])punctSpace)/,"u").replace(/punctSpace/g,Nt).getRegex(),Ta=/(?!~)[\p{P}\p{S}]/u,Js=/(?!~)[\s\p{P}\p{S}]/u,Gs=/(?:[^\s\p{P}\p{S}]|~)/u,Zs=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,Aa=/^(?:\*+(?:((?!\*)punct)|[^\s*]))|^_+(?:((?!_)punct)|([^\s_]))/,Ks=I(Aa,"u").replace(/punct/g,ct).getRegex(),Xs=I(Aa,"u").replace(/punct/g,Ta).getRegex(),Ea="^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)punct(\\*+)(?=[\\s]|$)|notPunctSpace(\\*+)(?!\\*)(?=punctSpace|$)|(?!\\*)punctSpace(\\*+)(?=notPunctSpace)|[\\s](\\*+)(?!\\*)(?=punct)|(?!\\*)punct(\\*+)(?!\\*)(?=punct)|notPunctSpace(\\*+)(?=notPunctSpace)",ei=I(Ea,"gu").replace(/notPunctSpace/g,Sa).replace(/punctSpace/g,Nt).replace(/punct/g,ct).getRegex(),ti=I(Ea,"gu").replace(/notPunctSpace/g,Gs).replace(/punctSpace/g,Js).replace(/punct/g,Ta).getRegex(),ai=I("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)punct(_+)(?=[\\s]|$)|notPunctSpace(_+)(?!_)(?=punctSpace|$)|(?!_)punctSpace(_+)(?=notPunctSpace)|[\\s](_+)(?!_)(?=punct)|(?!_)punct(_+)(?!_)(?=punct)","gu").replace(/notPunctSpace/g,Sa).replace(/punctSpace/g,Nt).replace(/punct/g,ct).getRegex(),si=I(/\\(punct)/,"gu").replace(/punct/g,ct).getRegex(),ii=I(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),ri=I(jt).replace("(?:-->|$)","-->").getRegex(),ni=I("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",ri).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),ht=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,oi=I(/^!?\[(label)\]\(\s*(href)(?:(?:[ \t]*(?:\n[ \t]*)?)(title))?\s*\)/).replace("label",ht).replace("href",/<(?:\\.|[^\n<>\\])+>|[^ \t\n\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),Ia=I(/^!?\[(label)\]\[(ref)\]/).replace("label",ht).replace("ref",Dt).getRegex(),Da=I(/^!?\[(ref)\](?:\[\])?/).replace("ref",Dt).getRegex(),li=I("reflink|nolink(?!\\()","g").replace("reflink",Ia).replace("nolink",Da).getRegex(),Ot={_backpedal:Be,anyPunctuation:si,autolink:ii,blockSkip:Zs,br:ka,code:Hs,del:Be,emStrongLDelim:Ks,emStrongRDelimAst:ei,emStrongRDelimUnd:ai,escape:Us,link:oi,nolink:Da,punctuation:Ys,reflink:Ia,reflinkSearch:li,tag:ni,text:Ws,url:Be},ci={...Ot,link:I(/^!?\[(label)\]\((.*?)\)/).replace("label",ht).getRegex(),reflink:I(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",ht).getRegex()},Pt={...Ot,emStrongRDelimAst:ti,emStrongLDelim:Xs,url:I(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},hi={...Pt,br:I(ka).replace("{2,}","*").getRegex(),text:I(Pt.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},ut={normal:Rt,gfm:_s,pedantic:qs},qe={normal:Ot,gfm:Pt,breaks:hi,pedantic:ci},ui={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ja=i=>ui[i];function ce(i,e){if(e){if(Y.escapeTest.test(i))return i.replace(Y.escapeReplace,ja)}else if(Y.escapeTestNoEncode.test(i))return i.replace(Y.escapeReplaceNoEncode,ja);return i}function Ra(i){try{i=encodeURI(i).replace(Y.percentDecode,"%")}catch{return null}return i}function Na(i,e){var t;const s=i.replace(Y.findPipe,(o,n,c)=>{let h=!1,d=n;for(;--d>=0&&c[d]==="\\";)h=!h;return h?"|":" |"}),a=s.split(Y.splitPipe);let r=0;if(a[0].trim()||a.shift(),a.length>0&&!((t=a.at(-1))!=null&&t.trim())&&a.pop(),e)if(a.length>e)a.splice(e);else for(;a.length<e;)a.push("");for(;r<a.length;r++)a[r]=a[r].trim().replace(Y.slashPipe,"|");return a}function Ue(i,e,t){const s=i.length;if(s===0)return"";let a=0;for(;a<s&&i.charAt(s-a-1)===e;)a++;return i.slice(0,s-a)}function di(i,e){if(i.indexOf(e[1])===-1)return-1;let t=0;for(let s=0;s<i.length;s++)if(i[s]==="\\")s++;else if(i[s]===e[0])t++;else if(i[s]===e[1]&&(t--,t<0))return s;return t>0?-2:-1}function Oa(i,e,t,s,a){const r=e.href,o=e.title||null,n=i[1].replace(a.other.outputLinkReplace,"$1");s.state.inLink=!0;const c={type:i[0].charAt(0)==="!"?"image":"link",raw:t,href:r,title:o,text:n,tokens:s.inlineTokens(n)};return s.state.inLink=!1,c}function pi(i,e,t){const s=i.match(t.other.indentCodeCompensation);if(s===null)return e;const a=s[1];return e.split(`
`).map(r=>{const o=r.match(t.other.beginningSpace);if(o===null)return r;const[n]=o;return n.length>=a.length?r.slice(a.length):r}).join(`
`)}var dt=class{constructor(i){l(this,"options"),l(this,"rules"),l(this,"lexer"),this.options=i||ve}space(i){const e=this.rules.block.newline.exec(i);if(e&&e[0].length>0)return{type:"space",raw:e[0]}}code(i){const e=this.rules.block.code.exec(i);if(e){const t=e[0].replace(this.rules.other.codeRemoveIndent,"");return{type:"code",raw:e[0],codeBlockStyle:"indented",text:this.options.pedantic?t:Ue(t,`
`)}}}fences(i){const e=this.rules.block.fences.exec(i);if(e){const t=e[0],s=pi(t,e[3]||"",this.rules);return{type:"code",raw:t,lang:e[2]?e[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):e[2],text:s}}}heading(i){const e=this.rules.block.heading.exec(i);if(e){let t=e[2].trim();if(this.rules.other.endingHash.test(t)){const s=Ue(t,"#");(this.options.pedantic||!s||this.rules.other.endingSpaceChar.test(s))&&(t=s.trim())}return{type:"heading",raw:e[0],depth:e[1].length,text:t,tokens:this.lexer.inline(t)}}}hr(i){const e=this.rules.block.hr.exec(i);if(e)return{type:"hr",raw:Ue(e[0],`
`)}}blockquote(i){const e=this.rules.block.blockquote.exec(i);if(e){let t=Ue(e[0],`
`).split(`
`),s="",a="";const r=[];for(;t.length>0;){let o=!1;const n=[];let c;for(c=0;c<t.length;c++)if(this.rules.other.blockquoteStart.test(t[c]))n.push(t[c]),o=!0;else if(!o)n.push(t[c]);else break;t=t.slice(c);const h=n.join(`
`),d=h.replace(this.rules.other.blockquoteSetextReplace,`
    $1`).replace(this.rules.other.blockquoteSetextReplace2,"");s=s?`${s}
${h}`:h,a=a?`${a}
${d}`:d;const g=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(d,r,!0),this.lexer.state.top=g,t.length===0)break;const p=r.at(-1);if(p?.type==="code")break;if(p?.type==="blockquote"){const L=p,w=L.raw+`
`+t.join(`
`),m=this.blockquote(w);r[r.length-1]=m,s=s.substring(0,s.length-L.raw.length)+m.raw,a=a.substring(0,a.length-L.text.length)+m.text;break}else if(p?.type==="list"){const L=p,w=L.raw+`
`+t.join(`
`),m=this.list(w);r[r.length-1]=m,s=s.substring(0,s.length-p.raw.length)+m.raw,a=a.substring(0,a.length-L.raw.length)+m.raw,t=w.substring(r.at(-1).raw.length).split(`
`);continue}}return{type:"blockquote",raw:s,tokens:r,text:a}}}list(i){let e=this.rules.block.list.exec(i);if(e){let t=e[1].trim();const s=t.length>1,a={type:"list",raw:"",ordered:s,start:s?+t.slice(0,-1):"",loose:!1,items:[]};t=s?`\\d{1,9}\\${t.slice(-1)}`:`\\${t}`,this.options.pedantic&&(t=s?t:"[*+-]");const r=this.rules.other.listItemRegex(t);let o=!1;for(;i;){let c=!1,h="",d="";if(!(e=r.exec(i))||this.rules.block.hr.test(i))break;h=e[0],i=i.substring(h.length);let g=e[2].split(`
`,1)[0].replace(this.rules.other.listReplaceTabs,b=>" ".repeat(3*b.length)),p=i.split(`
`,1)[0],L=!g.trim(),w=0;if(this.options.pedantic?(w=2,d=g.trimStart()):L?w=e[1].length+1:(w=e[2].search(this.rules.other.nonSpaceChar),w=w>4?1:w,d=g.slice(w),w+=e[1].length),L&&this.rules.other.blankLine.test(p)&&(h+=p+`
`,i=i.substring(p.length+1),c=!0),!c){const b=this.rules.other.nextBulletRegex(w),A=this.rules.other.hrRegex(w),R=this.rules.other.fencesBeginRegex(w),S=this.rules.other.headingBeginRegex(w),E=this.rules.other.htmlBeginRegex(w);for(;i;){const H=i.split(`
`,1)[0];let ae;if(p=H,this.options.pedantic?(p=p.replace(this.rules.other.listReplaceNesting,"  "),ae=p):ae=p.replace(this.rules.other.tabCharGlobal,"    "),R.test(p)||S.test(p)||E.test(p)||b.test(p)||A.test(p))break;if(ae.search(this.rules.other.nonSpaceChar)>=w||!p.trim())d+=`
`+ae.slice(w);else{if(L||g.replace(this.rules.other.tabCharGlobal,"    ").search(this.rules.other.nonSpaceChar)>=4||R.test(g)||S.test(g)||A.test(g))break;d+=`
`+p}!L&&!p.trim()&&(L=!0),h+=H+`
`,i=i.substring(H.length+1),g=ae.slice(w)}}a.loose||(o?a.loose=!0:this.rules.other.doubleBlankLine.test(h)&&(o=!0));let m=null,y;this.options.gfm&&(m=this.rules.other.listIsTask.exec(d),m&&(y=m[0]!=="[ ] ",d=d.replace(this.rules.other.listReplaceTask,""))),a.items.push({type:"list_item",raw:h,task:!!m,checked:y,loose:!1,text:d,tokens:[]}),a.raw+=h}const n=a.items.at(-1);if(n)n.raw=n.raw.trimEnd(),n.text=n.text.trimEnd();else return;a.raw=a.raw.trimEnd();for(let c=0;c<a.items.length;c++)if(this.lexer.state.top=!1,a.items[c].tokens=this.lexer.blockTokens(a.items[c].text,[]),!a.loose){const h=a.items[c].tokens.filter(g=>g.type==="space"),d=h.length>0&&h.some(g=>this.rules.other.anyLine.test(g.raw));a.loose=d}if(a.loose)for(let c=0;c<a.items.length;c++)a.items[c].loose=!0;return a}}html(i){const e=this.rules.block.html.exec(i);if(e)return{type:"html",block:!0,raw:e[0],pre:e[1]==="pre"||e[1]==="script"||e[1]==="style",text:e[0]}}def(i){const e=this.rules.block.def.exec(i);if(e){const t=e[1].toLowerCase().replace(this.rules.other.multipleSpaceGlobal," "),s=e[2]?e[2].replace(this.rules.other.hrefBrackets,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",a=e[3]?e[3].substring(1,e[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):e[3];return{type:"def",tag:t,raw:e[0],href:s,title:a}}}table(i){var e;const t=this.rules.block.table.exec(i);if(!t||!this.rules.other.tableDelimiter.test(t[2]))return;const s=Na(t[1]),a=t[2].replace(this.rules.other.tableAlignChars,"").split("|"),r=(e=t[3])!=null&&e.trim()?t[3].replace(this.rules.other.tableRowBlankLine,"").split(`
`):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(s.length===a.length){for(const n of a)this.rules.other.tableAlignRight.test(n)?o.align.push("right"):this.rules.other.tableAlignCenter.test(n)?o.align.push("center"):this.rules.other.tableAlignLeft.test(n)?o.align.push("left"):o.align.push(null);for(let n=0;n<s.length;n++)o.header.push({text:s[n],tokens:this.lexer.inline(s[n]),header:!0,align:o.align[n]});for(const n of r)o.rows.push(Na(n,o.header.length).map((c,h)=>({text:c,tokens:this.lexer.inline(c),header:!1,align:o.align[h]})));return o}}lheading(i){const e=this.rules.block.lheading.exec(i);if(e)return{type:"heading",raw:e[0],depth:e[2].charAt(0)==="="?1:2,text:e[1],tokens:this.lexer.inline(e[1])}}paragraph(i){const e=this.rules.block.paragraph.exec(i);if(e){const t=e[1].charAt(e[1].length-1)===`
`?e[1].slice(0,-1):e[1];return{type:"paragraph",raw:e[0],text:t,tokens:this.lexer.inline(t)}}}text(i){const e=this.rules.block.text.exec(i);if(e)return{type:"text",raw:e[0],text:e[0],tokens:this.lexer.inline(e[0])}}escape(i){const e=this.rules.inline.escape.exec(i);if(e)return{type:"escape",raw:e[0],text:e[1]}}tag(i){const e=this.rules.inline.tag.exec(i);if(e)return!this.lexer.state.inLink&&this.rules.other.startATag.test(e[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&this.rules.other.endATag.test(e[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&this.rules.other.startPreScriptTag.test(e[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&this.rules.other.endPreScriptTag.test(e[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:e[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:e[0]}}link(i){const e=this.rules.inline.link.exec(i);if(e){const t=e[2].trim();if(!this.options.pedantic&&this.rules.other.startAngleBracket.test(t)){if(!this.rules.other.endAngleBracket.test(t))return;const r=Ue(t.slice(0,-1),"\\");if((t.length-r.length)%2===0)return}else{const r=di(e[2],"()");if(r===-2)return;if(r>-1){const o=(e[0].indexOf("!")===0?5:4)+e[1].length+r;e[2]=e[2].substring(0,r),e[0]=e[0].substring(0,o).trim(),e[3]=""}}let s=e[2],a="";if(this.options.pedantic){const r=this.rules.other.pedanticHrefTitle.exec(s);r&&(s=r[1],a=r[3])}else a=e[3]?e[3].slice(1,-1):"";return s=s.trim(),this.rules.other.startAngleBracket.test(s)&&(this.options.pedantic&&!this.rules.other.endAngleBracket.test(t)?s=s.slice(1):s=s.slice(1,-1)),Oa(e,{href:s&&s.replace(this.rules.inline.anyPunctuation,"$1"),title:a&&a.replace(this.rules.inline.anyPunctuation,"$1")},e[0],this.lexer,this.rules)}}reflink(i,e){let t;if((t=this.rules.inline.reflink.exec(i))||(t=this.rules.inline.nolink.exec(i))){const s=(t[2]||t[1]).replace(this.rules.other.multipleSpaceGlobal," "),a=e[s.toLowerCase()];if(!a){const r=t[0].charAt(0);return{type:"text",raw:r,text:r}}return Oa(t,a,t[0],this.lexer,this.rules)}}emStrong(i,e,t=""){let s=this.rules.inline.emStrongLDelim.exec(i);if(!(!s||s[3]&&t.match(this.rules.other.unicodeAlphaNumeric))&&(!(s[1]||s[2])||!t||this.rules.inline.punctuation.exec(t))){const a=[...s[0]].length-1;let r,o,n=a,c=0;const h=s[0][0]==="*"?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;for(h.lastIndex=0,e=e.slice(-1*i.length+a);(s=h.exec(e))!=null;){if(r=s[1]||s[2]||s[3]||s[4]||s[5]||s[6],!r)continue;if(o=[...r].length,s[3]||s[4]){n+=o;continue}else if((s[5]||s[6])&&a%3&&!((a+o)%3)){c+=o;continue}if(n-=o,n>0)continue;o=Math.min(o,o+n+c);const d=[...s[0]][0].length,g=i.slice(0,a+s.index+d+o);if(Math.min(a,o)%2){const L=g.slice(1,-1);return{type:"em",raw:g,text:L,tokens:this.lexer.inlineTokens(L)}}const p=g.slice(2,-2);return{type:"strong",raw:g,text:p,tokens:this.lexer.inlineTokens(p)}}}}codespan(i){const e=this.rules.inline.code.exec(i);if(e){let t=e[2].replace(this.rules.other.newLineCharGlobal," ");const s=this.rules.other.nonSpaceChar.test(t),a=this.rules.other.startingSpaceChar.test(t)&&this.rules.other.endingSpaceChar.test(t);return s&&a&&(t=t.substring(1,t.length-1)),{type:"codespan",raw:e[0],text:t}}}br(i){const e=this.rules.inline.br.exec(i);if(e)return{type:"br",raw:e[0]}}del(i){const e=this.rules.inline.del.exec(i);if(e)return{type:"del",raw:e[0],text:e[2],tokens:this.lexer.inlineTokens(e[2])}}autolink(i){const e=this.rules.inline.autolink.exec(i);if(e){let t,s;return e[2]==="@"?(t=e[1],s="mailto:"+t):(t=e[1],s=t),{type:"link",raw:e[0],text:t,href:s,tokens:[{type:"text",raw:t,text:t}]}}}url(i){var e;let t;if(t=this.rules.inline.url.exec(i)){let s,a;if(t[2]==="@")s=t[0],a="mailto:"+s;else{let r;do r=t[0],t[0]=((e=this.rules.inline._backpedal.exec(t[0]))==null?void 0:e[0])??"";while(r!==t[0]);s=t[0],t[1]==="www."?a="http://"+t[0]:a=t[0]}return{type:"link",raw:t[0],text:s,href:a,tokens:[{type:"text",raw:s,text:s}]}}}inlineText(i){const e=this.rules.inline.text.exec(i);if(e){const t=this.lexer.state.inRawBlock;return{type:"text",raw:e[0],text:e[0],escaped:t}}}},ue=class wa{constructor(e){l(this,"tokens"),l(this,"options"),l(this,"state"),l(this,"tokenizer"),l(this,"inlineQueue"),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||ve,this.options.tokenizer=this.options.tokenizer||new dt,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={other:Y,block:ut.normal,inline:qe.normal};this.options.pedantic?(t.block=ut.pedantic,t.inline=qe.pedantic):this.options.gfm&&(t.block=ut.gfm,this.options.breaks?t.inline=qe.breaks:t.inline=qe.gfm),this.tokenizer.rules=t}static get rules(){return{block:ut,inline:qe}}static lex(e,t){return new wa(t).lex(e)}static lexInline(e,t){return new wa(t).inlineTokens(e)}lex(e){e=e.replace(Y.carriageReturn,`
`),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const s=this.inlineQueue[t];this.inlineTokens(s.src,s.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],s=!1){var a,r,o;for(this.options.pedantic&&(e=e.replace(Y.tabCharGlobal,"    ").replace(Y.spaceLine,""));e;){let n;if((r=(a=this.options.extensions)==null?void 0:a.block)!=null&&r.some(h=>(n=h.call({lexer:this},e,t))?(e=e.substring(n.raw.length),t.push(n),!0):!1))continue;if(n=this.tokenizer.space(e)){e=e.substring(n.raw.length);const h=t.at(-1);n.raw.length===1&&h!==void 0?h.raw+=`
`:t.push(n);continue}if(n=this.tokenizer.code(e)){e=e.substring(n.raw.length);const h=t.at(-1);h?.type==="paragraph"||h?.type==="text"?(h.raw+=`
`+n.raw,h.text+=`
`+n.text,this.inlineQueue.at(-1).src=h.text):t.push(n);continue}if(n=this.tokenizer.fences(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.heading(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.hr(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.blockquote(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.list(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.html(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.def(e)){e=e.substring(n.raw.length);const h=t.at(-1);h?.type==="paragraph"||h?.type==="text"?(h.raw+=`
`+n.raw,h.text+=`
`+n.raw,this.inlineQueue.at(-1).src=h.text):this.tokens.links[n.tag]||(this.tokens.links[n.tag]={href:n.href,title:n.title});continue}if(n=this.tokenizer.table(e)){e=e.substring(n.raw.length),t.push(n);continue}if(n=this.tokenizer.lheading(e)){e=e.substring(n.raw.length),t.push(n);continue}let c=e;if((o=this.options.extensions)!=null&&o.startBlock){let h=1/0;const d=e.slice(1);let g;this.options.extensions.startBlock.forEach(p=>{g=p.call({lexer:this},d),typeof g=="number"&&g>=0&&(h=Math.min(h,g))}),h<1/0&&h>=0&&(c=e.substring(0,h+1))}if(this.state.top&&(n=this.tokenizer.paragraph(c))){const h=t.at(-1);s&&h?.type==="paragraph"?(h.raw+=`
`+n.raw,h.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):t.push(n),s=c.length!==e.length,e=e.substring(n.raw.length);continue}if(n=this.tokenizer.text(e)){e=e.substring(n.raw.length);const h=t.at(-1);h?.type==="text"?(h.raw+=`
`+n.raw,h.text+=`
`+n.text,this.inlineQueue.pop(),this.inlineQueue.at(-1).src=h.text):t.push(n);continue}if(e){const h="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(h);break}else throw new Error(h)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){var s,a,r;let o=e,n=null;if(this.tokens.links){const d=Object.keys(this.tokens.links);if(d.length>0)for(;(n=this.tokenizer.rules.inline.reflinkSearch.exec(o))!=null;)d.includes(n[0].slice(n[0].lastIndexOf("[")+1,-1))&&(o=o.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}for(;(n=this.tokenizer.rules.inline.anyPunctuation.exec(o))!=null;)o=o.slice(0,n.index)+"++"+o.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);for(;(n=this.tokenizer.rules.inline.blockSkip.exec(o))!=null;)o=o.slice(0,n.index)+"["+"a".repeat(n[0].length-2)+"]"+o.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);let c=!1,h="";for(;e;){c||(h=""),c=!1;let d;if((a=(s=this.options.extensions)==null?void 0:s.inline)!=null&&a.some(p=>(d=p.call({lexer:this},e,t))?(e=e.substring(d.raw.length),t.push(d),!0):!1))continue;if(d=this.tokenizer.escape(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.tag(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.link(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.reflink(e,this.tokens.links)){e=e.substring(d.raw.length);const p=t.at(-1);d.type==="text"&&p?.type==="text"?(p.raw+=d.raw,p.text+=d.text):t.push(d);continue}if(d=this.tokenizer.emStrong(e,o,h)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.codespan(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.br(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.del(e)){e=e.substring(d.raw.length),t.push(d);continue}if(d=this.tokenizer.autolink(e)){e=e.substring(d.raw.length),t.push(d);continue}if(!this.state.inLink&&(d=this.tokenizer.url(e))){e=e.substring(d.raw.length),t.push(d);continue}let g=e;if((r=this.options.extensions)!=null&&r.startInline){let p=1/0;const L=e.slice(1);let w;this.options.extensions.startInline.forEach(m=>{w=m.call({lexer:this},L),typeof w=="number"&&w>=0&&(p=Math.min(p,w))}),p<1/0&&p>=0&&(g=e.substring(0,p+1))}if(d=this.tokenizer.inlineText(g)){e=e.substring(d.raw.length),d.raw.slice(-1)!=="_"&&(h=d.raw.slice(-1)),c=!0;const p=t.at(-1);p?.type==="text"?(p.raw+=d.raw,p.text+=d.text):t.push(d);continue}if(e){const p="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(p);break}else throw new Error(p)}}return t}},pt=class{constructor(i){l(this,"options"),l(this,"parser"),this.options=i||ve}space(i){return""}code({text:i,lang:e,escaped:t}){var s;const a=(s=(e||"").match(Y.notSpaceStart))==null?void 0:s[0],r=i.replace(Y.endingNewline,"")+`
`;return a?'<pre><code class="language-'+ce(a)+'">'+(t?r:ce(r,!0))+`</code></pre>
`:"<pre><code>"+(t?r:ce(r,!0))+`</code></pre>
`}blockquote({tokens:i}){return`<blockquote>
${this.parser.parse(i)}</blockquote>
`}html({text:i}){return i}heading({tokens:i,depth:e}){return`<h${e}>${this.parser.parseInline(i)}</h${e}>
`}hr(i){return`<hr>
`}list(i){const e=i.ordered,t=i.start;let s="";for(let o=0;o<i.items.length;o++){const n=i.items[o];s+=this.listitem(n)}const a=e?"ol":"ul",r=e&&t!==1?' start="'+t+'"':"";return"<"+a+r+`>
`+s+"</"+a+`>
`}listitem(i){var e;let t="";if(i.task){const s=this.checkbox({checked:!!i.checked});i.loose?((e=i.tokens[0])==null?void 0:e.type)==="paragraph"?(i.tokens[0].text=s+" "+i.tokens[0].text,i.tokens[0].tokens&&i.tokens[0].tokens.length>0&&i.tokens[0].tokens[0].type==="text"&&(i.tokens[0].tokens[0].text=s+" "+ce(i.tokens[0].tokens[0].text),i.tokens[0].tokens[0].escaped=!0)):i.tokens.unshift({type:"text",raw:s+" ",text:s+" ",escaped:!0}):t+=s+" "}return t+=this.parser.parse(i.tokens,!!i.loose),`<li>${t}</li>
`}checkbox({checked:i}){return"<input "+(i?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:i}){return`<p>${this.parser.parseInline(i)}</p>
`}table(i){let e="",t="";for(let a=0;a<i.header.length;a++)t+=this.tablecell(i.header[a]);e+=this.tablerow({text:t});let s="";for(let a=0;a<i.rows.length;a++){const r=i.rows[a];t="";for(let o=0;o<r.length;o++)t+=this.tablecell(r[o]);s+=this.tablerow({text:t})}return s&&(s=`<tbody>${s}</tbody>`),`<table>
<thead>
`+e+`</thead>
`+s+`</table>
`}tablerow({text:i}){return`<tr>
${i}</tr>
`}tablecell(i){const e=this.parser.parseInline(i.tokens),t=i.header?"th":"td";return(i.align?`<${t} align="${i.align}">`:`<${t}>`)+e+`</${t}>
`}strong({tokens:i}){return`<strong>${this.parser.parseInline(i)}</strong>`}em({tokens:i}){return`<em>${this.parser.parseInline(i)}</em>`}codespan({text:i}){return`<code>${ce(i,!0)}</code>`}br(i){return"<br>"}del({tokens:i}){return`<del>${this.parser.parseInline(i)}</del>`}link({href:i,title:e,tokens:t}){const s=this.parser.parseInline(t),a=Ra(i);if(a===null)return s;i=a;let r='<a href="'+i+'"';return e&&(r+=' title="'+ce(e)+'"'),r+=">"+s+"</a>",r}image({href:i,title:e,text:t,tokens:s}){s&&(t=this.parser.parseInline(s,this.parser.textRenderer));const a=Ra(i);if(a===null)return ce(t);i=a;let r=`<img src="${i}" alt="${t}"`;return e&&(r+=` title="${ce(e)}"`),r+=">",r}text(i){return"tokens"in i&&i.tokens?this.parser.parseInline(i.tokens):"escaped"in i&&i.escaped?i.text:ce(i.text)}},zt=class{strong({text:i}){return i}em({text:i}){return i}codespan({text:i}){return i}del({text:i}){return i}html({text:i}){return i}text({text:i}){return i}link({text:i}){return""+i}image({text:i}){return""+i}br(){return""}},de=class ya{constructor(e){l(this,"options"),l(this,"renderer"),l(this,"textRenderer"),this.options=e||ve,this.options.renderer=this.options.renderer||new pt,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new zt}static parse(e,t){return new ya(t).parse(e)}static parseInline(e,t){return new ya(t).parseInline(e)}parse(e,t=!0){var s,a;let r="";for(let o=0;o<e.length;o++){const n=e[o];if((a=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&a[n.type]){const h=n,d=this.options.extensions.renderers[h.type].call({parser:this},h);if(d!==!1||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(h.type)){r+=d||"";continue}}const c=n;switch(c.type){case"space":{r+=this.renderer.space(c);continue}case"hr":{r+=this.renderer.hr(c);continue}case"heading":{r+=this.renderer.heading(c);continue}case"code":{r+=this.renderer.code(c);continue}case"table":{r+=this.renderer.table(c);continue}case"blockquote":{r+=this.renderer.blockquote(c);continue}case"list":{r+=this.renderer.list(c);continue}case"html":{r+=this.renderer.html(c);continue}case"paragraph":{r+=this.renderer.paragraph(c);continue}case"text":{let h=c,d=this.renderer.text(h);for(;o+1<e.length&&e[o+1].type==="text";)h=e[++o],d+=`
`+this.renderer.text(h);t?r+=this.renderer.paragraph({type:"paragraph",raw:d,text:d,tokens:[{type:"text",raw:d,text:d,escaped:!0}]}):r+=d;continue}default:{const h='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return r}parseInline(e,t=this.renderer){var s,a;let r="";for(let o=0;o<e.length;o++){const n=e[o];if((a=(s=this.options.extensions)==null?void 0:s.renderers)!=null&&a[n.type]){const h=this.options.extensions.renderers[n.type].call({parser:this},n);if(h!==!1||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(n.type)){r+=h||"";continue}}const c=n;switch(c.type){case"escape":{r+=t.text(c);break}case"html":{r+=t.html(c);break}case"link":{r+=t.link(c);break}case"image":{r+=t.image(c);break}case"strong":{r+=t.strong(c);break}case"em":{r+=t.em(c);break}case"codespan":{r+=t.codespan(c);break}case"br":{r+=t.br(c);break}case"del":{r+=t.del(c);break}case"text":{r+=t.text(c);break}default:{const h='Token with "'+c.type+'" type was not found.';if(this.options.silent)return console.error(h),"";throw new Error(h)}}}return r}},$t,gt=($t=class{constructor(i){l(this,"options"),l(this,"block"),this.options=i||ve}preprocess(i){return i}postprocess(i){return i}processAllTokens(i){return i}provideLexer(){return this.block?ue.lex:ue.lexInline}provideParser(){return this.block?de.parse:de.parseInline}},l($t,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"])),$t),gi=class{constructor(...i){l(this,"defaults",At()),l(this,"options",this.setOptions),l(this,"parse",this.parseMarkdown(!0)),l(this,"parseInline",this.parseMarkdown(!1)),l(this,"Parser",de),l(this,"Renderer",pt),l(this,"TextRenderer",zt),l(this,"Lexer",ue),l(this,"Tokenizer",dt),l(this,"Hooks",gt),this.use(...i)}walkTokens(i,e){var t,s;let a=[];for(const r of i)switch(a=a.concat(e.call(this,r)),r.type){case"table":{const o=r;for(const n of o.header)a=a.concat(this.walkTokens(n.tokens,e));for(const n of o.rows)for(const c of n)a=a.concat(this.walkTokens(c.tokens,e));break}case"list":{const o=r;a=a.concat(this.walkTokens(o.items,e));break}default:{const o=r;(s=(t=this.defaults.extensions)==null?void 0:t.childTokens)!=null&&s[o.type]?this.defaults.extensions.childTokens[o.type].forEach(n=>{const c=o[n].flat(1/0);a=a.concat(this.walkTokens(c,e))}):o.tokens&&(a=a.concat(this.walkTokens(o.tokens,e)))}}return a}use(...i){const e=this.defaults.extensions||{renderers:{},childTokens:{}};return i.forEach(t=>{const s={...t};if(s.async=this.defaults.async||s.async||!1,t.extensions&&(t.extensions.forEach(a=>{if(!a.name)throw new Error("extension name required");if("renderer"in a){const r=e.renderers[a.name];r?e.renderers[a.name]=function(...o){let n=a.renderer.apply(this,o);return n===!1&&(n=r.apply(this,o)),n}:e.renderers[a.name]=a.renderer}if("tokenizer"in a){if(!a.level||a.level!=="block"&&a.level!=="inline")throw new Error("extension level must be 'block' or 'inline'");const r=e[a.level];r?r.unshift(a.tokenizer):e[a.level]=[a.tokenizer],a.start&&(a.level==="block"?e.startBlock?e.startBlock.push(a.start):e.startBlock=[a.start]:a.level==="inline"&&(e.startInline?e.startInline.push(a.start):e.startInline=[a.start]))}"childTokens"in a&&a.childTokens&&(e.childTokens[a.name]=a.childTokens)}),s.extensions=e),t.renderer){const a=this.defaults.renderer||new pt(this.defaults);for(const r in t.renderer){if(!(r in a))throw new Error(`renderer '${r}' does not exist`);if(["options","parser"].includes(r))continue;const o=r,n=t.renderer[o],c=a[o];a[o]=(...h)=>{let d=n.apply(a,h);return d===!1&&(d=c.apply(a,h)),d||""}}s.renderer=a}if(t.tokenizer){const a=this.defaults.tokenizer||new dt(this.defaults);for(const r in t.tokenizer){if(!(r in a))throw new Error(`tokenizer '${r}' does not exist`);if(["options","rules","lexer"].includes(r))continue;const o=r,n=t.tokenizer[o],c=a[o];a[o]=(...h)=>{let d=n.apply(a,h);return d===!1&&(d=c.apply(a,h)),d}}s.tokenizer=a}if(t.hooks){const a=this.defaults.hooks||new gt;for(const r in t.hooks){if(!(r in a))throw new Error(`hook '${r}' does not exist`);if(["options","block"].includes(r))continue;const o=r,n=t.hooks[o],c=a[o];gt.passThroughHooks.has(r)?a[o]=h=>{if(this.defaults.async)return Promise.resolve(n.call(a,h)).then(g=>c.call(a,g));const d=n.call(a,h);return c.call(a,d)}:a[o]=(...h)=>{let d=n.apply(a,h);return d===!1&&(d=c.apply(a,h)),d}}s.hooks=a}if(t.walkTokens){const a=this.defaults.walkTokens,r=t.walkTokens;s.walkTokens=function(o){let n=[];return n.push(r.call(this,o)),a&&(n=n.concat(a.call(this,o))),n}}this.defaults={...this.defaults,...s}}),this}setOptions(i){return this.defaults={...this.defaults,...i},this}lexer(i,e){return ue.lex(i,e??this.defaults)}parser(i,e){return de.parse(i,e??this.defaults)}parseMarkdown(i){return(e,t)=>{const s={...t},a={...this.defaults,...s},r=this.onError(!!a.silent,!!a.async);if(this.defaults.async===!0&&s.async===!1)return r(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if(typeof e>"u"||e===null)return r(new Error("marked(): input parameter is undefined or null"));if(typeof e!="string")return r(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(e)+", string expected"));a.hooks&&(a.hooks.options=a,a.hooks.block=i);const o=a.hooks?a.hooks.provideLexer():i?ue.lex:ue.lexInline,n=a.hooks?a.hooks.provideParser():i?de.parse:de.parseInline;if(a.async)return Promise.resolve(a.hooks?a.hooks.preprocess(e):e).then(c=>o(c,a)).then(c=>a.hooks?a.hooks.processAllTokens(c):c).then(c=>a.walkTokens?Promise.all(this.walkTokens(c,a.walkTokens)).then(()=>c):c).then(c=>n(c,a)).then(c=>a.hooks?a.hooks.postprocess(c):c).catch(r);try{a.hooks&&(e=a.hooks.preprocess(e));let c=o(e,a);a.hooks&&(c=a.hooks.processAllTokens(c)),a.walkTokens&&this.walkTokens(c,a.walkTokens);let h=n(c,a);return a.hooks&&(h=a.hooks.postprocess(h)),h}catch(c){return r(c)}}}onError(i,e){return t=>{if(t.message+=`
Please report this to https://github.com/markedjs/marked.`,i){const s="<p>An error occurred:</p><pre>"+ce(t.message+"",!0)+"</pre>";return e?Promise.resolve(s):s}if(e)return Promise.reject(t);throw t}}},Me=new gi;function D(i,e){return Me.parse(i,e)}D.options=D.setOptions=function(i){return Me.setOptions(i),D.defaults=Me.defaults,va(D.defaults),D},D.getDefaults=At,D.defaults=ve,D.use=function(...i){return Me.use(...i),D.defaults=Me.defaults,va(D.defaults),D},D.walkTokens=function(i,e){return Me.walkTokens(i,e)},D.parseInline=Me.parseInline,D.Parser=de,D.parser=de.parse,D.Renderer=pt,D.TextRenderer=zt,D.Lexer=ue,D.lexer=ue.lex,D.Tokenizer=dt,D.Hooks=gt,D.parse=D,D.options,D.setOptions,D.use,D.walkTokens,D.parseInline,de.parse,ue.lex;/*! @license DOMPurify 3.2.6 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.6/LICENSE */const{entries:Pa,setPrototypeOf:za,isFrozen:mi,getPrototypeOf:fi,getOwnPropertyDescriptor:Li}=Object;let{freeze:J,seal:se,create:$a}=Object,{apply:Ft,construct:Vt}=typeof Reflect<"u"&&Reflect;J||(J=function(i){return i}),se||(se=function(i){return i}),Ft||(Ft=function(i,e,t){return i.apply(e,t)}),Vt||(Vt=function(i,e){return new i(...e)});const mt=Z(Array.prototype.forEach),wi=Z(Array.prototype.lastIndexOf),Fa=Z(Array.prototype.pop),He=Z(Array.prototype.push),yi=Z(Array.prototype.splice),ft=Z(String.prototype.toLowerCase),Qt=Z(String.prototype.toString),Va=Z(String.prototype.match),We=Z(String.prototype.replace),vi=Z(String.prototype.indexOf),Mi=Z(String.prototype.trim),ie=Z(Object.prototype.hasOwnProperty),G=Z(RegExp.prototype.test),Ye=Ci(TypeError);function Z(i){return function(e){e instanceof RegExp&&(e.lastIndex=0);for(var t=arguments.length,s=new Array(t>1?t-1:0),a=1;a<t;a++)s[a-1]=arguments[a];return Ft(i,e,s)}}function Ci(i){return function(){for(var e=arguments.length,t=new Array(e),s=0;s<e;s++)t[s]=arguments[s];return Vt(i,t)}}function x(i,e){let t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ft;za&&za(i,null);let s=e.length;for(;s--;){let a=e[s];if(typeof a=="string"){const r=t(a);r!==a&&(mi(e)||(e[s]=r),a=r)}i[a]=!0}return i}function bi(i){for(let e=0;e<i.length;e++)ie(i,e)||(i[e]=null);return i}function pe(i){const e=$a(null);for(const[t,s]of Pa(i))ie(i,t)&&(Array.isArray(s)?e[t]=bi(s):s&&typeof s=="object"&&s.constructor===Object?e[t]=pe(s):e[t]=s);return e}function Je(i,e){for(;i!==null;){const s=Li(i,e);if(s){if(s.get)return Z(s.get);if(typeof s.value=="function")return Z(s.value)}i=fi(i)}function t(){return null}return t}const Qa=J(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Bt=J(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),_t=J(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),xi=J(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),qt=J(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ki=J(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),Ba=J(["#text"]),_a=J(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Ut=J(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),qa=J(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Lt=J(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Si=se(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ti=se(/<%[\w\W]*|[\w\W]*%>/gm),Ai=se(/\$\{[\w\W]*/gm),Ei=se(/^data-[\-\w.\u00B7-\uFFFF]+$/),Ii=se(/^aria-[\-\w]+$/),Ua=se(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Di=se(/^(?:\w+script|data):/i),ji=se(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Ha=se(/^html$/i),Ri=se(/^[a-z][.\w]*(-[.\w]+)+$/i);var Wa=Object.freeze({__proto__:null,ARIA_ATTR:Ii,ATTR_WHITESPACE:ji,CUSTOM_ELEMENT:Ri,DATA_ATTR:Ei,DOCTYPE_NAME:Ha,ERB_EXPR:Ti,IS_ALLOWED_URI:Ua,IS_SCRIPT_OR_DATA:Di,MUSTACHE_EXPR:Si,TMPLIT_EXPR:Ai});const Ge={element:1,text:3,progressingInstruction:7,comment:8,document:9},Ni=function(){return typeof window>"u"?null:window},Oi=function(i,e){if(typeof i!="object"||typeof i.createPolicy!="function")return null;let t=null;const s="data-tt-policy-suffix";e&&e.hasAttribute(s)&&(t=e.getAttribute(s));const a="dompurify"+(t?"#"+t:"");try{return i.createPolicy(a,{createHTML(r){return r},createScriptURL(r){return r}})}catch{return console.warn("TrustedTypes policy "+a+" could not be created."),null}},Ya=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Ja(){let i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Ni();const e=u=>Ja(u);if(e.version="3.2.6",e.removed=[],!i||!i.document||i.document.nodeType!==Ge.document||!i.Element)return e.isSupported=!1,e;let{document:t}=i;const s=t,a=s.currentScript,{DocumentFragment:r,HTMLTemplateElement:o,Node:n,Element:c,NodeFilter:h,NamedNodeMap:d=i.NamedNodeMap||i.MozNamedAttrMap,HTMLFormElement:g,DOMParser:p,trustedTypes:L}=i,w=c.prototype,m=Je(w,"cloneNode"),y=Je(w,"remove"),b=Je(w,"nextSibling"),A=Je(w,"childNodes"),R=Je(w,"parentNode");if(typeof o=="function"){const u=t.createElement("template");u.content&&u.content.ownerDocument&&(t=u.content.ownerDocument)}let S,E="";const{implementation:H,createNodeIterator:ae,createDocumentFragment:X,getElementsByTagName:it}=t,{importNode:be}=s;let O=Ya();e.isSupported=typeof Pa=="function"&&typeof R=="function"&&H&&H.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:me,ERB_EXPR:ra,TMPLIT_EXPR:na,DATA_ATTR:Ar,ARIA_ATTR:Er,IS_SCRIPT_OR_DATA:Ir,ATTR_WHITESPACE:os,CUSTOM_ELEMENT:Dr}=Wa;let{IS_ALLOWED_URI:ls}=Wa,Q=null;const cs=x({},[...Qa,...Bt,..._t,...qt,...Ba]);let q=null;const hs=x({},[..._a,...Ut,...qa,...Lt]);let $=Object.seal($a(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),rt=null,oa=null,us=!0,la=!0,ds=!1,ps=!0,Oe=!1,Mt=!0,xe=!1,ca=!1,ha=!1,Pe=!1,Ct=!1,bt=!1,gs=!0,ms=!1;const jr="user-content-";let ua=!0,nt=!1,ze={},$e=null;const fs=x({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ls=null;const ws=x({},["audio","video","img","source","image","track"]);let da=null;const ys=x({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),xt="http://www.w3.org/1998/Math/MathML",kt="http://www.w3.org/2000/svg",fe="http://www.w3.org/1999/xhtml";let Fe=fe,pa=!1,ga=null;const Rr=x({},[xt,kt,fe],Qt);let St=x({},["mi","mo","mn","ms","mtext"]),Tt=x({},["annotation-xml"]);const Nr=x({},["title","style","font","a","script"]);let ot=null;const Or=["application/xhtml+xml","text/html"],Pr="text/html";let B=null,Ve=null;const zr=t.createElement("form"),vs=function(u){return u instanceof RegExp||u instanceof Function},ma=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Ve&&Ve===u)){if((!u||typeof u!="object")&&(u={}),u=pe(u),ot=Or.indexOf(u.PARSER_MEDIA_TYPE)===-1?Pr:u.PARSER_MEDIA_TYPE,B=ot==="application/xhtml+xml"?Qt:ft,Q=ie(u,"ALLOWED_TAGS")?x({},u.ALLOWED_TAGS,B):cs,q=ie(u,"ALLOWED_ATTR")?x({},u.ALLOWED_ATTR,B):hs,ga=ie(u,"ALLOWED_NAMESPACES")?x({},u.ALLOWED_NAMESPACES,Qt):Rr,da=ie(u,"ADD_URI_SAFE_ATTR")?x(pe(ys),u.ADD_URI_SAFE_ATTR,B):ys,Ls=ie(u,"ADD_DATA_URI_TAGS")?x(pe(ws),u.ADD_DATA_URI_TAGS,B):ws,$e=ie(u,"FORBID_CONTENTS")?x({},u.FORBID_CONTENTS,B):fs,rt=ie(u,"FORBID_TAGS")?x({},u.FORBID_TAGS,B):pe({}),oa=ie(u,"FORBID_ATTR")?x({},u.FORBID_ATTR,B):pe({}),ze=ie(u,"USE_PROFILES")?u.USE_PROFILES:!1,us=u.ALLOW_ARIA_ATTR!==!1,la=u.ALLOW_DATA_ATTR!==!1,ds=u.ALLOW_UNKNOWN_PROTOCOLS||!1,ps=u.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Oe=u.SAFE_FOR_TEMPLATES||!1,Mt=u.SAFE_FOR_XML!==!1,xe=u.WHOLE_DOCUMENT||!1,Pe=u.RETURN_DOM||!1,Ct=u.RETURN_DOM_FRAGMENT||!1,bt=u.RETURN_TRUSTED_TYPE||!1,ha=u.FORCE_BODY||!1,gs=u.SANITIZE_DOM!==!1,ms=u.SANITIZE_NAMED_PROPS||!1,ua=u.KEEP_CONTENT!==!1,nt=u.IN_PLACE||!1,ls=u.ALLOWED_URI_REGEXP||Ua,Fe=u.NAMESPACE||fe,St=u.MATHML_TEXT_INTEGRATION_POINTS||St,Tt=u.HTML_INTEGRATION_POINTS||Tt,$=u.CUSTOM_ELEMENT_HANDLING||{},u.CUSTOM_ELEMENT_HANDLING&&vs(u.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&($.tagNameCheck=u.CUSTOM_ELEMENT_HANDLING.tagNameCheck),u.CUSTOM_ELEMENT_HANDLING&&vs(u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&($.attributeNameCheck=u.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),u.CUSTOM_ELEMENT_HANDLING&&typeof u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&($.allowCustomizedBuiltInElements=u.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Oe&&(la=!1),Ct&&(Pe=!0),ze&&(Q=x({},Ba),q=[],ze.html===!0&&(x(Q,Qa),x(q,_a)),ze.svg===!0&&(x(Q,Bt),x(q,Ut),x(q,Lt)),ze.svgFilters===!0&&(x(Q,_t),x(q,Ut),x(q,Lt)),ze.mathMl===!0&&(x(Q,qt),x(q,qa),x(q,Lt))),u.ADD_TAGS&&(Q===cs&&(Q=pe(Q)),x(Q,u.ADD_TAGS,B)),u.ADD_ATTR&&(q===hs&&(q=pe(q)),x(q,u.ADD_ATTR,B)),u.ADD_URI_SAFE_ATTR&&x(da,u.ADD_URI_SAFE_ATTR,B),u.FORBID_CONTENTS&&($e===fs&&($e=pe($e)),x($e,u.FORBID_CONTENTS,B)),ua&&(Q["#text"]=!0),xe&&x(Q,["html","head","body"]),Q.table&&(x(Q,["tbody"]),delete rt.tbody),u.TRUSTED_TYPES_POLICY){if(typeof u.TRUSTED_TYPES_POLICY.createHTML!="function")throw Ye('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof u.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw Ye('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');S=u.TRUSTED_TYPES_POLICY,E=S.createHTML("")}else S===void 0&&(S=Oi(L,a)),S!==null&&typeof E=="string"&&(E=S.createHTML(""));J&&J(u),Ve=u}},Ms=x({},[...Bt,..._t,...xi]),Cs=x({},[...qt,...ki]),$r=function(u){let v=R(u);(!v||!v.tagName)&&(v={namespaceURI:Fe,tagName:"template"});const f=ft(u.tagName),j=ft(v.tagName);return ga[u.namespaceURI]?u.namespaceURI===kt?v.namespaceURI===fe?f==="svg":v.namespaceURI===xt?f==="svg"&&(j==="annotation-xml"||St[j]):!!Ms[f]:u.namespaceURI===xt?v.namespaceURI===fe?f==="math":v.namespaceURI===kt?f==="math"&&Tt[j]:!!Cs[f]:u.namespaceURI===fe?v.namespaceURI===kt&&!Tt[j]||v.namespaceURI===xt&&!St[j]?!1:!Cs[f]&&(Nr[f]||!Ms[f]):!!(ot==="application/xhtml+xml"&&ga[u.namespaceURI]):!1},ke=function(u){He(e.removed,{element:u});try{R(u).removeChild(u)}catch{y(u)}},Qe=function(u,v){try{He(e.removed,{attribute:v.getAttributeNode(u),from:v})}catch{He(e.removed,{attribute:null,from:v})}if(v.removeAttribute(u),u==="is")if(Pe||Ct)try{ke(v)}catch{}else try{v.setAttribute(u,"")}catch{}},bs=function(u){let v=null,f=null;if(ha)u="<remove></remove>"+u;else{const z=Va(u,/^[\r\n\t ]+/);f=z&&z[0]}ot==="application/xhtml+xml"&&Fe===fe&&(u='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+u+"</body></html>");const j=S?S.createHTML(u):u;if(Fe===fe)try{v=new p().parseFromString(j,ot)}catch{}if(!v||!v.documentElement){v=H.createDocument(Fe,"template",null);try{v.documentElement.innerHTML=pa?E:j}catch{}}const U=v.body||v.documentElement;return u&&f&&U.insertBefore(t.createTextNode(f),U.childNodes[0]||null),Fe===fe?it.call(v,xe?"html":"body")[0]:xe?v.documentElement:U},xs=function(u){return ae.call(u.ownerDocument||u,u,h.SHOW_ELEMENT|h.SHOW_COMMENT|h.SHOW_TEXT|h.SHOW_PROCESSING_INSTRUCTION|h.SHOW_CDATA_SECTION,null)},fa=function(u){return u instanceof g&&(typeof u.nodeName!="string"||typeof u.textContent!="string"||typeof u.removeChild!="function"||!(u.attributes instanceof d)||typeof u.removeAttribute!="function"||typeof u.setAttribute!="function"||typeof u.namespaceURI!="string"||typeof u.insertBefore!="function"||typeof u.hasChildNodes!="function")},ks=function(u){return typeof n=="function"&&u instanceof n};function Le(u,v,f){mt(u,j=>{j.call(e,v,f,Ve)})}const Ss=function(u){let v=null;if(Le(O.beforeSanitizeElements,u,null),fa(u))return ke(u),!0;const f=B(u.nodeName);if(Le(O.uponSanitizeElement,u,{tagName:f,allowedTags:Q}),Mt&&u.hasChildNodes()&&!ks(u.firstElementChild)&&G(/<[/\w!]/g,u.innerHTML)&&G(/<[/\w!]/g,u.textContent)||u.nodeType===Ge.progressingInstruction||Mt&&u.nodeType===Ge.comment&&G(/<[/\w]/g,u.data))return ke(u),!0;if(!Q[f]||rt[f]){if(!rt[f]&&As(f)&&($.tagNameCheck instanceof RegExp&&G($.tagNameCheck,f)||$.tagNameCheck instanceof Function&&$.tagNameCheck(f)))return!1;if(ua&&!$e[f]){const j=R(u)||u.parentNode,U=A(u)||u.childNodes;if(U&&j){const z=U.length;for(let we=z-1;we>=0;--we){const le=m(U[we],!0);le.__removalCount=(u.__removalCount||0)+1,j.insertBefore(le,b(u))}}}return ke(u),!0}return u instanceof c&&!$r(u)||(f==="noscript"||f==="noembed"||f==="noframes")&&G(/<\/no(script|embed|frames)/i,u.innerHTML)?(ke(u),!0):(Oe&&u.nodeType===Ge.text&&(v=u.textContent,mt([me,ra,na],j=>{v=We(v,j," ")}),u.textContent!==v&&(He(e.removed,{element:u.cloneNode()}),u.textContent=v)),Le(O.afterSanitizeElements,u,null),!1)},Ts=function(u,v,f){if(gs&&(v==="id"||v==="name")&&(f in t||f in zr))return!1;if(!(la&&!oa[v]&&G(Ar,v))&&!(us&&G(Er,v))){if(!q[v]||oa[v]){if(!(As(u)&&($.tagNameCheck instanceof RegExp&&G($.tagNameCheck,u)||$.tagNameCheck instanceof Function&&$.tagNameCheck(u))&&($.attributeNameCheck instanceof RegExp&&G($.attributeNameCheck,v)||$.attributeNameCheck instanceof Function&&$.attributeNameCheck(v))||v==="is"&&$.allowCustomizedBuiltInElements&&($.tagNameCheck instanceof RegExp&&G($.tagNameCheck,f)||$.tagNameCheck instanceof Function&&$.tagNameCheck(f))))return!1}else if(!da[v]&&!G(ls,We(f,os,""))&&!((v==="src"||v==="xlink:href"||v==="href")&&u!=="script"&&vi(f,"data:")===0&&Ls[u])&&!(ds&&!G(Ir,We(f,os,"")))&&f)return!1}return!0},As=function(u){return u!=="annotation-xml"&&Va(u,Dr)},Es=function(u){Le(O.beforeSanitizeAttributes,u,null);const{attributes:v}=u;if(!v||fa(u))return;const f={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:q,forceKeepAttr:void 0};let j=v.length;for(;j--;){const U=v[j],{name:z,namespaceURI:we,value:le}=U,he=B(z),La=le;let W=z==="value"?La:Mi(La);if(f.attrName=he,f.attrValue=W,f.keepAttr=!0,f.forceKeepAttr=void 0,Le(O.uponSanitizeAttribute,u,f),W=f.attrValue,ms&&(he==="id"||he==="name")&&(Qe(z,u),W=jr+W),Mt&&G(/((--!?|])>)|<\/(style|title)/i,W)){Qe(z,u);continue}if(f.forceKeepAttr)continue;if(!f.keepAttr){Qe(z,u);continue}if(!ps&&G(/\/>/i,W)){Qe(z,u);continue}Oe&&mt([me,ra,na],Vr=>{W=We(W,Vr," ")});const Is=B(u.nodeName);if(!Ts(Is,he,W)){Qe(z,u);continue}if(S&&typeof L=="object"&&typeof L.getAttributeType=="function"&&!we)switch(L.getAttributeType(Is,he)){case"TrustedHTML":{W=S.createHTML(W);break}case"TrustedScriptURL":{W=S.createScriptURL(W);break}}if(W!==La)try{we?u.setAttributeNS(we,z,W):u.setAttribute(z,W),fa(u)?ke(u):Fa(e.removed)}catch{Qe(z,u)}}Le(O.afterSanitizeAttributes,u,null)},Fr=function u(v){let f=null;const j=xs(v);for(Le(O.beforeSanitizeShadowDOM,v,null);f=j.nextNode();)Le(O.uponSanitizeShadowNode,f,null),Ss(f),Es(f),f.content instanceof r&&u(f.content);Le(O.afterSanitizeShadowDOM,v,null)};return e.sanitize=function(u){let v=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},f=null,j=null,U=null,z=null;if(pa=!u,pa&&(u="<!-->"),typeof u!="string"&&!ks(u))if(typeof u.toString=="function"){if(u=u.toString(),typeof u!="string")throw Ye("dirty is not a string, aborting")}else throw Ye("toString is not a function");if(!e.isSupported)return u;if(ca||ma(v),e.removed=[],typeof u=="string"&&(nt=!1),nt){if(u.nodeName){const he=B(u.nodeName);if(!Q[he]||rt[he])throw Ye("root node is forbidden and cannot be sanitized in-place")}}else if(u instanceof n)f=bs("<!---->"),j=f.ownerDocument.importNode(u,!0),j.nodeType===Ge.element&&j.nodeName==="BODY"||j.nodeName==="HTML"?f=j:f.appendChild(j);else{if(!Pe&&!Oe&&!xe&&u.indexOf("<")===-1)return S&&bt?S.createHTML(u):u;if(f=bs(u),!f)return Pe?null:bt?E:""}f&&ha&&ke(f.firstChild);const we=xs(nt?u:f);for(;U=we.nextNode();)Ss(U),Es(U),U.content instanceof r&&Fr(U.content);if(nt)return u;if(Pe){if(Ct)for(z=X.call(f.ownerDocument);f.firstChild;)z.appendChild(f.firstChild);else z=f;return(q.shadowroot||q.shadowrootmode)&&(z=be.call(s,z,!0)),z}let le=xe?f.outerHTML:f.innerHTML;return xe&&Q["!doctype"]&&f.ownerDocument&&f.ownerDocument.doctype&&f.ownerDocument.doctype.name&&G(Ha,f.ownerDocument.doctype.name)&&(le="<!DOCTYPE "+f.ownerDocument.doctype.name+`>
`+le),Oe&&mt([me,ra,na],he=>{le=We(le,he," ")}),S&&bt?S.createHTML(le):le},e.setConfig=function(){let u=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};ma(u),ca=!0},e.clearConfig=function(){Ve=null,ca=!1},e.isValidAttribute=function(u,v,f){Ve||ma({});const j=B(u),U=B(v);return Ts(j,U,f)},e.addHook=function(u,v){typeof v=="function"&&He(O[u],v)},e.removeHook=function(u,v){if(v!==void 0){const f=wi(O[u],v);return f===-1?void 0:yi(O[u],f,1)[0]}return Fa(O[u])},e.removeHooks=function(u){O[u]=[]},e.removeAllHooks=function(){O=Ya()},e}var Ga=Ja();class Pi{constructor(e){l(this,"dataLayer"),this.dataLayer=e}get answerWidgetShowMoreLimit(){return this.dataLayer.answerWidgetShowMoreLimit??100}get currentPage(){var e;return(e=this.dataLayer.searchObject)==null?void 0:e.page}get totalResults(){var e;return((e=this.dataLayer.searchResultsMetadata)==null?void 0:e.totalResultsValue)||0}get resultsPerPage(){return this.dataLayer.itemsPerPage||0}get sortOptions(){var e;return((e=this.dataLayer.searchResultsMetadata)==null?void 0:e.sorting.options)||[]}get selectedSortOption(){var e;return((e=this.dataLayer.searchResultsMetadata)==null?void 0:e.sorting.selectedSortOption)||""}get startResultIndex(){var e;return(((e=this.dataLayer.searchObject)==null?void 0:e.page)-1)*this.resultsPerPage+1}get endResultIndex(){var e;const t=(((e=this.dataLayer.searchObject)==null?void 0:e.page)-1)*this.resultsPerPage+(this.resultsPerPage??0);return t>this.totalResults?this.totalResults:t}get isFirstPage(){var e;return((e=this.dataLayer.searchObject)==null?void 0:e.page)===1}get isLastPage(){var e;return((e=this.dataLayer.searchObject)==null?void 0:e.page)>=Math.ceil(this.totalResults/this.resultsPerPage)}get percentageOfResultsLoaded(){return this.endResultIndex/this.totalResults*100}get results(){return this.dataLayer.searchResults??[]}get autoCorrectedQuery(){var e;return((e=this.dataLayer.searchResultsMetadata)==null?void 0:e.autoCorrectedQuery)||""}get originalQuery(){var e;return((e=this.dataLayer.searchObject)==null?void 0:e.query)||""}get getAnswerData(){return this.dataLayer.getAnswerData||""}get shouldShowAnswerLoadMore(){return this.dataLayer.getAnswerData.split(" ").length>this.answerWidgetShowMoreLimit}get answerTruncated(){return this.dataLayer.getAnswerData.split(" ").slice(0,this.answerWidgetShowMoreLimit).join(" ")+"..."}get fullAnswerFormatted(){return Ga.sanitize(D.parse(this.dataLayer.getAnswerData)).replace(/<a /g,'<a target="_blank" class="searchstax-answer-link" rel="noopener noreferrer" ')}get answerLoading(){return this.dataLayer.answerLoading}get shouldShowAnswerError(){return this.dataLayer.answerError}get locationError(){return this.dataLayer.locationError}get shouldShowAnswer(){return(this.dataLayer.getAnswerData!==""||this.dataLayer.parsedData.answerLoading||this.shouldShowAnswerError)&&this.dataLayer.searchObject.query!=="*"}get searchTerm(){var e,t;return((e=this.dataLayer.searchResultsMetadata)==null?void 0:e.autoCorrectedQuery)||((t=this.dataLayer.searchObject)==null?void 0:t.query)||""}get locationSearchEnabled(){return this.dataLayer.locationEnabled??!1}get locationSearchDistanceEnabled(){var e,t,s,a,r,o,n;return((t=(e=this.dataLayer.searchLocationConfig)==null?void 0:e.locationValuesOverride)!=null&&t.locationDistanceEnabled?(a=(s=this.dataLayer.searchLocationConfig)==null?void 0:s.locationValuesOverride)==null?void 0:a.locationDistanceEnabled:(n=(o=(r=this.dataLayer.searchResultsMetadata)==null?void 0:r.location)==null?void 0:o.filter)==null?void 0:n.enabled)??!1}get locationSearchDistanceValues(){var e,t,s,a,r,o,n,c,h;const d=((t=(e=this.dataLayer.searchLocationConfig)==null?void 0:e.locationValuesOverride)==null?void 0:t.filterValues)??((r=(a=(s=this.dataLayer.searchResultsMetadata)==null?void 0:s.location)==null?void 0:a.filter)==null?void 0:r.values),g=((n=(o=this.dataLayer.searchLocationConfig)==null?void 0:o.locationValuesOverride)==null?void 0:n.filterUnit)??((h=(c=this.dataLayer.searchResultsMetadata)==null?void 0:c.location)==null?void 0:h.unit);return!d||d.length===0?[]:d.map(p=>({label:p==="any"?"Any Distance":p+" "+(g??""),value:p,isSelected:p===this.dataLayer.searchRadius})).sort((p,L)=>{const w=p.value==="any"?0:parseFloat(p.value),m=L.value==="any"?0:parseFloat(L.value);return w-m})}get shouldShowLocationDistanceDropdown(){return this.locationSearchDistanceEnabled&&this.locationSearchDistanceValues.length>1}get searchingEverything(){return this.searchTerm==="*"}get firstSearchHappened(){return this.dataLayer.firstSearchHappened}get isInfiniteScroll(){return this.dataLayer.isInfiniteScroll??!1}get answerErrorMessage(){return Ga.sanitize(D.parse(this.dataLayer.answerErrorMessage)).replace("<br>","")}get searchExecuted(){var e,t,s;return((e=this.dataLayer.searchObject)==null?void 0:e.query)!==void 0&&((t=this.dataLayer.searchObject)==null?void 0:t.query)!=="undefined"&&((s=this.dataLayer.searchObject)==null?void 0:s.query)!==""}get selectedFacets(){var e;const t=this.dataLayer.searchFacetsCached??this.dataLayer.searchFacets;return t?(((e=this.dataLayer.searchObject)==null?void 0:e.facets)??[]).map(s=>{const a=s.name,r=s.value,o=t.find(n=>n.name===a);if(o){const n=o.values.find(c=>c.type==="range"?!1:c.type==="checkbox"?'"'+c.value+'"'===r:!1);if(n)return n}return null}).filter(s=>s!==null):[]}get relatedSearches(){const e=this.dataLayer.searchRelatedSearches??[];return e[e.length-1]&&(e[e.length-1].last=!0),e}get externalPromotions(){return this.dataLayer.searchExternalPromotions??[]}get data(){return{currentPage:this.currentPage,totalResults:this.totalResults,resultsPerPage:this.resultsPerPage,startResultIndex:this.startResultIndex,endResultIndex:this.endResultIndex,isFirstPage:this.isFirstPage,isLastPage:this.isLastPage,results:this.results,searchTerm:this.searchTerm!=="undefined"?this.searchTerm:"",autoCorrectedQuery:this.autoCorrectedQuery,originalQuery:this.originalQuery,selectedFacets:this.selectedFacets,searchExecuted:this.searchExecuted,searchingEverything:this.searchingEverything,relatedSearches:this.relatedSearches,hasRelatedSearches:this.relatedSearches.length>0,externalPromotions:this.externalPromotions,hasExternalPromotions:this.externalPromotions.length>0,hasResults:this.results.length>0,hasResultsOrExternalPromotions:this.results.length>0||this.externalPromotions.length>0,answer:this.getAnswerData,answerTruncated:this.answerTruncated,fullAnswerFormatted:this.fullAnswerFormatted,shouldShowAnswerLoadMore:this.shouldShowAnswerLoadMore,answerLoading:this.answerLoading,shouldShowAnswer:this.shouldShowAnswer,isInfiniteScroll:this.isInfiniteScroll,percentageOfResultsLoaded:this.percentageOfResultsLoaded,firstSearchHappened:this.firstSearchHappened,sortOptions:this.sortOptions,selectedSortOption:this.selectedSortOption,shouldShowAnswerError:this.shouldShowAnswerError,answerErrorMessage:this.answerErrorMessage,locationSearchEnabled:this.locationSearchEnabled,locationSearchDistanceEnabled:this.locationSearchDistanceEnabled,locationSearchDistanceValues:this.locationSearchDistanceValues,shouldShowLocationDistanceDropdown:this.shouldShowLocationDistanceDropdown,locationError:this.locationError}}get trackingData(){var e,t,s,a;return{searchTerm:this.searchTerm,trackApiKey:((e=this.dataLayer.searchstaxConfig)==null?void 0:e.trackApiKey)??"",session:this.dataLayer.sessionIdValue,language:this.dataLayer.language,recordsPerPage:((t=this.dataLayer.searchResultsMetadata)==null?void 0:t.recordsPerPageValue)??0,totalResults:((s=this.dataLayer.searchResultsMetadata)==null?void 0:s.totalResultsValue)??0,currentPage:this.dataLayer.currentPage,latencyVal:((a=this.dataLayer.searchResultsMetadata)==null?void 0:a.latency)??0,...this.dataLayer.model?{model:this.dataLayer.model}:{}}}}class re{static deepEqual(e,t){const s=Object.keys(e),a=Object.keys(t);if(s.length!==a.length)return!1;for(const r of s){const o=e[r],n=t[r],c=this.isObject(o)&&this.isObject(n);if(c&&!this.deepEqual(o,n)||!c&&o!==n)return!1}return!0}static isObject(e){return e!=null&&typeof e=="object"}}class C{constructor(e){l(this,"value"),l(this,"observers",{}),this.value=e,this.observers={}}subscribe(e,t){const s=Math.random().toString(36).substring(2,15),a=t||s;return this.observers[a]=e,e(this.value),a}unsubscribe(e){this.observers[e]&&delete this.observers[e]}subscribeOnce(e){const t=Math.random().toString(36).substring(2,15),s=a=>{e(a),this.unsubscribe(t)};this.subscribe(s,t)}subscribeTwice(e){const t=Math.random().toString(36).substring(2,15);let s=0;const a=r=>{s++,e(r),s>=2&&this.unsubscribe(t)};this.subscribe(a,t)}subscribeUntil(e,t,s=6e3,a=!0){const r=Math.random().toString(36).substring(2,15),o=n=>{n===t&&(e(n),this.unsubscribe(r))};return this.value===t?(e(this.value),null):(this.subscribe(o,r),setTimeout(()=>{a&&this.observers[r]&&e(this.value),this.unsubscribe(r)},s),r)}subscribeUntilHasValue(e,t=6e3,s=!0){const a=Math.random().toString(36).substring(2,15),r=o=>{o!=null&&(e(o),this.unsubscribe(a))};return this.value!==null&&this.value!==void 0?(e(this.value),null):(this.subscribe(r,a),t>0&&setTimeout(()=>{s&&this.observers[a]&&e(this.value),this.unsubscribe(a)},t),r)}setValue(e){this.value=e,this.notify()}getValue(){return this.value}notify(){for(const e in this.observers)if(Object.prototype.hasOwnProperty.call(this.observers,e)){const t=this.observers[e];typeof t=="function"&&t(this.value)}}}class Ht{static getOrSetCookie(e,t){let s=this.getCookie(e);return s==null&&(s=t??this.makeid(25),this.setCookie(e,s,{secure:!0,"max-age":3600})),s}static deleteCookie(e){this.getCookie(e)&&this.setCookie(e,"",{secure:!0,"max-age":-1})}static makeid(e){let t="";const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",a=s.length;for(let r=0;r<e;r++)t+=s.charAt(Math.floor(Math.random()*a));return t}static getCookie(e){const t=typeof document<"u"?document.cookie.match(new RegExp("(?:^|; )"+e.replace(/([.$?*|{}()[\]\\/+^])/g,"\\$1")+"=([^;]*)")):null;return t?decodeURIComponent(t[1]):void 0}static setCookie(e,t,s){const a={path:"/",...s};s.expires instanceof Date&&(a.expires=s.expires.toUTCString());let r=encodeURIComponent(e)+"="+encodeURIComponent(t);for(const o in a){r+="; "+o;const n=a[o];n!==!0&&(r+="="+n)}typeof document<"u"&&(document.cookie=r)}}class _{static removeXSSRiskyTags(e){var t="script|style|iframe|object|embed|form|input|button",s=new RegExp("</?("+t+")(\\s[^>]*)?>","gi");return e?e.replace(s,""):""}}class zi{constructor(e,t){l(this,"$searchTermChange",new C("")),l(this,"$searchLocationChange",new C("")),l(this,"$searchLocationCoordinatesDecoded",new C("")),l(this,"$searchLatChange",new C("")),l(this,"$searchLongChange",new C("")),l(this,"$searchRadiusChange",new C(void 0)),l(this,"$loadingChange",new C(!1)),l(this,"$locationError",new C(!1)),l(this,"$searchResults",new C(null)),l(this,"$searchResultsMetadata",new C(null)),l(this,"$searchAutosuggest",new C(null)),l(this,"$searchFacets",new C(null)),l(this,"$searchFacetsCached",new C(null)),l(this,"$searchstaxConfig",new C(null)),l(this,"$autosuggestResults",new C(null)),l(this,"$itemsPerPage",new C(void 0)),l(this,"$searchObject",new C({query:"",itemsPerPage:void 0,page:99999999,order:"",facets:[],additionalProps:[],location:{term:void 0,radius:void 0,lat:void 0,lon:void 0},model:""})),l(this,"$searchRelatedSearches",new C(null)),l(this,"$searchInputConfig",new C(null)),l(this,"$searchLocationConfig",new C(null)),l(this,"$searchExternalPromotions",new C(null)),l(this,"$facetsTemplateData",new C(null)),l(this,"$selectedFacetsTemplateData",new C(null)),l(this,"$paginationData",new C(null)),l(this,"$answerData",new C(null)),l(this,"$searchFeedbackData",new C(null)),l(this,"$inputWidgetTemplateData",new C(null)),l(this,"$locationWidgetTemplateData",new C(null)),l(this,"$searchSortingData",new C(null)),l(this,"$searchRelatedSearchesData",new C(null)),l(this,"$searchExternalPromotionsData",new C(null)),l(this,"$cookiesDisabled",new C(null)),l(this,"$locationDecodingLoading",new C(!1)),l(this,"$answer",new C("")),l(this,"$language",new C("en")),l(this,"$model",new C("")),l(this,"$answerLoading",new C(!1)),l(this,"$locationEnabled",new C(null)),l(this,"$answerError",new C(!1)),l(this,"$answerErrorMessage",new C("")),l(this,"$isQuestion",new C(!1)),l(this,"$inputTemplateRendered",new C(!1)),l(this,"currentPageValue",1),l(this,"isAnswerWidgetCreatedValue",!1),l(this,"renderingEngineValue",P.mustache),l(this,"parsedData",new Pi(this)),l(this,"sessionId"),l(this,"sessionIdValue",null),l(this,"autoCorrect",!0),l(this,"forceNotCorrect",!1),l(this,"lastSearchValue",""),l(this,"turnAIAnswerGenerationOn",!1),l(this,"questionURL",""),l(this,"isInfiniteScroll",!1),l(this,"firstSearchHappened",!1),l(this,"facetsWereSet",!1),l(this,"answerWidgetShowMoreLimit",100),l(this,"searchHelper"),this.sessionId=e,t&&(this.sessionIdValue=t),this.cookieHandlingCallback(t),this.$cookiesDisabled.subscribe(()=>{this.cookieHandlingCallback(t)})}cookieHandlingCallback(e){this.cookiesDisabled?(this.sessionIdValue=null,Ht.deleteCookie(this.sessionId),Ht.deleteCookie("ms_visitorid")):this.sessionIdValue=Ht.getOrSetCookie(this.sessionId,e)}setIsInfiniteScroll(e){this.isInfiniteScroll=e}setSearchTerm(e){this.$searchTermChange.setValue(_.removeXSSRiskyTags(e))}setSearchLocation(e){this.$searchLocationChange.setValue(_.removeXSSRiskyTags(e))}setSearchRadius(e){this.$searchRadiusChange.setValue(e)}setRenderingEngine(e){this.renderingEngineValue=e}setCurrentPage(e){this.currentPageValue=e}setIsAnswerWidgetCreated(e){this.isAnswerWidgetCreatedValue=e}setLoading(e){this.$loadingChange.setValue(e)}setSearchResults(e){this.firstSearchHappened=!0,(!re.deepEqual(e,this.searchResults??[""])||this.facetsWereSet)&&(this.facetsWereSet=!1,this.$searchResults.setValue(e))}setSearchResultsMetadata(e){re.deepEqual(e,this.searchResultsMetadata??{})||this.$searchResultsMetadata.setValue(e)}setSearchAutosuggest(e){this.$searchAutosuggest.setValue(e)}setSearchObject(e){var t,s;let a=e;a={...a,itemsPerPage:this.itemsPerPage,model:this.model},(s=(t=this.searchstaxConfig)==null?void 0:t.hooks)!=null&&s.beforeSearch&&a&&(a=this.searchstaxConfig.hooks.beforeSearch(a)),a&&(!re.deepEqual(a,this.searchObject??{})||this.forceNotCorrect)&&this.$searchObject.setValue(a)}setSearchFacets(e){this.facetsWereSet=!0,re.deepEqual(e,this.searchFacets??[])||this.$searchFacets.setValue(e)}setSearchFacetsCached(e){re.deepEqual(e,this.searchFacetsCached??[])||this.$searchFacetsCached.setValue(e)}setSearchRelatedSearches(e){re.deepEqual(e,this.searchRelatedSearches??[])||this.$searchRelatedSearches.setValue(e)}setSearchExternalPromotions(e){re.deepEqual(e,this.searchExternalPromotions??[])||this.$searchExternalPromotions.setValue(e)}setLanguage(e){this.$language.setValue(e)}setModel(e){this.$model.setValue(e)}setSearchstaxConfig(e){this.$searchstaxConfig.setValue(e)}setSearchInputConfig(e){this.$searchInputConfig.setValue(e)}setSearchLocationConfig(e){this.$searchLocationConfig.setValue(e)}setAutosuggestResults(e){this.$autosuggestResults.setValue(e)}setFacetsTemplateData(e){this.$facetsTemplateData.setValue(e)}setSelectedFacetsTemplateData(e){this.$selectedFacetsTemplateData.setValue(e)}setPaginationData(e){this.$paginationData.setValue(e)}setAnswerFullData(e){this.$answerData.setValue(e)}setSearchFeedbackData(e){this.$searchFeedbackData.setValue(e)}setSearchSortingData(e){this.$searchSortingData.setValue(e)}setRelatedSearchesData(e){this.$searchRelatedSearchesData.setValue(e)}setExternalPromotionsData(e){this.$searchExternalPromotionsData.setValue(e)}setCookiesDisabled(e){this.$cookiesDisabled.setValue(e)}setAnswerData(e){this.$answer.setValue(e)}setItemsPerPage(e){this.$itemsPerPage.setValue(e)}setAnswerLoading(e){this.$answerLoading.setValue(e)}setAnswerError(e){this.$answerError.setValue(e)}setIsQuestion(e){this.$isQuestion.setValue(e)}setAnswerErrorMessage(e){this.$answerErrorMessage.setValue(e)}setLocationDecodingLoading(e){this.$locationDecodingLoading.setValue(e)}setSearchLat(e){this.$searchLatChange.setValue(e)}setSearchLong(e){this.$searchLongChange.setValue(e)}setInputTemplateRendered(e){this.$inputTemplateRendered.setValue(e)}setLocationError(e){this.$locationError.setValue(e)}setInputWidgetTemplateData(e){this.$inputWidgetTemplateData.setValue(e)}setLocationWidgetTemplateData(e){this.$locationWidgetTemplateData.setValue(e)}setLocationCoordinatesDecoded(e){this.$searchLocationCoordinatesDecoded.setValue(_.removeXSSRiskyTags(e))}setLocationEnabled(e){this.$locationEnabled.setValue(e)}get getAnswerData(){return this.$answer.getValue()}get searchstaxConfig(){return this.$searchstaxConfig.getValue()}get searchFacets(){return this.$searchFacets.getValue()?JSON.parse(JSON.stringify(this.$searchFacets.getValue())):null}get searchFacetsCached(){return this.$searchFacetsCached.getValue()?JSON.parse(JSON.stringify(this.$searchFacetsCached.getValue())):null}get searchResults(){return this.$searchResults.getValue()?JSON.parse(JSON.stringify(this.$searchResults.getValue())):null}get searchTerm(){return this.$searchTermChange.getValue()}get searchLocation(){return this.$searchLocationChange.getValue()}get searchRadius(){return this.$searchRadiusChange.getValue()}get loading(){return this.$loadingChange.getValue()}get searchAutosuggest(){return this.$searchAutosuggest.getValue()}get searchResultsMetadata(){return this.$searchResultsMetadata.getValue()?JSON.parse(JSON.stringify(this.$searchResultsMetadata.getValue())):null}get currentPage(){return this.$searchObject.getValue().page??this.currentPageValue}get isAnswerWidgetCreated(){return this.isAnswerWidgetCreatedValue}get renderingEngine(){return this.renderingEngineValue}get searchObject(){return JSON.parse(JSON.stringify(this.$searchObject.getValue()))}get searchRelatedSearches(){return this.$searchRelatedSearches.getValue()?JSON.parse(JSON.stringify(this.$searchRelatedSearches.getValue())):null}get searchExternalPromotions(){return this.$searchExternalPromotions.getValue()?JSON.parse(JSON.stringify(this.$searchExternalPromotions.getValue())):null}get language(){return this.$language.getValue()}get model(){return this.$model.getValue()}get searchInputConfig(){return this.$searchInputConfig.getValue()}get searchLocationConfig(){return this.$searchLocationConfig.getValue()}get answerConfig(){return this.$answer.getValue()}get autosuggestResults(){return this.$autosuggestResults.getValue()}get facetsTemplateData(){return this.$facetsTemplateData.getValue()}get selectedFacetsTemplateData(){return this.$selectedFacetsTemplateData.getValue()}get paginationData(){return this.$paginationData.getValue()}get searchFeedbackData(){return this.$searchFeedbackData.getValue()}get searchSortingData(){return this.$searchSortingData.getValue()}get searchRelatedSearchesData(){return this.$searchRelatedSearchesData.getValue()}get searchExternalPromotionsData(){return this.$searchExternalPromotionsData.getValue()}get cookiesDisabled(){return(this.$cookiesDisabled.getValue()??!1)||!navigator.cookieEnabled}get itemsPerPage(){return this.$itemsPerPage.getValue()}get answerFullData(){return this.$answerData.getValue()}get answerLoading(){return this.$answerLoading.getValue()}get isQuestion(){return this.$isQuestion.getValue()}get answerError(){return this.$answerError.getValue()}get answerErrorMessage(){return this.$answerErrorMessage.getValue()}get locationDecodingLoading(){return this.$locationDecodingLoading.getValue()}get searchLat(){return this.$searchLatChange.getValue()}get searchLong(){return this.$searchLongChange.getValue()}get inputTemplateRendered(){return this.$inputTemplateRendered.getValue()}get locationError(){return this.$locationError.getValue()}get inputWidgetTemplateData(){return this.$inputWidgetTemplateData.getValue()}get locationWidgetTemplateData(){return this.$locationWidgetTemplateData.getValue()}get searchLocationCoordinatesDecoded(){return this.$searchLocationCoordinatesDecoded.getValue()}get locationEnabled(){return this.$locationEnabled.getValue()}}class Ze{static combineResultsWithMetadata(e){const t=[],s=parseInt(e.response.start+"");return e.response.docs.forEach((a,r)=>{var o;const n=a[e.responseHeader.params.uniqueId]??"",c={custom:null,uniqueId:n,position:s+1+r,ribbon:this.doesMapExist("ribbon",e)?this.getValueByKey("ribbon",a,e,n):null,paths:this.doesMapExist("paths",e)?this.getValueByKey("paths",a,e,n):null,url:this.doesMapExist("url",e)?this.getValueByKey("url",a,e,n):null,title:this.doesMapExist("title",e)?this.getValueByKey("title",a,e,n):null,titleTracking:this.doesMapExist("title",e)?this.getValueByKey("title",a,e,n,!0):null,promoted:a["[elevated]"]?a["[elevated]"]:!1,thumbnail:this.doesMapExist("thumbnail",e)?this.getValueByKey("thumbnail",a,e,n):null,date:this.doesMapExist("date",e)?this.getValueByKey("date",a,e,n):null,snippet:this.doesMapExist("snippet",e)?this.getValueByKey("snippet",a,e,n):null,description:this.doesMapExist("description",e)?this.getValueByKey("description",a,e,n):null,distance:this.doesMapExist("distance",e)&&this.getValueByKey("distance",a,e,n)!=="Infinity"&&this.getValueByKey("distance",a,e,n)?Math.floor(this.getValueByKey("distance",a,e,n)):null,unit:((o=e.metadata.locationSearch)==null?void 0:o.unit)??"",unmappedFields:this.getUnmappedFields(a,e,n),allFields:this.getAllFields(a,e)};t.push(c)}),t}static extractFacets(e){const t=[];if(e.metadata.facets)for(const s of e.metadata.facets){let a={values:[]};if(a.name=s.name,a.label=s.label,s.name in e.facet_counts.facet_fields){const r=e.facet_counts.facet_fields[s.name];for(let o=0;o<r.length;o+=2){const n={};n.value=r[o],n.parentName=a.name,n.count=r[o+1],n.type="checkbox",a.values.push(n)}}a.values.length>0&&t.push(a)}return t}static extractSearchResultsMetadata(e){var t,s,a,r,o,n,c,h,d,g;let p="",L={selectedSortOption:"",options:[]},w={enabled:!1,field:"",unit:"",filter:{enabled:!1,values:[],label:"",defaultValue:""}};e.metadata.locationSearch&&(w={enabled:e.metadata.locationSearch.enabled,field:e.metadata.locationSearch.field,unit:e.metadata.locationSearch.unit,filter:{enabled:((t=e.metadata.locationSearch.filter)==null?void 0:t.enabled)??!1,values:((s=e.metadata.locationSearch.filter)==null?void 0:s.values)??[],label:((a=e.metadata.locationSearch.filter)==null?void 0:a.label)??"",defaultValue:((r=e.metadata.locationSearch.filter)==null?void 0:r.defaultValue)??""}});let m=(o=e.metadata.results.find(y=>y.result_card==="date"))==null?void 0:o.name;if(L.options=[{key:"",value:"Relevance"},{key:m+" desc",value:"Most Recent"}],(n=e.metadata.sorts)!=null&&n.length){const y=e.metadata.sorts.map(b=>({value:b.label,key:b.name+" "+b.order}));L.options=[{key:"",value:"Relevance"},...y]}return p=((g=(d=(h=(c=e?.spellcheck)==null?void 0:c.suggestions)==null?void 0:h[1])==null?void 0:d.suggestion)==null?void 0:g[0])??"",typeof p!="string"&&(p=p?.word??""),{recordsPerPageValue:parseInt(e.responseHeader.params.rows),startDocVal:parseInt(e.response.start+""),totalResultsValue:parseInt(e.response.numFound+""),latency:parseInt(e.responseHeader.QTime+""),endDocValue:parseInt(e.responseHeader.params.rows)+parseInt(e.response.start+""),spellingSuggestion:p,autoCorrectedQuery:e.responseHeader.params.autoCorrectedQ??"",impressions:this.getImpressions(e),sorting:L,location:w,isLocationMapped:this.doesMapExist("distance",e)}}static getImpressions(e){const t=[],s=this.combineResultsWithMetadata(e);for(const a in s){const r=s[a],o={};o.cDocId=this.getDataForAnalytics(r.uniqueId),r.title&&(o.cDocTitle=this.getDataForAnalytics(r.title)),o.position=r.position,t.push(o)}return t}static getDataForAnalytics(e){return e!==null?typeof e>"u"?"":typeof e=="string"?e:typeof e.join<"u"?e[0]:e:""}static findResultByUniqueId(e,t){return t.find(s=>s.uniqueId===e)??null}static getUnmappedFields(e,t,s){const a=t.metadata.results.filter(o=>o.result_card==="").map(o=>o.name),r=[];for(const o of a)if(Object.keys(e).includes(o)){const n=Array.isArray(e[o])?this.getHighlightedResults(o,e[o].join(", "),s,t):this.getHighlightedResults(o,e[o]+"",s,t);r.push({key:o,value:n,isImage:this.checkIfImage(e[o])})}return r}static checkIfImage(e){return e===void 0?!1:typeof e!="string"?Array.isArray(e)&&e[0]?/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e[0]):!1:/\.(gif|jpe?g|tiff?|png|webp|bmp)$/i.test(e)}static getAllFields(e,t){const s=t.metadata.results.map(r=>r.name),a=[];for(const r of Object.keys(e))s.indexOf(r)!==-1&&a.push({key:r,value:e[r],isImage:this.checkIfImage(e[r])});return a}static doesMapExist(e,t){return t.metadata.results.find(s=>s.result_card===e)!==void 0}static getValueByKey(e,t,s,a,r=!1){const o=s.metadata.results.find(c=>c.result_card===e);if(o===void 0)return null;const n=t[o.name];return n===void 0?null:typeof n=="string"?r?n:this.getHighlightedResults(o.name,n,a,s):typeof n=="number"?n:Array.isArray(n)?r?n.join(", "):this.getHighlightedResults(o.name,n.join(", "),a,s):null}static getHighlightedResults(e,t,s,a){if(a.highlighting&&s in a.highlighting){let r=a.highlighting[s];if(r&&e in r){let o=r[e];const n=this.cleanValue(o);if(n!=="")return n}}return t}static cleanValue(e){return e===null?"":typeof e=="string"?e:Array.isArray(e)?e.join(" "):""}}class Za{constructor(e){l(this,"routeName","searchstax"),l(this,"ignoredKeys",[]),l(this,"queryStringHelper"),l(this,"titleParser"),e.routeName&&(this.routeName=e.routeName),e.ignoredKeys&&(this.ignoredKeys=e.ignoredKeys),e.title&&(this.titleParser=e.title),this.queryStringHelper=new $i(this.routeName)}updateUrl(e){const t=this.searchObjectToUrl(e);let s=typeof document<"u"?document?.title:"";this.titleParser&&(s=this.titleParser(e)),typeof document<"u"&&(document.title=s),window?.location.href!==t&&window?.history.replaceState(window.history.state,s,t)}searchObjectToUrl(e){return this.queryStringHelper.urlHasQueryParams(window?.location.href??"")?window?.location.href.split("?")[0]+"?"+this.queryStringHelper.stringify(this.searchObjectToParams(e),{ignoredKeys:this.ignoredKeys}):window?.location.href+"?"+this.queryStringHelper.stringify(this.searchObjectToParams(e),{ignoredKeys:this.ignoredKeys})}searchObjectToParams(e){const t={},s=e.page||1;if(e.query&&(t[this.routeName+"[query]"]=encodeURIComponent(e.query)),e.page&&(t[this.routeName+"[page]"]=s+""),e.order&&(t[this.routeName+"[order]"]=e.order),e.location)for(const a in e.location){const r=e.location[a];r&&(t[this.routeName+`[location][${a}]`]=r)}if(e.facets)for(const a in e.facets){const r=e.facets[a].type+":"+encodeURIComponent(e.facets[a].name)+":"+encodeURIComponent(e.facets[a].value);t[this.routeName+`[facets][${a}]`]=r}if(e.model&&(t[this.routeName+"[model]"]=e.model),this.queryStringHelper.urlHasQueryParams(window?.location.href??"")){const a=this.queryStringHelper.urlToParams(window?.location.href??"");for(const r in a)r.startsWith(this.routeName)&&delete a[r];return{...a,...t}}else return t}extractParamsThatDoNotStartWithRouteName(e){const t={};for(const s in e)s.startsWith(this.routeName)||(t[s]=e[s]);return t}extractArrayOfFacetsFromQueryParameters(e){var t,s,a;const r=[];for(const o in e)if(o.startsWith(this.routeName+"[facets]")){const n=_.removeXSSRiskyTags((t=e[o].split(":"))==null?void 0:t[0]),c=_.removeXSSRiskyTags(decodeURIComponent((s=e[o].split(":"))==null?void 0:s[1])),h=_.removeXSSRiskyTags(decodeURIComponent((a=e[o].split(":"))==null?void 0:a[2]));r.push({type:n,name:c,value:h})}return r}urlToSearchObject(e,t){const s=this.queryStringHelper.urlToParams(e),a=_.removeXSSRiskyTags(decodeURIComponent(s[this.routeName+"[page]"])),r=parseInt(a),o=isNaN(r)?1:r;return{query:_.removeXSSRiskyTags(decodeURIComponent(s[this.routeName+"[query]"]))||"",page:o,itemsPerPage:t,order:_.removeXSSRiskyTags(s[this.routeName+"[order]"])||"",facets:this.extractArrayOfFacetsFromQueryParameters(s)||[],model:_.removeXSSRiskyTags(s[this.routeName+"[model]"])||"",location:{address:_.removeXSSRiskyTags(decodeURIComponent(s[this.routeName+"[location][address]"]||"")),radius:_.removeXSSRiskyTags(decodeURIComponent(s[this.routeName+"[location][radius]"]||"")),lat:_.removeXSSRiskyTags(decodeURIComponent(s[this.routeName+"[location][lat]"]||"")),lon:_.removeXSSRiskyTags(decodeURIComponent(s[this.routeName+"[location][lon]"]||""))}}}}class $i{constructor(e){l(this,"routeName",""),l(this,"stringify",(t,s)=>{const a=this.filterOutIgnoredKeys(t,s.ignoredKeys);return Object.keys(a).map(r=>{const o=a[r];return Array.isArray(o)?o.map(n=>`${r}=${n}`).join("&"):`${r}=${o}`}).join("&")}),this.routeName=e}filterOutIgnoredKeys(e,t){const s=t||[],a={};return Object.keys(e).forEach(r=>{s.includes(r)||e[r]!==""&&(a[r]=e[r])}),a}urlToParams(e){const t={},s=e.split("?")[1];return s&&s.split("&").forEach(a=>{const[r,o]=a.split("=");t[r]=o}),t}doesParamContainRouteName(e){return e.indexOf(this.routeName)!==-1}urlHasQueryParams(e){return e.indexOf("?")!==-1}}const Se={question:"I_AM_A_QUESTION",notQuestion:"I_AM_NOT_A_QUESTION",close:"CLOSE"};class Ka extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}}function Wt(i){}function Fi(i){if(typeof i=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:e=Wt,onError:t=Wt,onRetry:s=Wt,onComment:a}=i;let r="",o=!0,n,c="",h="";function d(m){const y=o?m.replace(/^\xEF\xBB\xBF/,""):m,[b,A]=Vi(`${r}${y}`);for(const R of b)g(R);r=A,o=!1}function g(m){if(m===""){L();return}if(m.startsWith(":")){a&&a(m.slice(m.startsWith(": ")?2:1));return}const y=m.indexOf(":");if(y!==-1){const b=m.slice(0,y),A=m[y+1]===" "?2:1,R=m.slice(y+A);p(b,R,m);return}p(m,"",m)}function p(m,y,b){switch(m){case"event":h=y;break;case"data":c=`${c}${y}
`;break;case"id":n=y.includes("\0")?void 0:y;break;case"retry":/^\d+$/.test(y)?s(parseInt(y,10)):t(new Ka(`Invalid \`retry\` value: "${y}"`,{type:"invalid-retry",value:y,line:b}));break;default:t(new Ka(`Unknown field "${m.length>20?`${m.slice(0,20)}…`:m}"`,{type:"unknown-field",field:m,value:y,line:b}));break}}function L(){c.length>0&&e({id:n,event:h||void 0,data:c.endsWith(`
`)?c.slice(0,-1):c}),n=void 0,c="",h=""}function w(m={}){r&&m.consume&&g(r),o=!0,n=void 0,c="",h="",r=""}return{feed:d,reset:w}}function Vi(i){const e=[];let t="",s=0;for(;s<i.length;){const a=i.indexOf("\r",s),r=i.indexOf(`
`,s);let o=-1;if(a!==-1&&r!==-1?o=Math.min(a,r):a!==-1?o=a:r!==-1&&(o=r),o===-1){t=i.slice(s);break}else{const n=i.slice(s,o);e.push(n),s=o+1,i[s-1]==="\r"&&i[s]===`
`&&s++}}return[e,t]}class Xa extends Event{constructor(e,t){var s,a;super(e),this.code=(s=t?.code)!=null?s:void 0,this.message=(a=t?.message)!=null?a:void 0}[Symbol.for("nodejs.util.inspect.custom")](e,t,s){return s(es(this),t)}[Symbol.for("Deno.customInspect")](e,t){return e(es(this),t)}}function Qi(i){const e=globalThis.DOMException;return typeof e=="function"?new e(i,"SyntaxError"):new SyntaxError(i)}function Yt(i){return i instanceof Error?"errors"in i&&Array.isArray(i.errors)?i.errors.map(Yt).join(", "):"cause"in i&&i.cause instanceof Error?`${i}: ${Yt(i.cause)}`:i.message:`${i}`}function es(i){return{type:i.type,message:i.message,code:i.code,defaultPrevented:i.defaultPrevented,cancelable:i.cancelable,timeStamp:i.timeStamp}}var ts=i=>{throw TypeError(i)},Jt=(i,e,t)=>e.has(i)||ts("Cannot "+t),k=(i,e,t)=>(Jt(i,e,"read from private field"),t?t.call(i):e.get(i)),F=(i,e,t)=>e.has(i)?ts("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(i):e.set(i,t),N=(i,e,t,s)=>(Jt(i,e,"write to private field"),e.set(i,t),t),ge=(i,e,t)=>(Jt(i,e,"access private method"),t),ee,Ce,Te,wt,yt,Ke,Ae,Xe,ye,Ee,Ie,De,et,ne,Gt,Zt,Kt,as,Xt,ea,tt,ta,aa;class vt extends EventTarget{constructor(e,t){var s,a;super(),F(this,ne),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,F(this,ee),F(this,Ce),F(this,Te),F(this,wt),F(this,yt),F(this,Ke),F(this,Ae),F(this,Xe,null),F(this,ye),F(this,Ee),F(this,Ie,null),F(this,De,null),F(this,et,null),F(this,Zt,async r=>{var o;k(this,Ee).reset();const{body:n,redirected:c,status:h,headers:d}=r;if(h===204){ge(this,ne,tt).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(c?N(this,Te,new URL(r.url)):N(this,Te,void 0),h!==200){ge(this,ne,tt).call(this,`Non-200 status code (${h})`,h);return}if(!(d.get("content-type")||"").startsWith("text/event-stream")){ge(this,ne,tt).call(this,'Invalid content type, expected "text/event-stream"',h);return}if(k(this,ee)===this.CLOSED)return;N(this,ee,this.OPEN);const g=new Event("open");if((o=k(this,et))==null||o.call(this,g),this.dispatchEvent(g),typeof n!="object"||!n||!("getReader"in n)){ge(this,ne,tt).call(this,"Invalid response body, expected a web ReadableStream",h),this.close();return}const p=new TextDecoder,L=n.getReader();let w=!0;do{const{done:m,value:y}=await L.read();y&&k(this,Ee).feed(p.decode(y,{stream:!m})),m&&(w=!1,k(this,Ee).reset(),ge(this,ne,ta).call(this))}while(w)}),F(this,Kt,r=>{N(this,ye,void 0),!(r.name==="AbortError"||r.type==="aborted")&&ge(this,ne,ta).call(this,Yt(r))}),F(this,Xt,r=>{typeof r.id=="string"&&N(this,Xe,r.id);const o=new MessageEvent(r.event||"message",{data:r.data,origin:k(this,Te)?k(this,Te).origin:k(this,Ce).origin,lastEventId:r.id||""});k(this,De)&&(!r.event||r.event==="message")&&k(this,De).call(this,o),this.dispatchEvent(o)}),F(this,ea,r=>{N(this,Ke,r)}),F(this,aa,()=>{N(this,Ae,void 0),k(this,ee)===this.CONNECTING&&ge(this,ne,Gt).call(this)});try{if(e instanceof URL)N(this,Ce,e);else if(typeof e=="string")N(this,Ce,new URL(e,Bi()));else throw new Error("Invalid URL")}catch{throw Qi("An invalid or illegal string was specified")}N(this,Ee,Fi({onEvent:k(this,Xt),onRetry:k(this,ea)})),N(this,ee,this.CONNECTING),N(this,Ke,3e3),N(this,yt,(s=t?.fetch)!=null?s:globalThis.fetch),N(this,wt,(a=t?.withCredentials)!=null?a:!1),ge(this,ne,Gt).call(this)}get readyState(){return k(this,ee)}get url(){return k(this,Ce).href}get withCredentials(){return k(this,wt)}get onerror(){return k(this,Ie)}set onerror(e){N(this,Ie,e)}get onmessage(){return k(this,De)}set onmessage(e){N(this,De,e)}get onopen(){return k(this,et)}set onopen(e){N(this,et,e)}addEventListener(e,t,s){const a=t;super.addEventListener(e,a,s)}removeEventListener(e,t,s){const a=t;super.removeEventListener(e,a,s)}close(){k(this,Ae)&&clearTimeout(k(this,Ae)),k(this,ee)!==this.CLOSED&&(k(this,ye)&&k(this,ye).abort(),N(this,ee,this.CLOSED),N(this,ye,void 0))}}ee=new WeakMap,Ce=new WeakMap,Te=new WeakMap,wt=new WeakMap,yt=new WeakMap,Ke=new WeakMap,Ae=new WeakMap,Xe=new WeakMap,ye=new WeakMap,Ee=new WeakMap,Ie=new WeakMap,De=new WeakMap,et=new WeakMap,ne=new WeakSet,Gt=function(){N(this,ee,this.CONNECTING),N(this,ye,new AbortController),k(this,yt)(k(this,Ce),ge(this,ne,as).call(this)).then(k(this,Zt)).catch(k(this,Kt))},Zt=new WeakMap,Kt=new WeakMap,as=function(){var i;const e={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...k(this,Xe)?{"Last-Event-ID":k(this,Xe)}:void 0},cache:"no-store",signal:(i=k(this,ye))==null?void 0:i.signal};return"window"in globalThis&&(e.credentials=this.withCredentials?"include":"same-origin"),e},Xt=new WeakMap,ea=new WeakMap,tt=function(i,e){var t;k(this,ee)!==this.CLOSED&&N(this,ee,this.CLOSED);const s=new Xa("error",{code:e,message:i});(t=k(this,Ie))==null||t.call(this,s),this.dispatchEvent(s)},ta=function(i,e){var t;if(k(this,ee)===this.CLOSED)return;N(this,ee,this.CONNECTING);const s=new Xa("error",{code:e,message:i});(t=k(this,Ie))==null||t.call(this,s),this.dispatchEvent(s),N(this,Ae,setTimeout(k(this,aa),k(this,Ke)))},aa=new WeakMap,vt.CONNECTING=0,vt.OPEN=1,vt.CLOSED=2;function Bi(){const i="document"in globalThis?globalThis.document:void 0;return i&&typeof i=="object"&&"baseURI"in i&&typeof i.baseURI=="string"?i.baseURI:void 0}class oe{static attachAnalyticsScript(e){window._msq=window._msq||[];const t="https://static.searchstax.com/studio-js/v3/js/studio-analytics.js";if(document.querySelector(`script[src="${t}"]`))return;const s=e||t;var a=document.createElement("script");a.type="text/javascript",a.src=s;var r=document.getElementsByTagName("script")[0];r.parentNode&&r.parentNode.insertBefore(a,r)}static trackClick(e){const t={key:e.trackApiKey,query:e.searchTerm,shownHits:e.recordsPerPage,totalHits:e.totalResults,pageNo:e.currentPage,latency:e.latencyVal,session:e.session,cDocId:e.result.uniqueId,cDocTitle:e.result.titleTracking,position:e.result.position,language:e.language,model:e.model};return new Promise((s,a)=>{const r=["trackClick",t];t.key?this.msq().push(r,(function(o,n){JSON.stringify(o)===JSON.stringify(t)&&n?s():a()}).bind(this)):a()})}static trackAnswerLinkClick(e){const t={key:e.trackApiKey,question:e.searchTerm,session:e.session,href:e.href,language:e.language,model:e.model,answer:e.answer};return new Promise((s,a)=>{const r=["answerSourceClick",t];t.key?this.msq().push(r,(function(o,n){JSON.stringify(o)===JSON.stringify(t)&&n?s():a()}).bind(this)):a()})}static trackSearch(e){const t={key:e.trackApiKey,query:e.searchTerm,shownHits:e.recordsPerPage,totalHits:e.totalResults,pageNo:e.currentPage,latency:e.latencyVal,session:e.session,language:e.language,model:e.model,impressions:e.impressions};setTimeout(()=>{t.key&&this.msq().push(["track",t])},0)}static trackRelatedSearchClick(e){const t={session:e.session,key:e.trackApiKey,query:e.relatedSearch.search_term,position:e.relatedSearch.position,relatedSearch:e.relatedSearch.related_search,pageNo:1,shownHits:e.totalRelatredSearches,totalHits:e.totalRelatredSearches,language:e.language,model:e.model};setTimeout(()=>{t.key&&this.msq().push(["trackRelatedSearchClick",t])},0)}static trackRelatedSearches(e){const t={session:e.session,key:e.trackApiKey,query:e.searchTerm,latency:e.latencyVal,language:e.language,model:e.model,impressions:e.impressions,pageNo:1,shownHits:e.totalRelatredSearches,totalHits:e.totalRelatredSearches};setTimeout(()=>{t.key&&this.msq().push(["trackRelatedSearch",t])},0)}static trackAnswerData(e){const t={session:e.session,key:e.trackApiKey,question:e.searchTerm,answer:e.answer,language:e.language,model:e.model,is_question:e.isQuestion+""};setTimeout(()=>{t.key&&this.msq().push(["trackquestionanswer",t])},0)}static trackFeedback(e){setTimeout(()=>{this.msq().push(["trackSearchSatisfaction",{key:e.trackApiKey,email:e.email,score:e.rating,comments:e.feedback,language:e.language,model:e.model}])},0)}}l(oe,"subscribedToClickEvent",!1),l(oe,"msq",()=>typeof window<"u"&&window!=null&&window._msq?window?._msq:[]);class _i{constructor(e,t){l(this,"cachedQuery",""),l(this,"url",""),l(this,"relatedSearches",""),l(this,"suggester",""),l(this,"authHeader"),l(this,"authHeaderRelated"),l(this,"trackApiKey",""),l(this,"session",""),l(this,"searchAuthType"),l(this,"searchAuth",""),l(this,"controllerSearch"),l(this,"signalSearch"),l(this,"controllerSuggest"),l(this,"signalSuggest"),l(this,"_authToken",""),l(this,"dataLayer"),this.dataLayer=t,this.url=e.searchURL,this.dataLayer.setLanguage(e.language),this.suggester=e.suggesterURL,this.trackApiKey=e.trackApiKey,this.session=e.sessionId,this.searchAuthType=e.authType,this.searchAuth=e.searchAuth,this.authHeader=new Headers,this.authHeader.append("Accept","application/json"),this._authToken=this.searchAuthType==="token"?`Token ${e.searchAuth}`:`Basic ${e.searchAuth}`,this.authHeader.append("Authorization",this._authToken),this.authHeaderRelated=new Headers,this.authHeaderRelated.append("Accept","application/json"),this.authHeaderRelated.append("Authorization",e.searchAuth)}generateFacetQuery(e,t){let s=[];if(!t)e.forEach(function(a){const r=a.name+':"'+a.value+'"';s=s.concat("fq="+decodeURIComponent(r).replace("  "," "))});else{const a={};e.forEach(function(r){const o=r.name+":"+r.value,n=decodeURIComponent(o).replace("  "," ").split(":");a[n[0]]?a[n[0]].push(n[1]):a[n[0]]=[n[1]]});for(const r in a)if(Object.prototype.hasOwnProperty.call(a,r)){const o=a[r],n=r;let c="";for(const h of o)c+=` ${n}:"${h}"`;s=s.concat("fq="+c.trim())}}return s=s.map(a=>a.replace(/&/g,"%26").replace(/\+/g,"%2B")),s.length?"&"+s.join("&"):""}generateLocationQuery(e){let t="";if(e.lat&&e.lon){const s=Math.floor(parseFloat(e.lat)*100)/100,a=Math.floor(parseFloat(e.lon)*100)/100;t+=`&pt=${s},${a}`}return e.radius&&t!==""&&e.radius!=="any"&&(t+=`&distanceFilter=${e.radius}`),t}getRelatedSearches(e,t,s,a){const r=new Headers;r.append("Accept","application/json"),r.append("Authorization",s),fetch(t+"?search="+encodeURIComponent(e.query)+"&language="+this.dataLayer.language,{method:"GET",headers:r,credentials:"same-origin"}).then(o=>o.json()).then(o=>{a(o)})}cacheFacets(){this.dataLayer.searchObject.query!==this.cachedQuery&&(this.cachedQuery=this.dataLayer.searchObject.query,this.search({query:this.dataLayer.searchObject.query??"*",itemsPerPage:void 0,page:1,order:"",facets:[],additionalProps:this.dataLayer.searchObject.additionalProps,location:this.dataLayer.searchObject.location,model:this.dataLayer.model},this.cacheFacetsCallback.bind(this),!0))}cacheFacetsCallback(e){let t=Ze.extractFacets(e);this.dataLayer.setSearchFacetsCached(t)}search(e,t,s=!1,a=!1){if(e.query&&e.query!=="undefined"){this.dataLayer.setSearchTerm(e.query),this.dataLayer.setLoading(!0),this.controllerSearch&&this.controllerSearch.abort(),this.controllerSearch=new AbortController,this.signalSearch=this.controllerSearch.signal;const r=new Proxy(new URLSearchParams(window?.location.search??""),{get:(p,L)=>p.get(L)??""}),o=r.languageVariant?"&fq=_language:"+r.languageVariant:"";let n=e.itemsPerPage,c=(e.itemsPerPage?e.itemsPerPage:0)*(e.page-1),h=e.order?`&sort=${e.order}`:"";const d=this.url+"?q="+encodeURIComponent(e.query.trim())+"&start="+c+this.toQueryString(e.additionalProps??[])+this.generateFacetQuery(e.facets.filter(p=>p.type==="or"||p.type==="showUnavailable"),!0)+this.generateLocationQuery(e.location)+this.generateFacetQuery(e.facets.filter(p=>p.type==="and"||p.type==="tabs"),!1)+h+`&spellcheck.correct=${this.dataLayer.autoCorrect&&!a}`+(n?`&rows=${n}`:"")+(this.dataLayer.model?`&model=${this.dataLayer.model}`:"")+"&language="+this.dataLayer.language+o,g={method:"GET",headers:this.authHeader,credentials:"same-origin",signal:this.signalSearch};s&&delete g.signal,fetch(d,g).then(p=>p.json()).then(p=>{this.dataLayer.setLoading(!1),t(p)}).catch(()=>{this.dataLayer.setLoading(!1)})}}startSSE(e,t){if(!this.dataLayer.turnAIAnswerGenerationOn||e==="*"||this.dataLayer.searchObject.page!==1)return;const s=this.dataLayer.model?`&model=${this.dataLayer.model}`:"",a=new vt(this.dataLayer.questionURL+"?q="+e+"&language="+this.dataLayer.language+s+`&spellcheck.correct=${this.dataLayer.autoCorrect}`,{fetch:(o,n)=>fetch(o,{...n,headers:{...n?.headers,Authorization:this._authToken}})}),r=this.dataLayer;return a.onmessage=o=>{if(o.data===Se.question||o.data===Se.notQuestion){o.data===Se.question?(this.dataLayer.setAnswerLoading(!0),this.dataLayer.setIsQuestion(!0)):(r.setAnswerLoading(!1),this.dataLayer.setIsQuestion(!1)),r.setAnswerData("");return}if(o.data===Se.close){oe.trackAnswerData({...r.parsedData.trackingData,answer:r.$answer.getValue(),isQuestion:this.dataLayer.isQuestion}),r.setAnswerLoading(!1),a.close();return}if(o.data.indexOf("[!CAUTION]")!==-1){r.setAnswerError(!0),r.setAnswerErrorMessage("We're having trouble generating an answer. Please try again."),a.close();return}t(o.data)},a.addEventListener("error",o=>{(o.code===401||o.code===500)&&(r.setAnswerErrorMessage("We're having trouble generating an answer. Please try again."),r.setAnswerError(!0))}),a.onerror=()=>{r.setAnswerLoading(!1),a.close()},a}suggest(e,t,s){this.controllerSuggest&&this.controllerSuggest.abort(),this.controllerSuggest=new AbortController,this.signalSuggest=this.controllerSuggest.signal;const a=this.suggester+"?q="+e.trim()+this.toQueryString(s)+"&language="+this.dataLayer.language;fetch(a,{method:"GET",headers:this.authHeader,credentials:"same-origin",signal:this.signalSuggest}).then(r=>r.json()).then(r=>{t(r)}).catch(()=>()=>{})}fields(){return this.fields}toQueryString(e){if(e.length===0)return"";const t=[];for(const s of e)t.push(encodeURIComponent(s.key)+"="+encodeURIComponent(s.value));return"&"+t.join("&")}}/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */var qi=Object.prototype.toString,je=Array.isArray||function(i){return qi.call(i)==="[object Array]"};function sa(i){return typeof i=="function"}function Ui(i){return je(i)?"array":typeof i}function ia(i){return i.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function ss(i,e){return i!=null&&typeof i=="object"&&e in i}function Hi(i,e){return i!=null&&typeof i!="object"&&i.hasOwnProperty&&i.hasOwnProperty(e)}var Wi=RegExp.prototype.test;function Yi(i,e){return Wi.call(i,e)}var Ji=/\S/;function Gi(i){return!Yi(Ji,i)}var Zi={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};function Ki(i){return String(i).replace(/[&<>"'`=\/]/g,function(e){return Zi[e]})}var Xi=/\s*/,er=/\s+/,is=/\s*=/,tr=/\s*\}/,ar=/#|\^|\/|>|\{|&|=|!/;function sr(i,e){if(!i)return[];var t=!1,s=[],a=[],r=[],o=!1,n=!1,c="",h=0;function d(){if(o&&!n)for(;r.length;)delete a[r.pop()];else r=[];o=!1,n=!1}var g,p,L;function w(X){if(typeof X=="string"&&(X=X.split(er,2)),!je(X)||X.length!==2)throw new Error("Invalid tags: "+X);g=new RegExp(ia(X[0])+"\\s*"),p=new RegExp("\\s*"+ia(X[1])),L=new RegExp("\\s*"+ia("}"+X[1]))}w(e||T.tags);for(var m=new at(i),y,b,A,R,S,E;!m.eos();){if(y=m.pos,A=m.scanUntil(g),A)for(var H=0,ae=A.length;H<ae;++H)R=A.charAt(H),Gi(R)?(r.push(a.length),c+=R):(n=!0,t=!0,c+=" "),a.push(["text",R,y,y+1]),y+=1,R===`
`&&(d(),c="",h=0,t=!1);if(!m.scan(g))break;if(o=!0,b=m.scan(ar)||"name",m.scan(Xi),b==="="?(A=m.scanUntil(is),m.scan(is),m.scanUntil(p)):b==="{"?(A=m.scanUntil(L),m.scan(tr),m.scanUntil(p),b="&"):A=m.scanUntil(p),!m.scan(p))throw new Error("Unclosed tag at "+m.pos);if(b==">"?S=[b,A,y,m.pos,c,h,t]:S=[b,A,y,m.pos],h++,a.push(S),b==="#"||b==="^")s.push(S);else if(b==="/"){if(E=s.pop(),!E)throw new Error('Unopened section "'+A+'" at '+y);if(E[1]!==A)throw new Error('Unclosed section "'+E[1]+'" at '+y)}else b==="name"||b==="{"||b==="&"?n=!0:b==="="&&w(A)}if(d(),E=s.pop(),E)throw new Error('Unclosed section "'+E[1]+'" at '+m.pos);return rr(ir(a))}function ir(i){for(var e=[],t,s,a=0,r=i.length;a<r;++a)t=i[a],t&&(t[0]==="text"&&s&&s[0]==="text"?(s[1]+=t[1],s[3]=t[3]):(e.push(t),s=t));return e}function rr(i){for(var e=[],t=e,s=[],a,r,o=0,n=i.length;o<n;++o)switch(a=i[o],a[0]){case"#":case"^":t.push(a),s.push(a),t=a[4]=[];break;case"/":r=s.pop(),r[5]=a[2],t=s.length>0?s[s.length-1][4]:e;break;default:t.push(a)}return e}function at(i){this.string=i,this.tail=i,this.pos=0}at.prototype.eos=function(){return this.tail===""},at.prototype.scan=function(i){var e=this.tail.match(i);if(!e||e.index!==0)return"";var t=e[0];return this.tail=this.tail.substring(t.length),this.pos+=t.length,t},at.prototype.scanUntil=function(i){var e=this.tail.search(i),t;switch(e){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,e),this.tail=this.tail.substring(e)}return this.pos+=t.length,t};function Re(i,e){this.view=i,this.cache={".":this.view},this.parent=e}Re.prototype.push=function(i){return new Re(i,this)},Re.prototype.lookup=function(i){var e=this.cache,t;if(e.hasOwnProperty(i))t=e[i];else{for(var s=this,a,r,o,n=!1;s;){if(i.indexOf(".")>0)for(a=s.view,r=i.split("."),o=0;a!=null&&o<r.length;)o===r.length-1&&(n=ss(a,r[o])||Hi(a,r[o])),a=a[r[o++]];else a=s.view[i],n=ss(s.view,i);if(n){t=a;break}s=s.parent}e[i]=t}return sa(t)&&(t=t.call(this.view)),t};function K(){this.templateCache={_cache:{},set:function(i,e){this._cache[i]=e},get:function(i){return this._cache[i]},clear:function(){this._cache={}}}}K.prototype.clearCache=function(){typeof this.templateCache<"u"&&this.templateCache.clear()},K.prototype.parse=function(i,e){var t=this.templateCache,s=i+":"+(e||T.tags).join(":"),a=typeof t<"u",r=a?t.get(s):void 0;return r==null&&(r=sr(i,e),a&&t.set(s,r)),r},K.prototype.render=function(i,e,t,s){var a=this.getConfigTags(s),r=this.parse(i,a),o=e instanceof Re?e:new Re(e,void 0);return this.renderTokens(r,o,t,i,s)},K.prototype.renderTokens=function(i,e,t,s,a){for(var r="",o,n,c,h=0,d=i.length;h<d;++h)c=void 0,o=i[h],n=o[0],n==="#"?c=this.renderSection(o,e,t,s,a):n==="^"?c=this.renderInverted(o,e,t,s,a):n===">"?c=this.renderPartial(o,e,t,a):n==="&"?c=this.unescapedValue(o,e):n==="name"?c=this.escapedValue(o,e,a):n==="text"&&(c=this.rawValue(o)),c!==void 0&&(r+=c);return r},K.prototype.renderSection=function(i,e,t,s,a){var r=this,o="",n=e.lookup(i[1]);function c(g){return r.render(g,e,t,a)}if(n){if(je(n))for(var h=0,d=n.length;h<d;++h)o+=this.renderTokens(i[4],e.push(n[h]),t,s,a);else if(typeof n=="object"||typeof n=="string"||typeof n=="number")o+=this.renderTokens(i[4],e.push(n),t,s,a);else if(sa(n)){if(typeof s!="string")throw new Error("Cannot use higher-order sections without the original template");n=n.call(e.view,s.slice(i[3],i[5]),c),n!=null&&(o+=n)}else o+=this.renderTokens(i[4],e,t,s,a);return o}},K.prototype.renderInverted=function(i,e,t,s,a){var r=e.lookup(i[1]);if(!r||je(r)&&r.length===0)return this.renderTokens(i[4],e,t,s,a)},K.prototype.indentPartial=function(i,e,t){for(var s=e.replace(/[^ \t]/g,""),a=i.split(`
`),r=0;r<a.length;r++)a[r].length&&(r>0||!t)&&(a[r]=s+a[r]);return a.join(`
`)},K.prototype.renderPartial=function(i,e,t,s){if(t){var a=this.getConfigTags(s),r=sa(t)?t(i[1]):t[i[1]];if(r!=null){var o=i[6],n=i[5],c=i[4],h=r;n==0&&c&&(h=this.indentPartial(r,c,o));var d=this.parse(h,a);return this.renderTokens(d,e,t,h,s)}}},K.prototype.unescapedValue=function(i,e){var t=e.lookup(i[1]);if(t!=null)return t},K.prototype.escapedValue=function(i,e,t){var s=this.getConfigEscape(t)||T.escape,a=e.lookup(i[1]);if(a!=null)return typeof a=="number"&&s===T.escape?String(a):s(a)},K.prototype.rawValue=function(i){return i[1]},K.prototype.getConfigTags=function(i){return je(i)?i:i&&typeof i=="object"?i.tags:void 0},K.prototype.getConfigEscape=function(i){if(i&&typeof i=="object"&&!je(i))return i.escape};var T={name:"mustache.js",version:"4.2.0",tags:["{{","}}"],clearCache:void 0,escape:void 0,parse:void 0,render:void 0,Scanner:void 0,Context:void 0,Writer:void 0,set templateCache(i){st.templateCache=i},get templateCache(){return st.templateCache}},st=new K;T.clearCache=function(){return st.clearCache()},T.parse=function(i,e){return st.parse(i,e)},T.render=function(i,e,t,s){if(typeof i!="string")throw new TypeError('Invalid template! Template should be a "string" but "'+Ui(i)+'" was given as the first argument for mustache#render(template, view, partials)');return st.render(i,e,t,s)},T.escape=Ki,T.Scanner=at,T.Context=Re,T.Writer=K;const nr={main:{template:`
        {{#shouldShowAnswer}}
        <div class="searchstax-answer-wrap">
            <div class="searchstax-answer-icon"></div>
            <div>
                <div class="searchstax-answer-container {{#showMoreButtonVisible}}searchstax-answer-show-more{{/showMoreButtonVisible}}">
                    <div class="searchstax-answer-title">Smart Answers</div>
                    {{#shouldShowAnswerError}}
                        <div class="searchstax-answer-error">{{{answerErrorMessage}}}</div>
                    {{/shouldShowAnswerError}}
                    <div class="searchstax-answer-description">
                        {{{fullAnswerFormatted}}}
                        {{^showMoreButtonVisible}}
                            {{#answerLoading}}
                                <div class="searchstax-answer-loading"></div>
                            {{/answerLoading}}
                        {{/showMoreButtonVisible}}
                    </div>

                </div>

                {{#showMoreButtonVisible}}
                    <div class="searchstax-answer-load-more-button-container">
                        {{#answerLoading}}
                            <div class="searchstax-answer-loading"></div>
                        {{/answerLoading}}
                        <button class="searchstax-answer-load-more-button">Read More</button>
                    </div>
                {{/showMoreButtonVisible}}
            </div>
            <div class="searchstax-answer-footer">
                <div id="feedbackWidgetContainer"></div>
                <div class="searchstax-lightweight-widget-separator-inline"></div>
                <p class="searchstax-disclaimer">Generative AI is Experimental</p>
            </div>
            </div>
        {{/shouldShowAnswer}}
        `}},or={mainTemplate:{template:`
        {{#hasExternalPromotions}}
            <div class="searchstax-external-promotions-container" id="searchstax-external-promotions-container" data-test-id="searchstax-external-promotions-container">
                 External promotions go here
            </div>
        {{/hasExternalPromotions}}
    `,externalPromotionsContainerId:"searchstax-external-promotions-container"},externalPromotion:{template:`
        <div class="searchstax-external-promotion searchstax-search-result" data-test-id="searchstax-external-promotion">
            <div class="icon-elevated"></div>
            {{#url}}
            <a href="{{url}}" data-searchstax-unique-result-id="{{uniqueId}}" class="searchstax-result-item-link" data-test-id="searchstax-result-item-link"></a>
            {{/url}}
            <div class="searchstax-search-result-title-container">
                <span class="searchstax-search-result-title" data-test-id="searchstax-search-result-title">{{name}}</span>
            </div>
            {{#description}}
            <p class="searchstax-search-result-description searchstax-search-result-common" data-test-id="searchstax-search-result-description">
            {{description}}
            </p>
            {{/description}}
            {{#url}}
            <p class="searchstax-search-result-description searchstax-search-result-common">
            {{url}}
            </p>
            {{/url}}
        </div>
        `}},lr={mainTemplateDesktop:{template:`
      {{#hasResultsOrExternalPromotions}}
        <div class="searchstax-facets-container-desktop"></div>
      {{/hasResultsOrExternalPromotions}}
      `,facetsContainerClass:"searchstax-facets-container-desktop",selectedFacetsContainerClass:"searchstax-facets-pills-selected"},mainTemplateMobile:{template:`
        <div class="searchstax-facets-pills-container">
          <div class="searchstax-facets-pills-selected">
          </div>
        </div>

        <div class="searchstax-facets-mobile-overlay {{#overlayOpened}} searchstax-show{{/overlayOpened}}" data-test-id="searchstax-facets-mobile-overlay">
          <div class="searchstax-facets-mobile-overlay-header">
            <div class="searchstax-facets-mobile-overlay-header-title">Filter By</div>
            <div class="searchstax-search-close" tabindex="0" aria-label="close overlay" role="button" data-test-id="searchstax-search-close"></div>
          </div>
          <div class="searchstax-facets-container-mobile"></div>
          <button class="searchstax-facets-mobile-overlay-done" data-test-id="searchstax-facets-mobile-overlay-done">Done</button>
        </div>
      `,facetsContainerClass:"searchstax-facets-container-mobile",closeOverlayTriggerClasses:["searchstax-facets-mobile-overlay-done","searchstax-search-close"],filterByContainerClass:"searchstax-facets-pills-container",selectedFacetsContainerClass:"searchstax-facets-pills-selected"},showMoreButtonContainerTemplate:{template:`
      <div class="searchstax-facet-show-more-container" data-test-id="searchstax-facet-show-more-container">
      {{#showingAllFacets}}
        <div class="searchstax-facet-show-less-button searchstax-facet-show-button" tabindex="0" data-test-id="searchstax-facet-show-less-button">less</div>
      {{/showingAllFacets}}
      {{^showingAllFacets}}
        <div class="searchstax-facet-show-more-button  searchstax-facet-show-button" tabindex="0" data-test-id="searchstax-facet-show-more-button">more {{onShowMoreLessClick}}</div>
      {{/showingAllFacets}}
    </div>
      `,showMoreButtonClass:"searchstax-facet-show-more-container"},facetItemContainerTemplate:{template:`
      <div>
        <div class="searchstax-facet-title-container" data-test-id="searchstax-facet-title-container">
            <div class="searchstax-facet-title" aria-label="Facet group: {{label}}" tabindex="0">
            {{label}}
            </div>
            <div class="searchstax-facet-title-arrow active"></div>
        </div>
        <div class="searchstax-facet-values-container"></div>
      </div>
      `,facetListTitleContainerClass:"searchstax-facet-title-container",facetListContainerClass:"searchstax-facet-values-container"},clearFacetsTemplate:{template:`
      {{#shouldShow}}
        <div class="searchstax-facets-pill searchstax-clear-filters searchstax-facets-pill-clear-all" tabindex="0" role="button" data-test-id="searchstax-facets-pill-clear-all">
        <div class="searchstax-facets-pill-label">Clear Filters</div>
        </div>
      {{/shouldShow}}
      `,containerClass:"searchstax-facets-pill-clear-all"},facetItemTemplate:{template:`
      <div class="searchstax-facet-input">
        <input type="checkbox" class="searchstax-facet-input-checkbox" data-test-id="searchstax-facet-input-checkbox" {{#disabled}}disabled{{/disabled}} {{#isChecked}}checked{{/isChecked}} aria-label="{{value}} {{count}}" tabindex="0"/>
      </div>
      <div class="searchstax-facet-value-label" data-test-id="searchstax-facet-value-label">{{value}}</div>
      <div class="searchstax-facet-value-count" data-test-id="searchstax-facet-value-count">({{count}})</div>
      `,inputCheckboxClass:"searchstax-facet-input-checkbox",checkTriggerClasses:["searchstax-facet-value-label","searchstax-facet-value-count"]},filterByTemplate:{template:`
      <div class="searchstax-facets-pill searchstax-facets-pill-filter-by" tabindex="0" role="button" data-test-id="searchstax-facets-pill-filter-by" >
        <div class="searchstax-facets-pill-label">Filter By</div>
      </div>
      `,containerClass:"searchstax-facets-pill-filter-by"},selectedFacetsTemplate:{template:`
      <div class="searchstax-facets-pill searchstax-facets-pill-facets" tabindex="0" role="button" data-test-id="searchstax-facets-pill-facets">
        <div class="searchstax-facets-pill-label">{{value}} ({{count}})</div>
        <div class="searchstax-facets-pill-icon-close"></div>
      </div>
      `,containerClass:"searchstax-facets-pill-facets"}},cr={mainTemplate:{template:`
      {{#results.length}}
        <div class="searchstax-pagination-container" data-test-id="searchstax-pagination-container">
          <div class="searchstax-pagination-content">
            <a class="searchstax-pagination-previous {{#isFirstPage}}disabled{{/isFirstPage}}" id="searchstax-pagination-previous" data-test-id="searchstax-pagination-previous" tabindex="0" aria-label="Previous Page">< Previous</a>
            <div class="searchstax-pagination-details" data-test-id="searchstax-pagination-details">
              {{startResultIndex}} - {{endResultIndex}} of {{totalResults}}
            </div>
              <a class="searchstax-pagination-next {{#isLastPage}}disabled{{/isLastPage}}" data-test-id="searchstax-pagination-next" id="searchstax-pagination-next" tabindex="0" aria-label="Next Page">Next ></a>
          </div>
        </div>
      {{/results.length}}
      `,nextButtonClass:"searchstax-pagination-next",previousButtonClass:"searchstax-pagination-previous"},infiniteScrollTemplate:{template:`
      {{#results.length}}
        {{^isLastPage}}
          <a class="searchstax-pagination-load-more" data-test-id="searchstax-pagination-load-more" tabindex="0">Show More</a>
        {{/isLastPage}}
      {{/results.length}}
      `,loadMoreButtonClass:"searchstax-pagination-load-more"}},hr={main:{template:`
        {{#hasRelatedSearches}}
            <div class="searchstax-related-searches-container" data-test-id="searchstax-related-searches-container" id="searchstax-related-searches-container">
                Related searches: <span id="searchstax-related-searches"></span>
                {{#relatedSearches}}
                <span class="searchstax-related-search">

                </span>
            {{/relatedSearches}}
            </div>
        {{/hasRelatedSearches}}
        `,relatedSearchesContainerClass:"searchstax-related-search"},relatedSearch:{template:`
        <span class="searchstax-related-search searchstax-related-search-item" data-test-id="searchstax-related-search-item" aria-label="Related search: {{related_search}}" tabindex="0">
            {{ related_search }}{{^last}}<span>,</span>{{/last}}
        </span>
        `,relatedSearchContainerClass:"searchstax-related-search-item"}},ur={main:{template:`
        {{#searchExecuted}}
            <a href="#searchstax-search-results" data-test-id="searchstax-skip" class="searchstax-skip">Skip to results section</a>
            <h4 class="searchstax-feedback-container" data-test-id="searchstax-feedback-container">
              {{#hasResults}}
                 <span> Showing <b>{{startResultIndex}} - {{endResultIndex}}</b> </span> of <b>{{totalResults}}</b> results {{#searchTerm}} for "<b>{{searchTerm}}</b>" {{/searchTerm}}
                  <div class="searchstax-feedback-container-suggested" data-test-id="searchstax-feedback-container-suggested">
                    {{#autoCorrectedQuery}}
                      Search instead for <a href="#" aria-label="Search instead for: {{originalQuery}}" class="searchstax-feedback-original-query" data-test-id="searchstax-feedback-original-query">{{originalQuery}}</a>
                    {{/autoCorrectedQuery}}
                  </div>
                {{/hasResults}}
            </h4>
        {{/searchExecuted}}
        `,originalQueryClass:"searchstax-feedback-original-query"}},dr={mainTemplate:{template:`
        <div class="searchstax-search-input-container searchstax-search-input-container-new {{#locationEnabled}}searchstax-alternative-render{{/locationEnabled}}">
          <div class="searchstax-search-input-wrapper">
            <input type="text" id="searchstax-search-input" class="searchstax-search-input" placeholder="SEARCH FOR..." aria-label="Search" />
          </div>
          <div id="searchstax-location-container" class="searchstax-location-container"></div>
          <button class="searchstax-spinner-icon" id="searchstax-search-input-action-button" aria-label="search" role="button"></button>
        </div>
        `,searchInputId:"searchstax-search-input"},autosuggestItemTemplate:{template:`
        <div class="searchstax-autosuggest-item-term-container">{{{term}}}</div>
        `}},pr={mainTemplate:{template:`
        <div class="searchstax-location-input-container" data-test-id="searchstax-location-input-container">
            <div class="searchstax-location-input-wrapper">
                <span class="searchstax-location-input-label">NEAR</span>
               <div class="searchstax-location-input-wrapper-inner">
                  <input type="text" id="searchstax-location-input" class="searchstax-location-input" placeholder="Zip, Postal Code or City..." aria-label="Search Location Input" data-test-id="searchstax-location-input" />
                  <button id="searchstax-location-get-current-location" class="searchstax-get-current-location-button">Use my current location</button>
                </div>
                {{#shouldShowLocationDistanceDropdown}}
                  <span class="searchstax-location-input-label">WITHIN</span>
                  <select id="searchstax-location-radius-select" class="searchstax-location-radius-select" aria-label="Search Location Radius Select" data-test-id="searchstax-location-radius-select">
                    {{#locationSearchDistanceValues}}
                      <option value="{{value}}" {{#isSelected}}selected{{/isSelected}}>{{label}}</option>
                    {{/locationSearchDistanceValues}}
                  </select>
                {{/shouldShowLocationDistanceDropdown}}
            </div>
        </div>
        `,locationInputId:"searchstax-location-input",radiusInputId:"searchstax-location-radius-select",currentLocationActionButtonId:"searchstax-location-get-current-location"}},gr={mainTemplate:{template:`
        <section aria-label="search results container" tabindex="0">
            <div class="searchstax-search-results-container" id="searchstax-search-results-container" data-test-id="searchstax-search-results-container">
                <div class="searchstax-search-results" id="searchstax-search-results"></div>
            </div>
        </section>
            `,searchResultsContainerId:"searchstax-search-results",searchResultsAccessibilityId:"searchstax-search-results-accessibility-announcement"},searchResultTemplate:{template:`
    <a href="{{url}}" data-searchstax-unique-result-id="{{uniqueId}}" data-test-id="searchstax-result-item-link" class="searchstax-result-item-link searchstax-result-item-link-wrapping" tabindex="0">
    <div class="searchstax-search-result searchstax-search-result-wrapping {{#thumbnail}} has-thumbnail {{/thumbnail}}">
        {{#promoted}}
            <div class="searchstax-search-result-promoted" data-test-id="searchstax-search-result-promoted"></div>
        {{/promoted}}

        {{#ribbon}}
            <div class="searchstax-search-result-ribbon" data-test-id="searchstax-search-result-ribbon">
            {{{ribbon}}}
            </div>
        {{/ribbon}}

        {{#thumbnail}}
            <img alt="" src="{{thumbnail}}" alt="image" class="searchstax-thumbnail" data-test-id="searchstax-thumbnail">
        {{/thumbnail}}
        <div class="searchstax-search-result-title-container" data-test-id="searchstax-search-result-title-container">
            <h3 class="searchstax-search-result-title">{{{title}}}</h3>
        </div>

        {{#paths}}
            <p class="searchstax-search-result-common" data-test-id="searchstax-search-result-common">
                {{{paths}}}
            </p>
        {{/paths}}

        {{#description}}
            <p class="searchstax-search-result-description searchstax-search-result-common" data-test-id="searchstax-search-result-description">
                {{{description}}}
            </p>
        {{/description}}

        {{#unmappedFields}}
            {{#isImage}}
                <div class="searchstax-search-result-image-container">
                <img alt="" src="{{value}}" alt="image" class="searchstax-result-image" data-test-id="searchstax-result-image">
                </div>
            {{/isImage}}
            {{^isImage}}
                <p class="searchstax-search-result-common">
                {{{value}}}
                </p>
            {{/isImage}}
        {{/unmappedFields}}
        {{#distance}}
            <p class="searchstax-search-result-distance searchstax-search-result-common" data-test-id="searchstax-search-result-distance">
                {{distance}} {{unit}}
            </p>
        {{/distance}}
        </div>
        </a>
            `,searchResultUniqueIdAttribute:"data-searchstax-unique-result-id"},noSearchResultTemplate:{template:`
    {{#searchExecuted}}
    <div class="searchstax-no-results-wrap" data-test-id="searchstax-no-results-wrap">
      <div class="searchstax-no-results" data-test-id="searchstax-no-results">
          Showing <strong>no results</strong> for <strong>"{{ searchTerm }}"</strong>
          <br>
          {{#spellingSuggestion}}
              <span>&nbsp;Did you mean <a href="#" aria-label="Did you mean: {{originalQuery}}" class="searchstax-suggestion-term" onclick="searchCallback('{{ spellingSuggestion }}')">{{ spellingSuggestion }}</a>?</span>
          {{/spellingSuggestion}}
      </div>
      <ul class="searchstax-no-results-list" data-test-id="searchstax-no-results-list">
          <li>Try searching for search related terms or topics. We offer a wide variety of content to help you get the information you need.</li>
          <li>Lost? Click on the ‘X” in the Search Box to reset your search.</li>
      </ul>
    </div>
  {{/searchExecuted}}
            `}},mr={main:{template:`
      {{#searchExecuted}}
        {{#hasResultsOrExternalPromotions}}
        <div class="searchstax-sorting-container" data-test-id="searchstax-sorting-container">
            <label class="searchstax-sorting-label" data-test-id="searchstax-sorting-label" for="searchstax-search-order-select">Sort By</label>
            <select id="searchstax-search-order-select" class="searchstax-search-order-select" data-test-id="searchstax-search-order-select" >
            {{#sortOptions}}
                <option value="{{key}}">
                {{value}}
                </option>
            {{/sortOptions}}
            </select>
        </div>
        {{/hasResultsOrExternalPromotions}}
      {{/searchExecuted}}
      `,selectId:"searchstax-search-order-select"}},te={mainTemplate:{template:`
    <div class="sf-widget-container">
    <div id="sf-widget" class="sf-main">
    <a href="#" id="searchstax-open-feedback" class="sf-open-feedback" tabindex="0" aria-label="Open Search Feedback">[ - ] Search Feedback</a>
    <div class="sf-modal-content {{#feedbackOpen}}sf-open{{/feedbackOpen}}{{^feedbackOpen}}sf-close{{/feedbackOpen}}">
      <div class="sf-modal-header">
        <h2 class="sf-title">Search Feedback</h2>
        <button class="sf-modal-close" aria-label="Close Search Feedback">
          <span>
            <img alt="" src="data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIGlkPSJDYXBhXzEiIGVuYWJsZS1iYWNrZ3JvdW5kPSJuZXcgMCAwIDM4Ni42NjcgMzg2LjY2NyIgaGVpZ2h0PSI1MTIiIHZpZXdCb3g9IjAgMCAzODYuNjY3IDM4Ni42NjciIHdpZHRoPSI1MTIiIGNsYXNzPSIiPjxnPjxwYXRoIGQ9Im0zODYuNjY3IDQ1LjU2NC00NS41NjQtNDUuNTY0LTE0Ny43NyAxNDcuNzY5LTE0Ny43NjktMTQ3Ljc2OS00NS41NjQgNDUuNTY0IDE0Ny43NjkgMTQ3Ljc2OS0xNDcuNzY5IDE0Ny43NyA0NS41NjQgNDUuNTY0IDE0Ny43NjktMTQ3Ljc2OSAxNDcuNzY5IDE0Ny43NjkgNDUuNTY0LTQ1LjU2NC0xNDcuNzY4LTE0Ny43N3oiIGRhdGEtb3JpZ2luYWw9IiMwMDAwMDAiIGNsYXNzPSJhY3RpdmUtcGF0aCIgc3R5bGU9ImZpbGw6I2Q2MzIwMiIgZGF0YS1vbGRfY29sb3I9IiMwMDAwMDAiPjwvcGF0aD48L2c+IDwvc3ZnPg==" />
          </span>
        </button>
      </div>
      <form id="sf-rating-form">
        <div class="sf-modal-body">
          <div class="form-group">
            <fieldset class="form-group">
              <legend>How would you rate your search experience?</legend>
              <div class="sf-rate-experience">
                {{#ratings}}
                <div class="sf-custom-control">
                  <input type="radio" id="sf-rate-{{index}}" tabindex="0" name="sf-rating" class="sf-custom-control-input" value="{{index}}" {{#isSelected}}checked{{/isSelected}}>
                  <label for="sf-rate-{{index}}" class="sf-custom-control-label">{{index}}</label>
                </div>
                {{/ratings}}
              </div>
            </fieldset>
            <div class="sf-rate">
              <p><small>0 = Very Dissatisfied</small></p>
              <p><small>10 = Very Satisfied</small></p>
            </div>
            <div class="sf-error-rating alert alert-danger {{#errors.rating}}sf-show{{/errors.rating}}{{^errors.rating}}sf-hide{{/errors.rating}}">
              Please Rate your experience.
            </div>
          </div>
          <div class="sf-comments sf-form-group">
            <label for="sf-comments">Comments <small> (<span class="searchstax-characters-remaining-container">2000</span> characters remaining)</small></label>
            <textarea maxlength="{{maxLength}}" class="sf-form-control" id="sf-comments" placeholder="Enter any comments relating to your search experience">{{feedbackTextArea}}</textarea>
          </div>
          <div class="sf-email sf-form-group">
            <label for="sf-email">Email</label>
            <input class="sf-form-control" type="email" id="sf-email" placeholder="Enter an email address if you want a response" value="{{emailInput}}">
            <div class="sf-error-email alert alert-danger {{#errors.email}}sf-show{{/errors.email}}{{^errors.email}}sf-hide{{/errors.email}}">
              Please enter a valid email id
            </div>
          </div>
        </div>
        <div class="sf-modal-footer">
          <a href="http://searchstax.com/" target="_blank" class="left">
            <img alt="Searchstax logo" src="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0idXRmLTgiPz4KPCEtLSBHZW5lcmF0b3I6IEFkb2JlIElsbHVzdHJhdG9yIDI0LjIuMCwgU1ZHIEV4cG9ydCBQbHVnLUluIC4gU1ZHIFZlcnNpb246IDYuMDAgQnVpbGQgMCkgIC0tPgo8c3ZnIHZlcnNpb249IjEuMSIgaWQ9IkxheWVyXzEiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiIHg9IjBweCIgeT0iMHB4IgoJIHZpZXdCb3g9IjAgMCAxMzEuNSAzOS44IiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3IDAgMCAxMzEuNSAzOS44OyIgeG1sOnNwYWNlPSJwcmVzZXJ2ZSI+CjxzdHlsZSB0eXBlPSJ0ZXh0L2NzcyI+Cgkuc3Qwe2ZpbGw6I2Q2MzIwMjt9Cgkuc3Qxe2ZpbGw6IzMzNDc1QTt9Cgkuc3Qye2VuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7fQo8L3N0eWxlPgo8Zz4KCTxnIGlkPSJsb2dvX3g1Rl9jb2xvcl8xXyI+CgkJPGc+CgkJCTxnPgoJCQkJPGcgaWQ9IlhNTElEXzhfIj4KCQkJCQk8cGF0aCBjbGFzcz0ic3QwIiBkPSJNMC4zLDMxLjhMMS44LDMxYzAuMS0wLjEsMC4zLTAuMSwwLjUsMGw3LjQsNC4yYzAuMSwwLjEsMC4zLDAuMSwwLjUsMGw3LjMtNC4yYzAuMi0wLjEsMC4zLTAuMSwwLjUsMAoJCQkJCQlsMS40LDAuOWMwLjMsMC4yLDAuMywwLjYsMCwwLjhsLTkuMiw1LjRjLTAuMSwwLjEtMC4zLDAuMS0wLjUsMGwtOS40LTUuNEMwLDMyLjUsMCwzMiwwLjMsMzEuOHoiLz4KCQkJCTwvZz4KCQkJCTxnIGlkPSJYTUxJRF83XyI+CgkJCQkJPHBhdGggY2xhc3M9InN0MCIgZD0iTTAuMywyNi41bDEuNi0wLjljMC4xLTAuMSwwLjMtMC4xLDAuNSwwbDcuMiw0LjJjMC4xLDAuMSwwLjMsMC4xLDAuNSwwbDcuMy00LjJjMC4xLTAuMSwwLjItMC4yLDAuMi0wLjQKCQkJCQkJVjI0YzAtMC40LTAuNC0wLjYtMC43LTAuNGwtNi43LDMuOWMtMC4xLDAuMS0wLjMsMC4xLTAuNSwwTDAuMiwyMmMtMC4zLTAuMi0wLjMtMC42LDAtMC44bDkuMy01LjVjMC4xLTAuMSwwLjMtMC4xLDAuNSwwCgkJCQkJCWw1LjMsM2MwLjMsMC4yLDAuMywwLjYsMCwwLjhsLTEuNCwwLjljLTAuMiwwLjEtMC4zLDAuMS0wLjUsMGwtMy40LTJjLTAuMi0wLjEtMC4zLTAuMS0wLjUsMGwtNC40LDIuN2MtMC4zLDAuMi0wLjMsMC42LDAsMC44CgkJCQkJCWw0LjQsMi42YzAuMSwwLjEsMC4zLDAuMSwwLjUsMGw3LjMtNC4yYzAuMS0wLjEsMC4zLTAuMSwwLjUsMGwyLDEuMWMwLjIsMC4xLDAuMiwwLjIsMC4yLDAuNHY0LjdjMCwwLjItMC4xLDAuMy0wLjIsMC40CgkJCQkJCWwtOS42LDUuN2MtMC4xLDAuMS0wLjMsMC4xLTAuNSwwbC05LjQtNS41Qy0wLjEsMjcuMi0wLjEsMjYuNywwLjMsMjYuNXoiLz4KCQkJCTwvZz4KCQkJPC9nPgoJCQk8ZyBpZD0iRElOX3g1Rl9OZXh0X3g1Rl9MVF94NUZfUHJvX3g1Rl9MaWdodF94MEFfXzFfIj4KCQkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yNC45LDMxLjNjLTAuMS0wLjEtMC4xLTAuMiwwLTAuMmwwLjQtMC41YzAuMS0wLjEsMC4yLTAuMSwwLjIsMGMwLjcsMC42LDEuOSwxLjEsMy4yLDEuMQoJCQkJCWMxLjgsMCwyLjgtMC45LDIuOC0yLjJjMC0xLjEtMC42LTEuOS0yLjYtMi4xbC0wLjUtMC4xYy0yLjEtMC4zLTMuMi0xLjMtMy4yLTIuOWMwLTEuOSwxLjQtMy4xLDMuNS0zLjFjMS4yLDAsMi40LDAuNCwzLjEsMC45CgkJCQkJYzAuMSwwLDAuMSwwLjEsMCwwLjJsLTAuMywwLjVjLTAuMSwwLjEtMC4xLDAuMS0wLjIsMGMtMC45LTAuNS0xLjctMC44LTIuNy0wLjhjLTEuNiwwLTIuNSwwLjktMi41LDIuMWMwLDEuMSwwLjcsMS44LDIuNiwyLjEKCQkJCQlsMC41LDAuMWMyLjIsMC4zLDMuMiwxLjMsMy4yLDNjMCwxLjktMS4zLDMuMi0zLjksMy4yQzI3LjEsMzIuNiwyNS43LDMyLDI0LjksMzEuM3oiLz4KCQkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0zNi42LDIxLjZjMC0wLjEsMC4xLTAuMiwwLjItMC4yaDYuM2MwLjEsMCwwLjIsMC4xLDAuMiwwLjJ2MC42YzAsMC4xLTAuMSwwLjItMC4yLDAuMmgtNQoJCQkJCWMtMC4zLDAtMC42LDAuMy0wLjYsMC42djNjMCwwLjMsMC4zLDAuNiwwLjYsMC42aDQuMmMwLjEsMCwwLjIsMC4xLDAuMiwwLjJ2MC42YzAsMC4xLTAuMSwwLjItMC4yLDAuMmgtNC4yCgkJCQkJYy0wLjMsMC0wLjYsMC4zLTAuNiwwLjZWMzFjMCwwLjMsMC4zLDAuNiwwLjYsMC42aDVjMC4xLDAsMC4yLDAuMSwwLjIsMC4ydjAuNmMwLDAuMS0wLjEsMC4yLTAuMiwwLjJoLTYuMwoJCQkJCWMtMC4xLDAtMC4yLTAuMS0wLjItMC4yVjIxLjZ6Ii8+CgkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNTAuMSwyMS42YzAtMC4xLDAuMS0wLjIsMC4yLTAuMmgwLjZjMC4xLDAsMC4yLDAuMSwwLjIsMC4ybDMuOCwxMC43YzAsMC4xLDAsMC4yLTAuMSwwLjJoLTAuNwoJCQkJCWMtMC4xLDAtMC4yLDAtMC4yLTAuMkw1MywyOS45Yy0wLjEtMC4yLTAuMi0wLjMtMC40LTAuM2gtNC4xYy0wLjIsMC0wLjQsMC4xLTAuNCwwLjNsLTAuOSwyLjRjMCwwLjEtMC4xLDAuMi0wLjIsMC4yaC0wLjYKCQkJCQljLTAuMSwwLTAuMS0wLjEtMC4xLTAuMkw1MC4xLDIxLjZ6IE01MS45LDI4LjdjMC4zLDAsMC42LTAuMywwLjQtMC42TDUwLjUsMjNsMCwwbC0xLjgsNWMtMC4xLDAuMywwLjEsMC42LDAuNCwwLjZoMi44VjI4Ljd6IgoJCQkJCS8+CgkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNNjUsMzIuNGMtMC4xLDAtMC4xLDAtMC4yLTAuMWwtMi4zLTQuOGgtMC4ySDYwYy0wLjMsMC0wLjYsMC4zLTAuNiwwLjZ2NC4yYzAsMC4xLTAuMSwwLjItMC4yLDAuMmgtMC42CgkJCQkJYy0wLjEsMC0wLjItMC4xLTAuMi0wLjJWMjEuNmMwLTAuMSwwLjEtMC4yLDAuMi0wLjJoMy43YzIuMSwwLDMuNCwxLjIsMy40LDNjMCwxLjMtMC42LDIuMy0xLjgsMi44Yy0wLjMsMC4xLTAuNCwwLjQtMC4yLDAuNgoJCQkJCWwyLjEsNC40YzAuMSwwLjEsMCwwLjItMC4xLDAuMkg2NUw2NSwzMi40eiBNNjQuOCwyNC41YzAtMS40LTAuOS0yLjItMi40LTIuMkg2MGMtMC4zLDAtMC42LDAuMy0wLjYsMC42djMuMgoJCQkJCWMwLDAuMywwLjMsMC42LDAuNiwwLjZoMi4zQzYzLjksMjYuNiw2NC44LDI1LjksNjQuOCwyNC41eiIvPgoJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTY5LjYsMjYuOWMwLTAuOCwwLTEuNSwwLjEtMS45YzAuMi0yLjMsMi4zLTQuMSw0LjYtMy42YzEuMSwwLjIsMS45LDAuOSwyLjQsMS45YzAsMC4xLDAsMC4yLDAsMC4yCgkJCQkJbC0wLjUsMC4zYy0wLjEsMC0wLjIsMC0wLjItMC4xYy0wLjUtMC45LTEuMy0xLjYtMi41LTEuNmMtMS4zLDAtMi4yLDAuNi0yLjYsMS44Yy0wLjEsMC40LTAuMiwxLjEtMC4yLDNjMCwxLjgsMC4xLDIuNSwwLjIsMwoJCQkJCWMwLjQsMS4yLDEuMiwxLjgsMi42LDEuOGMxLjIsMCwyLTAuNiwyLjUtMS42YzAtMC4xLDAuMS0wLjEsMC4yLTAuMWwwLjUsMC4zYzAuMSwwLDAuMSwwLjEsMCwwLjJjLTAuNiwxLjMtMS44LDItMy4zLDIKCQkJCQljLTEuNywwLTIuOS0wLjgtMy41LTIuNUM2OS43LDI5LjYsNjkuNiwyOC44LDY5LjYsMjYuOXoiLz4KCQkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik04MC42LDIxLjZjMC0wLjEsMC4xLTAuMiwwLjItMC4yaDAuNmMwLjEsMCwwLjIsMC4xLDAuMiwwLjJ2NC4yYzAsMC4zLDAuMywwLjYsMC42LDAuNmg0LjUKCQkJCQljMC4zLDAsMC42LTAuMywwLjYtMC42di00LjJjMC0wLjEsMC4xLTAuMiwwLjItMC4yaDAuNmMwLjEsMCwwLjIsMC4xLDAuMiwwLjJ2MTAuN2MwLDAuMS0wLjEsMC4yLTAuMiwwLjJoLTAuNgoJCQkJCWMtMC4xLDAtMC4yLTAuMS0wLjItMC4ydi00LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC00LjVjLTAuMywwLTAuNiwwLjMtMC42LDAuNnY0LjRjMCwwLjEtMC4xLDAuMi0wLjIsMC4yaC0wLjYKCQkJCQljLTAuMSwwLTAuMi0wLjEtMC4yLTAuMlYyMS42TDgwLjYsMjEuNnoiLz4KCQkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik05Mi4zLDMxLjNjLTAuMS0wLjEtMC4xLTAuMiwwLTAuMmwwLjQtMC41YzAuMS0wLjEsMC4yLTAuMSwwLjIsMGMwLjcsMC42LDEuOSwxLjEsMy4yLDEuMQoJCQkJCWMxLjgsMCwyLjgtMC45LDIuOC0yLjJjMC0xLjEtMC42LTEuOS0yLjYtMi4xbC0wLjUtMC4xYy0yLjEtMC4zLTMuMi0xLjMtMy4yLTIuOWMwLTEuOSwxLjQtMy4xLDMuNS0zLjFjMS4yLDAsMi40LDAuNCwzLjEsMC45CgkJCQkJYzAuMSwwLDAuMSwwLjEsMCwwLjJsLTAuMywwLjVjLTAuMSwwLjEtMC4xLDAuMS0wLjIsMGMtMC45LTAuNS0xLjctMC44LTIuNy0wLjhjLTEuNiwwLTIuNSwwLjktMi41LDIuMWMwLDEuMSwwLjcsMS44LDIuNiwyLjEKCQkJCQlsMC41LDAuMWMyLjIsMC4zLDMuMiwxLjMsMy4yLDNjMCwxLjktMS4zLDMuMi0zLjksMy4yQzk0LjUsMzIuNiw5MywzMiw5Mi4zLDMxLjN6Ii8+CgkJCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMTA2LjIsMzIuNGMtMC4xLDAtMC4yLTAuMS0wLjItMC4ydi05LjRjMC0wLjMtMC4zLTAuNi0wLjYtMC42aC0yLjdjLTAuMSwwLTAuMi0wLjEtMC4yLTAuMnYtMC42CgkJCQkJYzAtMC4xLDAuMS0wLjIsMC4yLTAuMmg3LjRjMC4xLDAsMC4yLDAuMSwwLjIsMC4yVjIyYzAsMC4xLTAuMSwwLjItMC4yLDAuMmgtMi43Yy0wLjMsMC0wLjYsMC4zLTAuNiwwLjZ2OS40CgkJCQkJYzAsMC4xLTAuMSwwLjItMC4yLDAuMkgxMDYuMkwxMDYuMiwzMi40eiIvPgoJCQkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTExNS41LDIxLjZjMC0wLjEsMC4xLTAuMiwwLjItMC4yaDAuNmMwLjEsMCwwLjIsMC4xLDAuMiwwLjJsMy44LDEwLjdjMCwwLjEsMCwwLjItMC4xLDAuMmgtMC42CgkJCQkJYy0wLjEsMC0wLjIsMC0wLjItMC4ybC0wLjktMi40Yy0wLjEtMC4yLTAuMi0wLjMtMC40LTAuM0gxMTRjLTAuMiwwLTAuNCwwLjEtMC40LDAuM2wtMC45LDIuNGMwLDAuMS0wLjEsMC4yLTAuMiwwLjJoLTAuNgoJCQkJCWMtMC4xLDAtMC4xLTAuMS0wLjEtMC4yTDExNS41LDIxLjZ6IE0xMTcuNCwyOC43YzAuMywwLDAuNi0wLjMsMC40LTAuNkwxMTYsMjNsMCwwbC0xLjgsNS4xYy0wLjEsMC4zLDAuMSwwLjYsMC40LDAuNkgxMTcuNHoiCgkJCQkJLz4KCQkJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMjkuOSwzMi40Yy0wLjEsMC0wLjIsMC0wLjItMC4xbC0yLjgtNC43bDAsMGwtMi44LDQuN2MwLDAuMS0wLjEsMC4xLTAuMiwwLjFoLTAuNwoJCQkJCWMtMC4xLDAtMC4xLTAuMS0wLjEtMC4ybDMuMi01LjNjMC4xLTAuMiwwLjEtMC4zLDAtMC41bC0yLjktNC44Yy0wLjEtMC4xLDAtMC4yLDAuMS0wLjJoMC43YzAuMSwwLDAuMiwwLDAuMiwwLjFsMi41LDQuMmwwLDAKCQkJCQlsMi41LTQuMmMwLjEtMC4xLDAuMS0wLjEsMC4yLTAuMWgwLjdjMC4xLDAsMC4xLDAuMSwwLjEsMC4ybC0yLjksNC44Yy0wLjEsMC4yLTAuMSwwLjMsMCwwLjVsMy4yLDUuM2MwLDAuMSwwLDAuMi0wLjEsMC4yCgkJCQkJSDEyOS45TDEyOS45LDMyLjR6Ii8+CgkJCTwvZz4KCQk8L2c+Cgk8L2c+Cgk8ZyBjbGFzcz0ic3QyIj4KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMS40LDIuMUMyLDIsMi42LDEuOSwzLjUsMS45YzEsMCwxLjgsMC4yLDIuMywwLjdjMC40LDAuNCwwLjcsMSwwLjcsMS43QzYuNCw1LDYuMiw1LjYsNS44LDYKCQkJQzUuMyw2LjYsNC40LDYuOSwzLjMsNi45Yy0wLjMsMC0wLjYsMC0wLjgtMC4xVjEwaC0xVjIuMXogTTIuNSw2QzIuNyw2LDMsNiwzLjQsNmMxLjMsMCwyLTAuNiwyLTEuN2MwLTEuMS0wLjgtMS42LTEuOS0xLjYKCQkJYy0wLjUsMC0wLjgsMC0xLDAuMVY2eiIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0xMi44LDcuMWMwLDIuMS0xLjUsMy4xLTIuOSwzLjFjLTEuNiwwLTIuOC0xLjItMi44LTNjMC0xLjksMS4zLTMuMSwyLjktMy4xQzExLjYsNC4xLDEyLjgsNS4zLDEyLjgsNy4xegoJCQkgTTguMSw3LjJjMCwxLjMsMC43LDIuMiwxLjgsMi4yYzEsMCwxLjgtMC45LDEuOC0yLjNjMC0xLTAuNS0yLjItMS43LTIuMkM4LjcsNC45LDguMSw2LDguMSw3LjJ6Ii8+CgkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTE0LjQsNC4ybDAuOCwzYzAuMiwwLjYsMC4zLDEuMiwwLjQsMS44aDBjMC4xLTAuNiwwLjMtMS4yLDAuNS0xLjhsMC45LTNIMThsMC45LDIuOQoJCQljMC4yLDAuNywwLjQsMS4zLDAuNSwxLjloMGMwLjEtMC42LDAuMy0xLjIsMC40LTEuOWwwLjgtMi45aDFMMTkuOSwxMGgtMWwtMC45LTIuOGMtMC4yLTAuNi0wLjQtMS4yLTAuNS0xLjloMAoJCQljLTAuMSwwLjctMC4zLDEuMy0wLjUsMS45TDE2LjEsMTBoLTFsLTEuOC01LjhIMTQuNHoiLz4KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMjMuMyw3LjNjMCwxLjQsMC45LDIsMiwyYzAuOCwwLDEuMi0wLjEsMS42LTAuM2wwLjIsMC44Yy0wLjQsMC4yLTEsMC40LTEuOSwwLjRjLTEuOCwwLTIuOS0xLjItMi45LTIuOQoJCQlzMS0zLjEsMi43LTMuMWMxLjksMCwyLjQsMS43LDIuNCwyLjdjMCwwLjIsMCwwLjQsMCwwLjVIMjMuM3ogTTI2LjQsNi42YzAtMC43LTAuMy0xLjctMS41LTEuN2MtMS4xLDAtMS41LDEtMS42LDEuN0gyNi40eiIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik0yOC43LDZjMC0wLjcsMC0xLjMsMC0xLjhoMC45bDAsMS4xaDBjMC4zLTAuOCwwLjktMS4zLDEuNi0xLjNjMC4xLDAsMC4yLDAsMC4zLDB2MWMtMC4xLDAtMC4yLDAtMC40LDAKCQkJYy0wLjcsMC0xLjMsMC42LTEuNCwxLjRjMCwwLjEsMCwwLjMsMCwwLjVWMTBoLTFWNnoiLz4KCQk8cGF0aCBjbGFzcz0ic3QxIiBkPSJNMzMuMSw3LjNjMCwxLjQsMC45LDIsMiwyYzAuOCwwLDEuMi0wLjEsMS42LTAuM2wwLjIsMC44Yy0wLjQsMC4yLTEsMC40LTEuOSwwLjRjLTEuOCwwLTIuOS0xLjItMi45LTIuOQoJCQlzMS0zLjEsMi43LTMuMWMxLjksMCwyLjQsMS43LDIuNCwyLjdjMCwwLjIsMCwwLjQsMCwwLjVIMzMuMXogTTM2LjIsNi42YzAtMC43LTAuMy0xLjctMS41LTEuN2MtMS4xLDAtMS41LDEtMS42LDEuN0gzNi4yeiIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik00My42LDEuNXY3YzAsMC41LDAsMS4xLDAsMS41aC0wLjlsMC0xaDBjLTAuMywwLjYtMSwxLjEtMiwxLjFjLTEuNCwwLTIuNS0xLjItMi41LTNjMC0xLjksMS4yLTMuMSwyLjYtMy4xCgkJCWMwLjksMCwxLjUsMC40LDEuOCwwLjloMFYxLjVINDMuNnogTTQyLjUsNi42YzAtMC4xLDAtMC4zLDAtMC40Yy0wLjItMC43LTAuNy0xLjItMS41LTEuMmMtMS4xLDAtMS43LDEtMS43LDIuMgoJCQljMCwxLjIsMC42LDIuMSwxLjcsMi4xYzAuNywwLDEuNC0wLjUsMS41LTEuM2MwLTAuMSwwLTAuMywwLTAuNVY2LjZ6Ii8+CgkJPHBhdGggY2xhc3M9InN0MSIgZD0iTTQ3LjgsMTBjMC0wLjQsMC0xLDAtMS41di03aDF2My42aDBjMC40LTAuNiwxLTEuMSwyLTEuMWMxLjQsMCwyLjUsMS4yLDIuNCwzYzAsMi4xLTEuMywzLjEtMi42LDMuMQoJCQljLTAuOCwwLTEuNS0wLjMtMS45LTEuMWgwbDAsMUg0Ny44eiBNNDguOSw3LjdjMCwwLjEsMCwwLjMsMCwwLjRjMC4yLDAuNywwLjgsMS4yLDEuNiwxLjJjMS4xLDAsMS44LTAuOSwxLjgtMi4yCgkJCWMwLTEuMi0wLjYtMi4yLTEuNy0yLjJjLTAuNywwLTEuNCwwLjUtMS42LDEuM2MwLDAuMS0wLjEsMC4zLTAuMSwwLjRWNy43eiIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik01NSw0LjJsMS4zLDMuNGMwLjEsMC40LDAuMywwLjgsMC40LDEuMmgwYzAuMS0wLjMsMC4yLTAuOCwwLjQtMS4ybDEuMi0zLjRoMS4xbC0xLjYsNC4xYy0wLjgsMi0xLjMsMy0yLDMuNgoJCQljLTAuNSwwLjUtMSwwLjYtMS4zLDAuN2wtMC4zLTAuOWMwLjMtMC4xLDAuNi0wLjMsMC45LTAuNWMwLjMtMC4yLDAuNi0wLjYsMC45LTEuMkM1NiwxMCw1Niw5LjksNTYsOS45YzAtMC4xLDAtMC4xLTAuMS0wLjMKCQkJbC0yLjEtNS4zSDU1eiIvPgoJCTxwYXRoIGNsYXNzPSJzdDEiIGQ9Ik02MC4zLDUuMmMwLTAuNCwwLjMtMC44LDAuNy0wLjhjMC40LDAsMC43LDAuMywwLjcsMC44YzAsMC40LTAuMywwLjctMC43LDAuN0M2MC42LDUuOSw2MC4zLDUuNiw2MC4zLDUuMnoKCQkJIE02MC4zLDkuNGMwLTAuNCwwLjMtMC44LDAuNy0wLjhjMC40LDAsMC43LDAuMywwLjcsMC44YzAsMC40LTAuMywwLjctMC43LDAuN0M2MC42LDEwLjIsNjAuMyw5LjksNjAuMyw5LjR6Ii8+Cgk8L2c+CjwvZz4KPC9zdmc+Cg==" class="sf-foot-logo">
          </a>
          {{#submitted}}
          <span class="sf-btn sf-btn-sent sf-btn-success">&check; Sent</span>
          {{/submitted}}
          {{^submitted}}
          <button class="sf-btn sf-btn-primary js-send-feedback" type="button" tabindex="0">Send</button>
          {{/submitted}}
        </div>
      </form>
    </div>
  </div>
  <div class="sf-widget-container">
      `,openModalButtonClass:"sf-open-feedback",closeModalButtonClass:"sf-modal-close",submitButtonClass:"js-send-feedback",emailInputId:"sf-email",feedbackTextAreaId:"sf-comments",ratingInputclass:"sf-custom-control-input",charactersRemainingContainerclass:"searchstax-characters-remaining-container"},lightweightTemplate:{template:`
     <div class="searchstax-lightweight-widget-container">
     <div class="searchstax-lightweight-widget-thumbs-up {{#thumbsUpActive}}active{{/thumbsUpActive}}">
     <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M4.85079 7.59996L7.83141 1C8.4243 1 8.9929 1.23178 9.41213 1.64436C9.83136 2.05694 10.0669 2.61651 10.0669 3.19999V6.1333H14.2845C14.5005 6.13089 14.7145 6.17474 14.9116 6.26179C15.1087 6.34885 15.2842 6.47704 15.426 6.63747C15.5677 6.79791 15.6723 6.98676 15.7326 7.19094C15.7928 7.39513 15.8072 7.60975 15.7748 7.81996L14.7465 14.4199C14.6926 14.7696 14.5121 15.0884 14.2382 15.3175C13.9643 15.5466 13.6156 15.6706 13.2562 15.6666H4.85079M4.85079 7.59996V15.6666M4.85079 7.59996H2.61531C2.22006 7.59996 1.84099 7.75448 1.5615 8.02953C1.28201 8.30458 1.125 8.67763 1.125 9.06661V14.1999C1.125 14.5889 1.28201 14.9619 1.5615 15.237C1.84099 15.512 2.22006 15.6666 2.61531 15.6666H4.85079"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>
</div>
     <div class="searchstax-lightweight-widget-separator"></div>
     <div class="searchstax-lightweight-widget-thumbs-down {{#thumbsDownActive}}active{{/thumbsDownActive}}">
      <svg width="17" height="17" viewBox="0 0 17 17" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12.1492 9.06801L9.16859 15.668C8.5757 15.668 8.0071 15.4362 7.58787 15.0236C7.16864 14.611 6.93311 14.0515 6.93311 13.468V10.5347H2.71552C2.4995 10.5371 2.28552 10.4932 2.08842 10.4062C1.89132 10.3191 1.71581 10.1909 1.57405 10.0305C1.43229 9.87006 1.32766 9.6812 1.26743 9.47702C1.2072 9.27284 1.19279 9.05822 1.22521 8.84801L2.25353 2.24806C2.30742 1.89833 2.48793 1.57955 2.76179 1.35046C3.03566 1.12136 3.38443 0.997398 3.74384 1.0014H12.1492M12.1492 9.06801V1.0014M12.1492 9.06801H14.3847C14.7799 9.06801 15.159 8.91349 15.4385 8.63844C15.718 8.36339 15.875 7.99034 15.875 7.60135V2.46805C15.875 2.07907 15.718 1.70602 15.4385 1.43097C15.159 1.15592 14.7799 1.0014 14.3847 1.0014H12.1492"  stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
      </svg>

     </div>
     </div>
      `,thumbsUpButtonClass:"searchstax-lightweight-widget-thumbs-up",thumbsDownButtonClass:"searchstax-lightweight-widget-thumbs-down"}};class M{}l(M,"answer",nr),l(M,"externalPromotions",or),l(M,"facets",lr),l(M,"pagination",cr),l(M,"relatedSearches",hr),l(M,"searchFeedback",ur),l(M,"searchInput",dr),l(M,"location",pr),l(M,"searchResults",gr),l(M,"sorting",mr),l(M,"feedback",te);class fr{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"externalPromotionsContainerId"),l(this,"searchExternalPromotionsMainContainer",null);var t,s;this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.externalPromotionsContainerId=((s=(t=this.config.templates)==null?void 0:t.mainTemplate)==null?void 0:s.externalPromotionsContainerId)||M.externalPromotions.mainTemplate.externalPromotionsContainerId,typeof document<"u"&&(this.searchExternalPromotionsMainContainer=document?.getElementById(this.containerId)),this.initializeSubscriptions(),this.renderMainTemplate(this.generateTemplateData())}initializeSubscriptions(){this.dataLayer.$searchExternalPromotions.subscribe(e=>{e&&this.renderMainTemplate(this.generateTemplateData())})}generateTemplateData(){const e={...this.dataLayer.parsedData.data,externalPromotions:this.dataLayer.parsedData.externalPromotions};return this.dataLayer.setExternalPromotionsData(e),e}addExternalSearch(e){var t,s,a,r;const o=typeof document<"u"?document?.getElementById(this.externalPromotionsContainerId):null;if(o){const n=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.externalPromotion)==null?void 0:a.template)||((r=M.externalPromotions.externalPromotion)==null?void 0:r.template);if(typeof document<"u"){const c=document?.createElement("div");c.classList.add("searchstax-external-promotion"),c.addEventListener("click",h=>{this.trackClick(e,h)}),c.innerHTML=T.render(n,e),o.appendChild(c)}}}trackClick(e,t){t.stopPropagation(),t.preventDefault(),window?.open(e.url,"_blank")}renderMainTemplate(e){var t,s,a,r;const o=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.mainTemplate)==null?void 0:a.template)||((r=M.externalPromotions.mainTemplate)==null?void 0:r.template);if(this.dataLayer.renderingEngine===P.mustache){this.searchExternalPromotionsMainContainer.innerHTML=T.render(o,e);const n=typeof document<"u"?document?.getElementById(this.externalPromotionsContainerId):null;n&&(n.innerHTML="");for(const c of e.externalPromotions)this.addExternalSearch(c)}}}class V{static addAccessibilityNotificationContainerToBody(){if(!document.getElementById("searchAccessibilityContainer")){const e=document.createElement("div");e.setAttribute("aria-live","polite"),e.setAttribute("id","searchAccessibilityContainer"),document.body.appendChild(e)}}static setAccessibilityText(e,t){this.addAccessibilityNotificationContainerToBody();const s=document.getElementById("searchAccessibility");s&&s.remove();const a=document.createElement("span");a.setAttribute("id","searchAccessibility"),a.innerHTML=e;const r=document.getElementById("searchAccessibilityContainer");r&&setTimeout(()=>{r.appendChild(a)},t??100)}}class Lr{constructor(e,t){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"routerHelper"),l(this,"cachedPhrase",""),l(this,"isCached",!1),l(this,"overlayOpened",!1),l(this,"facetPaginationStep"),l(this,"facetPaginationStepMobile"),l(this,"searchFacetsMainContainer",null),l(this,"searchFacetsMobileContainer",null),l(this,"searchFacetsDesktopContainer",null),l(this,"facetLimits",{}),l(this,"facetLimitsMobile",{}),l(this,"deactivatedFacets",{}),l(this,"cachedData",null),l(this,"cacheFacets"),l(this,"onFacetSelect",(s,a,r,o,n)=>{if(s.stopPropagation(),!a.disabled){const c=r.querySelector("input");let h=o?c.checked:!c.checked;n!==void 0&&(h=!n),c.checked=h;const d=this.dataLayer.searchObject;let g=[...d.facets];const p=this.extractFacetValue(a);h?g.find(L=>re.deepEqual(L,p)?L:!1)||(this.config.facetingType==="tabs"&&(g=g.filter(L=>L.name!==p.name)),g.push(p)):g=g.filter(L=>!re.deepEqual(L,p)),setTimeout(()=>{this.dataLayer.setSearchObject({...d,facets:g,page:1}),this.config.facetingType==="tabs"&&this.renderMainTemplate(this.generateTemplateData(),!0)},0)}}),this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.routerHelper=e.routerHelper,this.cacheFacets=t,this.facetPaginationStep=this.config.itemsPerPageDesktop,this.facetPaginationStepMobile=this.config.itemsPerPageMobile,typeof document<"u"&&(this.searchFacetsMainContainer=document?.getElementById(this.containerId)),this.needCache&&t(),this.initializeSubscriptions()}get needCache(){return this.config.facetingType==="showUnavailable"||this.config.facetingType==="or"||this.config.facetingType==="tabs"}get needDisabling(){return this.config.facetingType==="showUnavailable"}initializeSubscriptions(){this.needCache&&this.dataLayer.$searchFacetsCached.subscribe(e=>{e&&this.dataLayer.searchFacets&&this.renderMainTemplate(this.generateTemplateData())}),this.dataLayer.$searchResults.subscribe(e=>{e&&(this.needCache&&!this.isCached&&(this.dataLayer.searchFacets&&!this.dataLayer.searchFacetsCached&&this.dataLayer.setSearchFacetsCached(this.dataLayer.searchFacets),this.cacheFacets()),this.renderMainTemplate(this.generateTemplateData()))}),this.dataLayer.$searchObject.subscribe(e=>{this.cachedPhrase!==e.query?(this.cachedPhrase=e.query,this.isCached=!1):this.isCached=!0})}extractFacetValue(e){return{type:this.config.facetingType,name:e.parentName,value:e.value}}applyFacetLimits(e,t){const s=t?this.facetPaginationStepMobile:this.facetPaginationStep,a=t?this.facetLimits:this.facetLimitsMobile;return e.forEach(r=>{a[r.name]||(a[r.name]=s)}),e.map(r=>({...r,values:r.values.slice(0,a[r.name]),showingAllFacets:r.values.length<=a[r.name],hasMoreFacets:r.values.length>s}))}generateTemplateData(e){if(this.generateSelectedFacetsData(),this.dataLayer.searchFacets){let t=this.dataLayer.searchFacets;this.needCache&&this.dataLayer.searchFacetsCached&&(t=this.dataLayer.searchFacetsCached,this.needDisabling&&(t=t.map(a=>{var r;const o=(r=this.dataLayer.searchFacets)==null?void 0:r.find(n=>n.name===a.name);return o?{...a,values:a.values.map(n=>{const c=o.values.find(h=>n.type==="range"?!1:n.type==="checkbox"?h.value===n.value:!1);return{...n,disabled:!c,isMobile:e}})}:{...a,values:a.values.map(n=>({...n,disabled:!0})),isMobile:e}}))),this.config.specificFacets&&(t=t.filter(a=>{var r;return(r=this.config.specificFacets)==null?void 0:r.includes(a.name)}));const s={facets:this.applyFacetLimits(t,e),...this.dataLayer.parsedData.data,isMobile:e};return this.dataLayer.setFacetsTemplateData(s),s}else{const t={facets:[],...this.dataLayer.parsedData.data,isMobile:e};return this.dataLayer.setFacetsTemplateData(t),t}}createFacetItem(e,t,s){var a,r,o,n,c,h,d,g,p,L,w,m;if(typeof document<"u"){const y=document?.createElement("div");y.classList.add("searchstax-facet-container"),this.deactivatedFacets[e.name]||y.classList.add("active");const b=((o=(r=(a=this.config)==null?void 0:a.templates)==null?void 0:r.facetItemContainerTemplate)==null?void 0:o.template)||((n=M.facets.facetItemContainerTemplate)==null?void 0:n.template);y.innerHTML=T.render(b,e),t.appendChild(y);const A=y.querySelector("."+(((d=(h=(c=this.config)==null?void 0:c.templates)==null?void 0:h.facetItemContainerTemplate)==null?void 0:d.facetListTitleContainerClass)||((g=M.facets.facetItemContainerTemplate)==null?void 0:g.facetListTitleContainerClass)));A?.addEventListener("click",()=>{y.classList.toggle("active");const S=y.classList.contains("active"),E=A.querySelector(".searchstax-facet-title");E&&E.setAttribute("aria-expanded",String(S))});const R=y.querySelector("."+(((w=(L=(p=this.config)==null?void 0:p.templates)==null?void 0:L.facetItemContainerTemplate)==null?void 0:w.facetListContainerClass)||((m=M.facets.facetItemContainerTemplate)==null?void 0:m.facetListContainerClass)));R&&(e.values.forEach(S=>{this.createFacetListItem(S,R,e.name)}),e.hasMoreFacets&&this.createHasMoreComponent(e,R,s))}}isChecked(e){var t;return!!((t=this.dataLayer.searchObject.facets)!=null&&t.find(s=>re.deepEqual(s,this.extractFacetValue(e))))}createFacetListItem(e,t,s){var a,r,o,n,c,h,d,g,p,L,w,m;if(typeof document<"u"){const y=document?.createElement("div");y.classList.add("searchstax-facet-value-container"),e.disabled&&y.classList.add("searchstax-facet-value-disabled");const b=this.isChecked(e),A=((o=(r=(a=this.config)==null?void 0:a.templates)==null?void 0:r.facetItemTemplate)==null?void 0:o.template)||((n=M.facets.facetItemTemplate)==null?void 0:n.template);y.innerHTML=T.render(A,{...e,isChecked:b});let R=(c=M.facets.facetItemTemplate)==null?void 0:c.checkTriggerClasses;R=((g=(d=(h=this.config)==null?void 0:h.templates)==null?void 0:d.facetItemTemplate)==null?void 0:g.checkTriggerClasses)||R,R.forEach(E=>{const H=y.querySelector("."+E);H?.addEventListener("click",ae=>{this.onFacetSelect(ae,e,y)})});const S=y.querySelector("."+(((w=(L=(p=this.config)==null?void 0:p.templates)==null?void 0:L.facetItemTemplate)==null?void 0:w.inputCheckboxClass)||((m=M.facets.facetItemTemplate)==null?void 0:m.inputCheckboxClass)));S?.addEventListener("click",E=>{this.onFacetSelect(E,e,y,!0)}),S&&S?.setAttribute("data-test-value",`${encodeURIComponent(s)}:&quot;${encodeURIComponent(e.value)}&quot;`),t.appendChild(y)}}createHasMoreComponent(e,t,s){var a,r,o,n,c,h,d,g;if(typeof document<"u"){const p=document?.createElement("div");p.classList.add("searchstax-facet-show-more-container");const L=((o=(r=(a=this.config)==null?void 0:a.templates)==null?void 0:r.showMoreButtonContainerTemplate)==null?void 0:o.template)||((n=M.facets.showMoreButtonContainerTemplate)==null?void 0:n.template);p.innerHTML=T.render(L,e);const w=p.querySelector("."+(((d=(h=(c=this.config)==null?void 0:c.templates)==null?void 0:h.showMoreButtonContainerTemplate)==null?void 0:d.showMoreButtonClass)||((g=M.facets.showMoreButtonContainerTemplate)==null?void 0:g.showMoreButtonClass)));w&&(this.attachOnclickToShowMore(e,w,s),t&&t.appendChild(w))}}attachOnclickToShowMore(e,t,s){t.addEventListener("click",a=>{this.onShowMoreLessClick(a,e,s)}),t.addEventListener("keyup",a=>{(a.code==="Space"||a.code==="Enter")&&this.onShowMoreLessClick(a,e,s)})}onShowMoreLessClick(e,t,s){e.preventDefault();const a=s?this.facetPaginationStepMobile:this.facetPaginationStep,r=s?this.facetLimits:this.facetLimitsMobile;r[t.name]===void 0?r[t.name]=a*2:r[t.name]<=t.values.length?(V.setAccessibilityText(`More Facets shown for ${t.label}`),r[t.name]=r[t.name]+a):(V.setAccessibilityText(`Less Facets shown for ${t.label}`),r[t.name]=a),this.generateTemplateData(s),this.renderMainTemplate(this.generateTemplateData())}renderMainTemplate(e,t){var s,a,r,o,n,c,h,d,g,p,L;if(e&&(!re.deepEqual(this.cachedData??{},e)||t)){this.cachedData=e;const w=((r=(a=(s=this.config)==null?void 0:s.templates)==null?void 0:a.mainTemplateDesktop)==null?void 0:r.template)||((o=M.facets.mainTemplateDesktop)==null?void 0:o.template);if(this.dataLayer.renderingEngine===P.mustache&&this.searchFacetsMainContainer){this.searchFacetsMainContainer.innerHTML=T.render(w,{...e});const m=(d=this.searchFacetsMainContainer)==null?void 0:d.querySelector("."+(((h=(c=(n=this.config)==null?void 0:n.templates)==null?void 0:c.mainTemplateDesktop)==null?void 0:h.facetsContainerClass)||M.facets.mainTemplateDesktop.facetsContainerClass));if(m){m.innerHTML="";for(const y of e.facets)this.createFacetItem(y,m);if(this.searchFacetsMainContainer){const y=this.searchFacetsMainContainer.querySelector("."+(((L=(p=(g=this.config)==null?void 0:g.templates)==null?void 0:p.mainTemplateDesktop)==null?void 0:L.selectedFacetsContainerClass)||M.facets.mainTemplateDesktop.selectedFacetsContainerClass));y&&(this.createSelectedFacetsComponents(y),this.createClearFacetsComponents(y))}}}setTimeout(()=>{document.querySelectorAll(".searchstax-facet-title").forEach(m=>{m.setAttribute("aria-expanded",String(!0)),m.setAttribute("tabindex","0"),m.setAttribute("role","button")})},100),this.renderMobileTemplate(this.generateTemplateData(!0))}else this.generateSelectedFacetsData()}generateSelectedFacetsData(){const e=[],t=this.dataLayer.searchObject.facets;for(const s of t){const a=decodeURIComponent(s.name),r=decodeURIComponent(s.value);if(this.dataLayer.searchFacets){const o=this.needCache?this.dataLayer.searchFacetsCached:this.dataLayer.searchFacets,n=o?.find(c=>c.name===a);if(n){const c=n.values.find(h=>h.type==="range"?!1:h.type==="checkbox"?`"${h.value}"`==`"${r}"`:!1);c&&e.push(c)}}}this.dataLayer.setSelectedFacetsTemplateData(e)}createSelectedFacetsComponents(e){var t;this.generateSelectedFacetsData(),(t=this.dataLayer.selectedFacetsTemplateData)==null||t.forEach(s=>{this.createSelectedFacetsComponent(e,s)})}createClearFacetsComponents(e){var t,s,a,r,o,n,c,h;if(typeof document<"u"){const d=this.dataLayer.searchObject,g=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.clearFacetsTemplate)==null?void 0:a.template)||((r=M.facets.clearFacetsTemplate)==null?void 0:r.template),p=document?.createElement("div");p.innerHTML=T.render(g,{shouldShow:d.facets.length>0});const L=p.querySelector("."+(((c=(n=(o=this.config)==null?void 0:o.templates)==null?void 0:n.clearFacetsTemplate)==null?void 0:c.containerClass)||((h=M.facets.clearFacetsTemplate)==null?void 0:h.containerClass)));L&&(L.addEventListener("click",()=>{this.removeSelectedFacets()}),L.addEventListener("keyup",w=>{(w.code==="Space"||w.code==="Enter")&&this.removeSelectedFacets()}),e.appendChild(L))}}createSelectedFacetsComponent(e,t){var s,a,r,o,n,c,h,d;if(typeof document<"u"){const g=((r=(a=(s=this.config)==null?void 0:s.templates)==null?void 0:a.selectedFacetsTemplate)==null?void 0:r.template)||((o=M.facets.selectedFacetsTemplate)==null?void 0:o.template),p=document?.createElement("div");p.innerHTML=T.render(g,t);const L=p.querySelector("."+(((h=(c=(n=this.config)==null?void 0:n.templates)==null?void 0:c.selectedFacetsTemplate)==null?void 0:h.containerClass)||((d=M.facets.selectedFacetsTemplate)==null?void 0:d.containerClass)));L&&(L.addEventListener("click",()=>{this.unselectFacet(t)}),L.addEventListener("keyup",w=>{(w.code==="Space"||w.code==="Enter")&&this.unselectFacet(t)}),e.appendChild(L))}}unselectFacet(e){const t=this.dataLayer.searchObject;let s=[...t.facets];e.type==="checkbox"&&(s=s.filter(a=>JSON.stringify(a)!==JSON.stringify(this.extractFacetValue(e)))),setTimeout(()=>{this.dataLayer.setSearchObject({...t,facets:s}),this.generateSelectedFacetsData()},0)}removeSelectedFacets(){const e=this.dataLayer.searchObject;this.dataLayer.setSearchObject({...e,facets:[]})}createFilterByComponent(e){var t,s,a,r,o,n,c,h;if(typeof document<"u"){const d=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.filterByTemplate)==null?void 0:a.template)||((r=M.facets.filterByTemplate)==null?void 0:r.template),g=document?.createElement("div");g.innerHTML=T.render(d,{});const p=g.querySelector("."+(((c=(n=(o=this.config)==null?void 0:o.templates)==null?void 0:n.filterByTemplate)==null?void 0:c.containerClass)||((h=M.facets.filterByTemplate)==null?void 0:h.containerClass)));p&&(e.prepend(p),p.addEventListener("click",this.openOverlay.bind(this)),p.addEventListener("keyup",L=>{(L.code==="Space"||L.code==="Enter")&&this.openOverlay()}))}}openOverlay(){var e;V.setAccessibilityText("Facet overlay opened. Tab to select facets."),this.overlayOpened=!0,this.searchFacetsMainContainer&&(typeof document<"u"&&document.body.classList.toggle("searchstax-no-scroll"),(e=this.searchFacetsMainContainer.querySelector(".searchstax-facets-mobile-overlay"))==null||e.classList.add("searchstax-show"))}closeOverlay(){var e;V.setAccessibilityText("Facet overlay closed"),this.overlayOpened=!1,this.searchFacetsMainContainer&&(typeof document<"u"&&document.body.classList.toggle("searchstax-no-scroll"),(e=this.searchFacetsMainContainer.querySelector(".searchstax-facets-mobile-overlay"))==null||e.classList.remove("searchstax-show"))}renderMobileTemplate(e){var t,s,a,r,o,n,c,h,d,g,p,L,w,m,y,b,A,R,S;if(e&&typeof document<"u"){const E=document?.createElement("div");E.classList.add("searchstax-facets-container-mobile");const H=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.mainTemplateMobile)==null?void 0:a.template)||((r=M.facets.mainTemplateMobile)==null?void 0:r.template);if(this.dataLayer.renderingEngine===P.mustache){if(E.innerHTML=T.render(H,{...e,overlayOpened:this.overlayOpened}),(o=this.searchFacetsMainContainer)==null||o.appendChild(E),(c=(n=this.config)==null?void 0:n.templates)!=null&&c.mainTemplateMobile)for(const be of((g=(d=(h=this.config)==null?void 0:h.templates)==null?void 0:d.mainTemplateMobile)==null?void 0:g.closeOverlayTriggerClasses)||[]){const O=E.querySelector("."+be);O&&(O.addEventListener("click",this.closeOverlay.bind(this)),O.addEventListener("keyup",me=>{(me.code==="Space"||me.code==="Enter")&&this.closeOverlay()}))}else for(const be of M.facets.mainTemplateMobile.closeOverlayTriggerClasses){const O=E.querySelector("."+be);O&&(O.addEventListener("click",this.closeOverlay.bind(this)),O.addEventListener("keyup",me=>{(me.code==="Space"||me.code==="Enter")&&this.closeOverlay()}))}const ae=E.querySelector("."+(((w=(L=(p=this.config)==null?void 0:p.templates)==null?void 0:L.mainTemplateMobile)==null?void 0:w.filterByContainerClass)||M.facets.mainTemplateMobile.filterByContainerClass));ae&&this.createFilterByComponent(ae);const X=E.querySelector("."+(((b=(y=(m=this.config)==null?void 0:m.templates)==null?void 0:y.mainTemplateMobile)==null?void 0:b.selectedFacetsContainerClass)||M.facets.mainTemplateMobile.selectedFacetsContainerClass));X&&(this.createSelectedFacetsComponents(X),this.createClearFacetsComponents(X));const it=E.querySelector("."+(((S=(R=(A=this.config)==null?void 0:A.templates)==null?void 0:R.mainTemplateMobile)==null?void 0:S.facetsContainerClass)||M.facets.mainTemplateMobile.facetsContainerClass));if(it){it.innerHTML="";for(const be of e.facets)this.createFacetItem(be,it,!0)}}}}}class wr{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"previousButtonClass"),l(this,"nextButtonClass"),l(this,"loadMoreButtonClass"),l(this,"routerHelper"),l(this,"searchPaginationMainContainer",null);var t,s,a,r,o,n,c,h,d;this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.routerHelper=e.routerHelper,this.previousButtonClass=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.mainTemplate)==null?void 0:a.previousButtonClass)??M.pagination.mainTemplate.previousButtonClass,this.nextButtonClass=((n=(o=(r=this.config)==null?void 0:r.templates)==null?void 0:o.mainTemplate)==null?void 0:n.nextButtonClass)??M.pagination.mainTemplate.nextButtonClass,this.loadMoreButtonClass=((d=(h=(c=this.config)==null?void 0:c.templates)==null?void 0:h.infiniteScrollTemplate)==null?void 0:d.loadMoreButtonClass)??M.pagination.infiniteScrollTemplate.loadMoreButtonClass,typeof document<"u"&&(this.searchPaginationMainContainer=document?.getElementById(this.containerId)),this.initializeSubscriptions(),this.renderMainTemplate(this.generateTemplateData())}get isFirstPage(){var e;return((e=this.dataLayer.searchObject)==null?void 0:e.page)===1}get isLastPage(){return this.dataLayer.parsedData.data.isLastPage}initializeSubscriptions(){this.dataLayer.$searchResults.subscribe(e=>{e&&this.renderMainTemplate(this.generateTemplateData())})}generateTemplateData(){var e,t,s,a;const r={...this.dataLayer.parsedData.data,previousPageLink:(t=this.routerHelper)==null?void 0:t.searchObjectToUrl({...this.dataLayer.searchObject,page:((e=this.dataLayer.searchObject)==null?void 0:e.page)-1}),nextPageLink:(a=this.routerHelper)==null?void 0:a.searchObjectToUrl({...this.dataLayer.searchObject,page:((s=this.dataLayer.searchObject)==null?void 0:s.page)+1})};return this.dataLayer.setPaginationData(r),r}goToPage(e,t){const s=this.dataLayer.searchObject;s&&(s.page=e,this.dataLayer.setSearchObject(s)),t||window==null||window.scrollTo(0,0),document.body.tabIndex=-1,document.body.focus()}nextPage(e){var t;e?.preventDefault(),e?.stopPropagation(),this.isLastPage||this.goToPage(((t=this.dataLayer.searchObject)==null?void 0:t.page)+1,this.dataLayer.isInfiniteScroll)}previousPage(e){var t;e?.preventDefault(),e?.stopPropagation(),this.isFirstPage||this.goToPage(((t=this.dataLayer.searchObject)==null?void 0:t.page)-1)}overridePaginationEvents(){if(this.searchPaginationMainContainer){const e=this.searchPaginationMainContainer.querySelector("."+this.previousButtonClass),t=this.searchPaginationMainContainer.querySelector("."+this.nextButtonClass),s=this.searchPaginationMainContainer.querySelector("."+this.loadMoreButtonClass);e&&(e.addEventListener("click",this.previousPage.bind(this)),e.addEventListener("keydown",a=>{(a.code==="Space"||a.code==="Enter")&&this.previousPage(a)})),t&&(t.addEventListener("click",this.nextPage.bind(this)),t.addEventListener("keydown",a=>{(a.code==="Space"||a.code==="Enter")&&this.nextPage(a)})),s&&(s.addEventListener("click",this.nextPage.bind(this)),s.addEventListener("keydown",a=>{(a.code==="Space"||a.code==="Enter")&&this.nextPage(a)}))}}renderMainTemplate(e){var t,s,a,r,o,n,c,h,d,g;this.searchPaginationMainContainer&&((t=this.searchPaginationMainContainer.querySelector("."+this.previousButtonClass))==null||t.removeEventListener("click",this.previousPage),(s=this.searchPaginationMainContainer.querySelector("."+this.nextButtonClass))==null||s.removeEventListener("click",this.nextPage));let p=((o=(r=(a=this.config)==null?void 0:a.templates)==null?void 0:r.mainTemplate)==null?void 0:o.template)||((n=M.pagination.mainTemplate)==null?void 0:n.template);this.dataLayer.isInfiniteScroll&&(p=((d=(h=(c=this.config)==null?void 0:c.templates)==null?void 0:h.infiniteScrollTemplate)==null?void 0:d.template)||((g=M.pagination.infiniteScrollTemplate)==null?void 0:g.template)),this.dataLayer.renderingEngine===P.mustache&&(this.searchPaginationMainContainer.innerHTML=T.render(p,e),setTimeout(()=>{this.overridePaginationEvents()},0))}}class yr{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"relatedSearchesContainerClass"),l(this,"searchRelatedSearchesMainContainer",null),l(this,"track");var t,s;this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.relatedSearchesContainerClass=((s=(t=this.config.templates)==null?void 0:t.main)==null?void 0:s.relatedSearchesContainerClass)||M.relatedSearches.main.relatedSearchesContainerClass,typeof document<"u"&&(this.searchRelatedSearchesMainContainer=document?.getElementById(this.containerId)),this.track=e.trackRelatedSearchClick,this.initializeSubscriptions()}initializeSubscriptions(){this.dataLayer.$searchRelatedSearches.subscribe(e=>{e&&this.renderMainTemplate(this.generateTemplateData())})}generateTemplateData(){const e={...this.dataLayer.parsedData.data};return this.dataLayer.setRelatedSearchesData(e),e}addRelatedSearchComponent(e,t){var s,a,r,o,n;if(typeof document<"u"){const c=document?.createElement("div"),h=((r=(a=(s=this.config)==null?void 0:s.templates)==null?void 0:a.relatedSearch)==null?void 0:r.template)||M.relatedSearches.relatedSearch.template;if(this.dataLayer.renderingEngine===P.mustache){c.innerHTML=T.render(h,e);const d=c.querySelector("."+(((n=(o=this.config.templates)==null?void 0:o.relatedSearch)==null?void 0:n.relatedSearchContainerClass)||M.relatedSearches.relatedSearch.relatedSearchContainerClass));d&&(t.appendChild(d),d.addEventListener("click",()=>{this.executeSearch(e)}),d.addEventListener("keyup",g=>{(g.code==="Space"||g.code==="Enter")&&this.executeSearch(e)}))}}}executeSearch(e){const t=this.dataLayer.searchObject;t.query=e.related_search,this.dataLayer.setSearchObject(t),this.track(e)}renderMainTemplate(e){var t,s,a,r;const o=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.main)==null?void 0:a.template)||M.relatedSearches.main.template;if(this.dataLayer.renderingEngine===P.mustache&&this.searchRelatedSearchesMainContainer){this.searchRelatedSearchesMainContainer.innerHTML="",this.searchRelatedSearchesMainContainer.innerHTML=T.render(o,e);const n=(r=this.searchRelatedSearchesMainContainer)==null?void 0:r.querySelector(`.${this.relatedSearchesContainerClass}`);if(n)for(const c of e.relatedSearches)this.addRelatedSearchComponent(c,n)}}}class vr{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"searchFeedbackMainContainer",null),l(this,"searchTrigger"),this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.searchTrigger=e.searchTrigger,typeof document<"u"&&(this.searchFeedbackMainContainer=document?.getElementById(this.containerId)),this.initializeSubscriptions()}initializeSubscriptions(){this.dataLayer.$searchResults.subscribe(e=>{e&&this.renderMainTemplate(this.generateTemplateData())})}generateTemplateData(){const e={...this.dataLayer.parsedData.data};return this.dataLayer.setSearchFeedbackData(e),e}onOriginalQueryClick(e){var t;e.stopPropagation(),e.preventDefault();const s=(t=e.target)==null?void 0:t.innerHTML;this.searchTrigger(s,!0)}attachClick(){var e,t,s,a,r;const o=(r=this.searchFeedbackMainContainer)==null?void 0:r.querySelector("."+(((s=(t=(e=this.config)==null?void 0:e.templates)==null?void 0:t.main)==null?void 0:s.originalQueryClass)||((a=M.searchFeedback.main)==null?void 0:a.originalQueryClass)));o&&o.addEventListener("click",this.onOriginalQueryClick.bind(this))}renderMainTemplate(e){var t,s,a;const r=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.main)==null?void 0:a.template)||M.searchFeedback.main.template;this.dataLayer.renderingEngine===P.mustache&&(this.searchFeedbackMainContainer.innerHTML=T.render(r,e),setTimeout(()=>{this.attachClick()},0))}}class Mr{constructor(e){l(this,"searchHelper"),l(this,"dataLayer"),l(this,"config"),l(this,"suggestAfterMinChars"),l(this,"containerId"),l(this,"currentInputValue",""),l(this,"autosuggestResults"),l(this,"searchInput"),l(this,"actionButton"),l(this,"autosuggestContainer"),l(this,"buttonState","search"),l(this,"selectedAutosuggestItem",-1),l(this,"suggestTrigger"),l(this,"searchTrigger"),this.dataLayer=e.dataLayer,this.config=e.config,this.searchTrigger=e.searchTrigger,this.suggestTrigger=e.suggestTrigger,this.containerId=e.containerId,this.suggestAfterMinChars=e.config.suggestAfterMinChars,this.suggestAfterMinChars===void 0&&this.getSuggestAfterValue(),this.dataLayer.$locationEnabled.subscribeUntilHasValue(()=>{this.renderMainTemplate(),this.actionButtonInit(),this.updateActionButtonState("search"),this.searchInput&&(this.createAutosuggestContainer(),this.attachSubscriptions())},200)}renderMainTemplate(){var e,t,s,a;if(typeof document<"u"){const r=document?.getElementById(this.containerId);if(!r)throw new Error("Search input container not found");const o=((t=(e=this.config.templates)==null?void 0:e.mainTemplate)==null?void 0:t.template)||M.searchInput.mainTemplate.template,n={...this.dataLayer.parsedData.data,locationEnabled:!!this.dataLayer.locationEnabled};if(this.dataLayer.setInputWidgetTemplateData(n),this.dataLayer.renderingEngine===P.mustache){const d=T.render(o,n);r.innerHTML=d,this.dataLayer.setInputTemplateRendered(!0)}const c=((a=(s=this.config.templates)==null?void 0:s.mainTemplate)==null?void 0:a.searchInputId)||M.searchInput.mainTemplate.searchInputId,h=document?.querySelector(`#${c}`);if(h)this.searchInput=h,h.addEventListener("keyup",this.inputKeyupEvent.bind(this)),h.addEventListener("blur",this.hideAutosuggest.bind(this)),h.addEventListener("paste",this.inputPasteEvent.bind(this));else throw new Error("Input not found")}}createAutosuggestContainer(){var e;this.dataLayer.renderingEngine===P.mustache&&typeof document<"u"&&(this.autosuggestContainer=document?.createElement("div"),this.autosuggestContainer.classList.add("searchstax-autosuggest-container"),this.autosuggestContainer.addEventListener("mouseleave",()=>{this.resetAutosuggestSelection(),this.markActiveAutosuggestItem()}),(e=this.searchInput)==null||e.after(this.autosuggestContainer))}getSuggestAfterValue(){this.dataLayer.searchHelper&&this.dataLayer.searchHelper.suggest("*",e=>{this.suggestAfterMinChars=e.metadata.minPrefixChars},[])}actionButtonInit(){typeof document<"u"&&(this.actionButton=document?.getElementById("searchstax-search-input-action-button"),this.actionButton&&this.actionButton.addEventListener("click",()=>{var e;this.executeSearch(((e=this.searchInput)==null?void 0:e.value)??"")}))}attachSubscriptions(){this.dataLayer.$searchTermChange.subscribe(()=>{this.handleSearchTermChange()}),this.dataLayer.$loadingChange.subscribe(()=>{this.handleLoadingChange()}),this.dataLayer.$searchAutosuggest.subscribe(e=>{e&&this.appendSuggestions(e)}),this.dataLayer.$searchObject.subscribe(e=>{e.query!=="undefined"&&e.query!==void 0&&e.query!=="*"&&this.searchInput&&(this.searchInput.value=this.cleanSuggestionTerm(e.query??""))})}handleLoadingChange(){this.dataLayer.loading?this.updateActionButtonState("loading"):this.handleSearchTermChange()}handleSearchTermChange(){this.updateActionButtonState("search")}updateActionButtonState(e){if(this.buttonState=e,this.actionButton)switch(this.actionButton.classList.remove("searchstax-spinner-icon"),this.actionButton.classList.remove("searchstax-search-icon"),e){case"loading":this.actionButton.classList.add("searchstax-spinner-icon");break;case"search":this.actionButton.classList.add("searchstax-search-icon"),this.actionButton.setAttribute("aria-label","search");break}}selectPreviousAutosuggestItem(e){this.selectedAutosuggestItem>0?this.selectedAutosuggestItem--:this.selectedAutosuggestItem===0?(this.selectedAutosuggestItem=-1,e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length)),V.setAccessibilityText("No Suggestion selected")):this.selectedAutosuggestItem=this.autosuggestResults.suggestions.length-1,this.markActiveAutosuggestItem()}selectNextAutosuggestItem(){this.selectedAutosuggestItem<this.autosuggestResults.suggestions.length-1?this.selectedAutosuggestItem++:this.selectedAutosuggestItem===this.autosuggestResults.suggestions.length-1?(this.selectedAutosuggestItem=-1,V.setAccessibilityText("No Suggestion selected")):this.selectedAutosuggestItem=0,this.markActiveAutosuggestItem()}resetAutosuggestSelection(){this.selectedAutosuggestItem=-1,this.markActiveAutosuggestItem()}markActiveAutosuggestItem(){if(typeof document<"u"){const e=document?.getElementsByClassName("searchstax-autosuggest-item");for(let t=0;t<e.length;t++){const s=e[t];t===this.selectedAutosuggestItem?(s.classList.add("active"),V.setAccessibilityText(`Selected suggestion: ${s.innerText}`)):s.classList.remove("active")}}}inputKeyupEvent(e){const t=e.key;this.currentInputValue=e.target.value,t==="Enter"?this.suggestionChosen():t==="Escape"?this.hideAutosuggest(e.target):t==="ArrowUp"?this.selectPreviousAutosuggestItem(e.target):t==="ArrowDown"?this.selectNextAutosuggestItem():this.autosuggestHandling(e),this.handleSearchTermChange()}autosuggestHandling(e){this.suggestAfterMinChars&&e.target&&e.target.value.length>=this.suggestAfterMinChars?this.executeSuggest(e.target.value):this.hideAutosuggest()}inputPasteEvent(e){setTimeout(()=>{this.autosuggestHandling(e),this.handleSearchTermChange()},0)}executeSuggest(e){this.suggestTrigger(e)}executeSearch(e){this.hideAutosuggest(),this.searchTrigger(e===""?"*":e)}suggestionChosen(){this.selectedAutosuggestItem>-1?this.autosuggestItemClicked(this.autosuggestResults.suggestions[this.selectedAutosuggestItem]):this.executeSearch(this.currentInputValue)}hideAutosuggest(e){setTimeout(()=>{this.dataLayer.setAutosuggestResults({numFound:0,suggestions:[]}),this.autosuggestContainer&&(this.autosuggestContainer.innerHTML="",this.autosuggestContainer.classList.add("hidden")),this.resetAutosuggestSelection(),e&&(e.focus(),e.setSelectionRange(e.value.length,e.value.length)),V.setAccessibilityText("No Suggestion selected")},200)}cleanSuggestionTerm(e){return _.removeXSSRiskyTags(e.replace(/(<([^>]+)>)/gi,"")).trim()}autosuggestItemClicked(e){this.searchInput.value=this.cleanSuggestionTerm(e.term??""),this.executeSearch(this.cleanSuggestionTerm(e.term))}createAutosuggestItem(e){var t,s,a;const r=document?.createElement("div");r.classList.add("searchstax-autosuggest-item"),r.addEventListener("click",()=>{this.autosuggestItemClicked(e)}),r.addEventListener("mouseenter",()=>{this.onSuggestionEnter(e)});const o=((s=(t=this.config.templates)==null?void 0:t.autosuggestItemTemplate)==null?void 0:s.template)||((a=M.searchInput.autosuggestItemTemplate)==null?void 0:a.template);return r.innerHTML=T.render(o,e),r}onSuggestionEnter(e){var t;this.selectedAutosuggestItem=((t=this.autosuggestResults)==null?void 0:t.suggestions.indexOf(e))||0,this.markActiveAutosuggestItem()}appendSuggestions(e){this.autosuggestContainer&&(this.autosuggestContainer.innerHTML="",this.autosuggestContainer.classList.remove("hidden"));for(const t in e.suggest)if(Object.prototype.hasOwnProperty.call(e.suggest,t)){const s=e.suggest[t];for(const a in s)if(Object.prototype.hasOwnProperty.call(s,a)){const r=s[a];r.numFound?V.setAccessibilityText("Suggestions are available. Use up and down arrows to navigate while focusing input. Use Escape key to escape out of the suggestions",2e3):V.setAccessibilityText("",0),this.autosuggestResults=r,this.dataLayer.setAutosuggestResults(r),r.numFound>0?r.suggestions.forEach(o=>{this.autosuggestContainer&&typeof document<"u"&&this.autosuggestContainer.appendChild(this.createAutosuggestItem(o))}):this.autosuggestContainer&&this.autosuggestContainer.classList.add("hidden")}}}}class Cr{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"linkClickCallback"),l(this,"searchCallback"),l(this,"containerId"),l(this,"searchResultsMainContainer"),l(this,"searchResultsContainer"),l(this,"searchResultLinks",[]),this.linkClickCallback=e.linkClickCallback,this.searchCallback=e.searchTrigger,this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId;const t=document?.getElementById(this.containerId);if(t)this.searchResultsMainContainer=t;else throw new Error(`Search Results Main Container with id ${this.containerId} not found`);this.dataLayer.setIsInfiniteScroll(e.config.renderMethod==="infiniteScroll"),this.initializeSubscriptions(),this.renderMainTemplate()}initializeSubscriptions(){this.dataLayer.$searchObject.subscribe(()=>{V.setAccessibilityText("Searching...")}),this.dataLayer.$searchResults.subscribe(e=>{e&&this.searchResultsContainer&&this.renderResults(e)})}changeTemplate(){this.dataLayer.searchResults&&this.renderResults(this.dataLayer.searchResults)}renderNoResultsTemplate(){var e,t,s,a,r;const o=((s=(t=(e=this.config)==null?void 0:e.templates)==null?void 0:t.noSearchResultTemplate)==null?void 0:s.template)||((a=M.searchResults.noSearchResultTemplate)==null?void 0:a.template),n=((r=this.dataLayer.searchResultsMetadata)==null?void 0:r.spellingSuggestion)??"";if(this.dataLayer.renderingEngine===P.mustache&&this.searchResultsContainer&&(this.searchResultsContainer.innerHTML=T.render(o,{spellingSuggestion:n,...this.dataLayer.parsedData.data,searchCallback:this.searchCallback.bind(this)})),n&&this.searchResultsContainer){const c=this.searchResultsContainer.querySelector("a");c&&c.addEventListener("click",h=>{h.preventDefault(),h.stopPropagation(),this.searchCallback(n)})}}renderResults(e){var t,s,a,r,o;if(this.dataLayer.renderingEngine===P.mustache&&this.searchResultsContainer)if(this.removeLinkClickEvents(),e.length===0)V.setAccessibilityText("Search has no results"),this.renderNoResultsTemplate();else{V.setAccessibilityText(`Showing ${this.dataLayer.parsedData.startResultIndex} through ${this.dataLayer.parsedData.endResultIndex} results from ${this.dataLayer.parsedData.totalResults}. Press tab to navigate through results`);const n=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.searchResultTemplate)==null?void 0:a.template)||((r=M.searchResults.searchResultTemplate)==null?void 0:r.template),c=e.map(h=>T.render(n,h));((o=this.config)==null?void 0:o.renderMethod)==="infiniteScroll"&&this.dataLayer.searchObject.page>1?this.searchResultsContainer.innerHTML+=c.join(""):this.searchResultsContainer.innerHTML=c.join(""),this.searchResultLinks=Array.from(this.searchResultsContainer.querySelectorAll(`[${this.uniqueIdAttribute}]`)),this.attachLinkClickEvents()}}removeLinkClickEvents(){this.searchResultLinks.forEach(e=>{e.removeEventListener("click",()=>{}),e.removeEventListener("keydown",()=>{})})}get uniqueIdAttribute(){var e,t,s,a;return((s=(t=(e=this.config)==null?void 0:e.templates)==null?void 0:t.searchResultTemplate)==null?void 0:s.searchResultUniqueIdAttribute)||((a=M.searchResults.searchResultTemplate)==null?void 0:a.searchResultUniqueIdAttribute)}attachLinkClickEvents(){this.searchResultLinks.forEach(e=>{e.addEventListener("click",t=>{t.preventDefault(),t.stopPropagation();const s=e.getAttribute(this.uniqueIdAttribute)??"";s&&this.linkClickCallback(s)}),e.addEventListener("keydown",t=>{if(t.code==="Space"||t.code==="Enter"){const s=e.getAttribute(this.uniqueIdAttribute)??"";s&&this.linkClickCallback(s)}})})}renderMainTemplate(){var e,t,s,a;const r=((s=(t=(e=this.config)==null?void 0:e.templates)==null?void 0:t.mainTemplate)==null?void 0:s.template)||((a=M.searchResults.mainTemplate)==null?void 0:a.template);this.dataLayer.renderingEngine===P.mustache&&(this.searchResultsMainContainer.innerHTML=T.render(r,{}),setTimeout(()=>{var o,n,c,h,d,g,p;const L=(c=(n=(o=this.config)==null?void 0:o.templates)==null?void 0:n.mainTemplate)!=null&&c.searchResultsContainerId?(g=(d=(h=this.config)==null?void 0:h.templates)==null?void 0:d.mainTemplate)==null?void 0:g.searchResultsContainerId:(p=M.searchResults.mainTemplate)==null?void 0:p.searchResultsContainerId,w=document?.getElementById(L);if(w)this.searchResultsContainer=w;else throw new Error(`Search Results Container with id ${L} not found`)},0))}}class br{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"selectId"),l(this,"searchSortingMainContainer",null);var t,s;this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.selectId=((s=(t=this.config.templates)==null?void 0:t.main)==null?void 0:s.selectId)||M.sorting.main.selectId,this.searchSortingMainContainer=document?.getElementById(this.containerId),this.initializeSubscriptions(),this.renderMainTemplate(this.generateTemplateData())}initializeSubscriptions(){this.dataLayer.$searchResults.subscribe(e=>{e&&this.renderMainTemplate(this.generateTemplateData())})}generateTemplateData(){const e={...this.dataLayer.parsedData.data};return this.dataLayer.setSearchSortingData(e),e}setOrderQuery(e){const t=this.dataLayer.searchObject;t&&(t.order=e,this.dataLayer.setSearchObject(t))}markOptionSelected(){const e=document?.getElementById(this.selectId);if(e){const t=e.querySelector(`option[value="${decodeURIComponent(this.dataLayer.searchObject.order)}"]`);t&&(t.selected=!0)}}renderMainTemplate(e){var t,s,a;const r=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.main)==null?void 0:a.template)||M.sorting.main.template;if(this.dataLayer.renderingEngine===P.mustache){this.searchSortingMainContainer.innerHTML=T.render(r,e),this.markOptionSelected();const o=document?.getElementById(this.selectId);o&&o.addEventListener("change",n=>{this.setOrderQuery(n.target.value)})}}}class xr{constructor(e){l(this,"analyticsKey"),l(this,"containerId"),l(this,"mainContainer"),l(this,"isLightweight"),l(this,"emailOverride"),l(this,"feedbackTextAreaOverride"),l(this,"mainTemplateOverride"),l(this,"lightweightTemplateOverride"),l(this,"templateData",{feedbackOpen:!1,ratings:[{index:1,isSelected:!1},{index:2,isSelected:!1},{index:3,isSelected:!1},{index:4,isSelected:!1},{index:5,isSelected:!1},{index:6,isSelected:!1},{index:7,isSelected:!1},{index:8,isSelected:!1},{index:9,isSelected:!1},{index:10,isSelected:!1}],emailInput:"",feedbackTextArea:"",charactersLeft:2e3,maxLength:2e3,errors:{rating:!1,email:!1},submitted:!1,thumbsUpActive:!1,thumbsDownActive:!1}),l(this,"thumbsUpValue",10),l(this,"thumbsDownValue",1),l(this,"ratedQuestion",""),l(this,"language",""),l(this,"model",""),this.analyticsKey=e.analyticsKey,this.containerId=e.containerId??"sf-feedback",this.isLightweight=e.lightweight??!1,this.isLightweight&&this.templateData.ratings.unshift({index:0,isSelected:!1}),this.thumbsUpValue=e.thumbsUpValue??10,this.thumbsDownValue=e.thumbsDownValue??1,this.emailOverride=e.emailOverride,this.feedbackTextAreaOverride=e.feedbackTextAreaOverride,this.mainTemplateOverride=e.mainTemplateOverride,this.lightweightTemplateOverride=e.lightweightTemplateOverride,this.mainContainer=document.getElementById(this.containerId),this.language=e.language??"",this.model=e.model??"",this.init()}init(){oe.attachAnalyticsScript(),this.renderMainTemplate(this.generateTemplateData())}generateTemplateData(){return this.templateData}renderMainTemplate(e){var t,s;this.mainContainer;let a=(t=te?.mainTemplate)==null?void 0:t.template;this.mainTemplateOverride&&(a=this.mainTemplateOverride),this.isLightweight&&(a=(s=te.lightweightTemplate)==null?void 0:s.template,this.lightweightTemplateOverride&&(a=this.lightweightTemplateOverride)),this.mainContainer.innerHTML=T.render(a,e),this.attachEvents()}attachEvents(){this.isLightweight?this.attachLightweightEvents():(this.attachOpenModalEvent(),this.closeModalEvent(),this.attachRatingEvents(),this.attachTextAreaEvents(),this.attachEmailInputEvents(),this.attachSubmitButtonEvents())}attachLightweightEvents(){var e,t,s,a;const r=(e=te.lightweightTemplate)==null?void 0:e.thumbsUpButtonClass,o=(t=te.lightweightTemplate)==null?void 0:t.thumbsDownButtonClass,n=(s=this.mainContainer)==null?void 0:s.querySelector("."+r),c=(a=this.mainContainer)==null?void 0:a.querySelector("."+o);n&&n.addEventListener("click",()=>{const h=this.feedbackTextAreaOverride&&this.isLightweight?this.feedbackTextAreaOverride():this.templateData.feedbackTextArea;this.templateData.ratings[this.templateData.ratings.length-1].isSelected&&this.ratedQuestion===h||(this.templateData.thumbsUpActive=!0,this.templateData.thumbsDownActive=!1,this.templateData.ratings.forEach(d=>{d.isSelected=d.index===this.thumbsUpValue}),this.renderMainTemplate(this.generateTemplateData()),this.ratedQuestion=h,this.submit())}),c&&c.addEventListener("click",()=>{const h=this.feedbackTextAreaOverride&&this.isLightweight?this.feedbackTextAreaOverride():this.templateData.feedbackTextArea;this.templateData.ratings[0].isSelected&&this.ratedQuestion===h||(this.templateData.thumbsUpActive=!1,this.templateData.thumbsDownActive=!0,this.templateData.ratings.forEach(d=>{d.isSelected=d.index===this.thumbsDownValue}),this.renderMainTemplate(this.generateTemplateData()),this.ratedQuestion=h,this.submit())})}attachSubmitButtonEvents(){var e,t;const s=(e=te.mainTemplate)==null?void 0:e.submitButtonClass,a=(t=this.mainContainer)==null?void 0:t.querySelector("."+s);a&&a.addEventListener("click",()=>{this.checkIfValid()})}checkIfValid(){var e,t;const s=(t=this.mainContainer)==null?void 0:t.querySelector("#"+((e=te.mainTemplate)==null?void 0:e.emailInputId));this.validateEmail(s.value)?this.templateData.errors.email=!1:(this.templateData.errors.email=!0,V.setAccessibilityText("Please enter a valid email address.")),this.templateData.ratings.some(a=>a.isSelected)?this.templateData.errors.rating=!1:(this.templateData.errors.rating=!0,V.setAccessibilityText("Please Rate your experience.")),this.templateData.errors.rating||this.templateData.errors.email?this.renderMainTemplate(this.generateTemplateData()):this.submit()}submit(){var e;this.templateData.submitted=!0;const t=(e=this.templateData.ratings.find(s=>s.isSelected))==null?void 0:e.index;t!==void 0&&oe.trackFeedback({trackApiKey:this.analyticsKey,email:this.emailOverride&&this.isLightweight?this.emailOverride():this.templateData.emailInput,rating:t,feedback:this.feedbackTextAreaOverride&&this.isLightweight?this.feedbackTextAreaOverride():this.templateData.feedbackTextArea,model:this.model?this.model:void 0,language:this.language?this.language:void 0}),this.renderMainTemplate(this.generateTemplateData())}validateEmail(e){return e===""?!0:/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e)}attachEmailInputEvents(){var e,t;const s=(t=this.mainContainer)==null?void 0:t.querySelector("#"+((e=te.mainTemplate)==null?void 0:e.emailInputId));s&&(s.addEventListener("input",()=>{this.templateData.emailInput=s.value}),s.addEventListener("blur",()=>{this.validateEmail(s.value)?this.templateData.errors.email=!1:(this.templateData.errors.email=!0,V.setAccessibilityText("Please enter a valid email address.")),this.renderMainTemplate(this.generateTemplateData())}))}attachTextAreaEvents(){var e,t;const s=(t=this.mainContainer)==null?void 0:t.querySelector("#"+((e=te.mainTemplate)==null?void 0:e.feedbackTextAreaId));s&&s.addEventListener("input",()=>{var a,r;this.templateData.feedbackTextArea=s.value,this.templateData.charactersLeft=this.templateData.maxLength-s.value.length;const o=(r=this.mainContainer)==null?void 0:r.querySelector("."+((a=te.mainTemplate)==null?void 0:a.charactersRemainingContainerclass));o&&(o.innerText=this.templateData.charactersLeft+"")})}attachRatingEvents(){var e,t;const s=(e=te.mainTemplate)==null?void 0:e.ratingInputclass,a=(t=this.mainContainer)==null?void 0:t.querySelectorAll("."+s);a&&a.forEach(r=>{r.addEventListener("click",o=>{const n=o.target.value;this.templateData.ratings.forEach(c=>{c.isSelected=c.index+""===n}),this.templateData.errors.rating=!1,this.renderMainTemplate(this.generateTemplateData())})})}attachOpenModalEvent(){var e,t;const s=(e=te.mainTemplate)==null?void 0:e.openModalButtonClass,a=(t=this.mainContainer)==null?void 0:t.querySelector("."+s);a&&a.addEventListener("click",r=>{r.preventDefault(),this.toggleModal()})}toggleModal(){this.templateData.feedbackOpen?this.closeFeedbackModal():this.openFeedbackModal()}closeModalEvent(){var e,t;const s=(e=te.mainTemplate)==null?void 0:e.closeModalButtonClass,a=(t=this.mainContainer)==null?void 0:t.querySelector("."+s);a&&a.addEventListener("click",()=>{this.closeFeedbackModal()})}openFeedbackModal(){this.templateData.feedbackOpen=!0,this.renderMainTemplate(this.generateTemplateData()),V.setAccessibilityText("Feedback form opened",1e3)}closeFeedbackModal(){this.templateData.feedbackOpen=!1,this.renderMainTemplate(this.generateTemplateData()),V.setAccessibilityText("Feedback form closed",1e3)}}class kr{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"answerContainer",null),l(this,"showMoreVisible",!1),l(this,"renderFeedbackWidget",!1),l(this,"clicked",!1),l(this,"renderedWithShowMore",!1);var t;this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.renderFeedbackWidget=((t=this.config.feedbackwidget)==null?void 0:t.renderFeedbackWidget)||!1,this.config.showShowMoreAfterWordCount&&(this.dataLayer.answerWidgetShowMoreLimit=this.config.showShowMoreAfterWordCount),typeof document<"u"&&(this.answerContainer=document?.getElementById(this.containerId)),this.initializeSubscriptions(),this.dataLayer.setIsAnswerWidgetCreated(!0)}initializeSubscriptions(){this.dataLayer.$answer.subscribe(()=>{this.clicked?this.showMoreVisible=!1:this.showMoreVisible=this.dataLayer.parsedData.shouldShowAnswerLoadMore,this.renderMainTemplate(this.generateTemplateData())}),this.dataLayer.$answerLoading.subscribe(()=>{this.renderMainTemplate(this.generateTemplateData())}),this.dataLayer.$answerError.subscribe(e=>{e&&setTimeout(()=>{this.renderMainTemplate(this.generateTemplateData())},100)}),this.dataLayer.$searchObject.subscribe(()=>{this.clicked=!1,this.renderedWithShowMore=!1,this.showMoreVisible=!1}),this.dataLayer.$paginationData.subscribe(()=>{this.renderMainTemplate(this.generateTemplateData())}),this.dataLayer.$answer.subscribe(e=>{e&&setTimeout(()=>{this.initializeWidget()},600)}),this.dataLayer.$searchResults.subscribe(e=>{e&&this.dataLayer.$answer.getValue()&&setTimeout(()=>{this.initializeWidget()},600)})}searchstaxFeedbackTextAreaOverride(){return"Question: "+(this.dataLayer.searchObject.query==="undefined"?"":this.dataLayer.searchObject.query)+" Answer: "+this.dataLayer.parsedData.getAnswerData}initializeWidget(){var e,t,s,a,r;this.renderFeedbackWidget&&document.getElementById("feedbackWidgetContainer")&&!this.dataLayer.answerLoading&&new xr({analyticsKey:this.dataLayer.parsedData.trackingData.trackApiKey,containerId:"feedbackWidgetContainer",lightweight:!0,model:this.dataLayer.parsedData.trackingData.model,language:this.dataLayer.parsedData.trackingData.language,emailOverride:(e=this.config.feedbackwidget)==null?void 0:e.emailOverride,feedbackTextAreaOverride:((t=this.config.feedbackwidget)==null?void 0:t.searchstaxFeedbackTextAreaOverride)??this.searchstaxFeedbackTextAreaOverride.bind(this),thumbsUpValue:((s=this.config.feedbackwidget)==null?void 0:s.thumbsUpValue)??10,thumbsDownValue:((a=this.config.feedbackwidget)==null?void 0:a.thumbsDownValue)??0,lightweightTemplateOverride:(r=this.config.feedbackwidget)==null?void 0:r.lightweightTemplateOverride})}showMore(e){e.preventDefault(),this.clicked=!0,this.showMoreVisible=!1,this.renderMainTemplate(this.generateTemplateData()),setTimeout(()=>{this.initializeWidget()},600)}attachClickEventToShowMore(){const e=document.querySelector(".searchstax-answer-load-more-button");e&&e.addEventListener("click",this.showMore.bind(this))}trackLinkClick(e){e.preventDefault(),e.stopPropagation();const t=e.target.getAttribute("href");oe.trackAnswerLinkClick({href:t,answer:this.dataLayer.parsedData.getAnswerData,...this.dataLayer.parsedData.trackingData}).then(()=>{window.open(t,"_blank")}).catch(()=>{window.open(t,"_blank")})}attachLinkTracking(){document.querySelectorAll(".searchstax-answer-link").forEach(e=>{e.getAttribute("listener")!=="true"&&(e.setAttribute("listener","true"),e.addEventListener("click",this.trackLinkClick.bind(this)))})}renderMainTemplate(e){var t,s,a;const r=((a=(s=(t=this.config)==null?void 0:t.templates)==null?void 0:s.main)==null?void 0:a.template)||M.answer.main.template;this.dataLayer.renderingEngine===P.mustache?(!this.renderedWithShowMore||!e.answerLoading||this.clicked)&&(e.showMoreButtonVisible&&(this.renderedWithShowMore=!0),this.answerContainer.innerHTML=T.render(r,e),setTimeout(()=>{this.attachClickEventToShowMore(),this.attachLinkTracking()},100)):setTimeout(()=>{this.attachLinkTracking()},500)}generateTemplateData(){const e={...this.dataLayer.parsedData.data,showMoreButtonVisible:this.showMoreVisible};return this.dataLayer.setAnswerFullData(e),e}}class rs{constructor(e){l(this,"dataLayer"),l(this,"config"),l(this,"containerId"),l(this,"currentSelectValue",""),l(this,"locationInput"),l(this,"radiusInput"),l(this,"locationDecode"),l(this,"locationDecodeCoordinatesToAddress");var t,s;this.dataLayer=e.dataLayer,this.config=e.config,this.containerId=e.containerId,this.locationDecode=(t=e.config.hooks)==null?void 0:t.locationDecode,this.locationDecodeCoordinatesToAddress=(s=e.config.hooks)==null?void 0:s.locationDecodeCoordinatesToAddress,this.dataLayer.locationEnabled&&this.dataLayer.$inputTemplateRendered.subscribeUntil(()=>{this.renderMainTemplate(),this.attachSubscriptions()},!0,500)}renderMainTemplate(){var e,t,s,a,r,o,n,c;if(typeof document<"u"){const h=document?.getElementById(this.containerId);if(!h)throw new Error("Search input container not found");const d=((t=(e=this.config.templates)==null?void 0:e.mainTemplate)==null?void 0:t.template)||M.location.mainTemplate.template,g={...this.dataLayer.parsedData.data};if(this.dataLayer.setLocationWidgetTemplateData(g),this.dataLayer.renderingEngine===P.mustache){const p=T.render(d,g);h.innerHTML=p;const L=((a=(s=this.config.templates)==null?void 0:s.mainTemplate)==null?void 0:a.locationInputId)||M.location.mainTemplate.locationInputId,w=document?.querySelector(`#${L}`);if(w)this.locationInput=w,w.addEventListener("blur",this.blurEvent.bind(this)),w.addEventListener("focus",this.focusEvent.bind(this));else throw new Error("Input not found");const m=((o=(r=this.config.templates)==null?void 0:r.mainTemplate)==null?void 0:o.radiusInputId)||M.location.mainTemplate.radiusInputId,y=document?.querySelector(`#${m}`);y instanceof HTMLSelectElement&&(this.radiusInput=y,y.addEventListener("change",this.radiusSelectChangeEvent.bind(this)));const b=((c=(n=this.config.templates)==null?void 0:n.mainTemplate)==null?void 0:c.currentLocationActionButtonId)||M.location.mainTemplate.currentLocationActionButtonId,A=document?.querySelector(`#${b}`);A&&A.addEventListener("click",this.getCurrentLocation.bind(this))}}}setCurrentLocationFields(e){this.dataLayer.setLocationCoordinatesDecoded(e),this.dataLayer.setSearchLocation(this.dataLayer.searchLocationCoordinatesDecoded),this.dataLayer.renderingEngine===P.mustache&&this.locationInput&&(this.locationInput.value=this.dataLayer.searchLocationCoordinatesDecoded)}getCurrentLocation(){navigator.geolocation?navigator.geolocation.getCurrentPosition(e=>{const t=e.coords.latitude.toString(),s=e.coords.longitude.toString(),a=Math.floor(parseFloat(t)*100)/100,r=Math.floor(parseFloat(s)*100)/100;this.dataLayer.setSearchLat(a+""),this.dataLayer.setSearchLong(r+"");const o=this.locationDecodeCoordinatesToAddress;o?o(a+"",r+"").then(n=>{this.setCurrentLocationFields(n.address||"Current Location")}).catch(()=>{this.setCurrentLocationFields("Current Location")}):this.setCurrentLocationFields("Current Location")},()=>{console.error("Unable to retrieve your location")}):console.error("Geolocation is not supported by this browser.")}setRadiusValue(e){this.dataLayer.setSearchRadius(e)}radiusSelectChangeEvent(e){this.currentSelectValue=e.target.value,this.setRadiusValue(this.currentSelectValue)}attachSubscriptions(){this.dataLayer.$searchObject.subscribe(e=>{this.locationInput&&(this.locationInput.value=this.cleanSuggestionTerm(e.location.address??"")),this.radiusInput&&e.location.radius&&(this.radiusInput.value=e.location.radius||"")})}cleanSuggestionTerm(e){return _.removeXSSRiskyTags(e.replace(/(<([^>]+)>)/gi,"")).trim()}triggerGeocoder(e){const t=this.locationDecode;this.dataLayer.setLocationDecodingLoading(!0),e&&this.dataLayer.searchLocation!==e&&e!==this.dataLayer.searchLocationCoordinatesDecoded?t(e).then(s=>{this.dataLayer.setSearchLocation(s.address||""),this.dataLayer.setSearchLat(s.lat||""),this.dataLayer.setSearchLong(s.lon||""),this.locationInput&&(this.locationInput.value=this.cleanSuggestionTerm(s.address||"")),this.dataLayer.renderingEngine===P.mustache&&s.error&&this.locationInput&&this.locationInput.classList.add("searchstax-input-location-error"),s.error?this.dataLayer.setLocationError(!0):this.dataLayer.setLocationError(!1),this.dataLayer.setLocationDecodingLoading(!1)}).catch(()=>{this.dataLayer.setLocationDecodingLoading(!1)}):e===""&&(this.dataLayer.setSearchLocation(void 0),this.dataLayer.setSearchLat(void 0),this.dataLayer.setSearchLong(void 0),this.dataLayer.setLocationDecodingLoading(!1))}focusEvent(e){e.target.classList.remove("searchstax-input-location-error"),this.dataLayer.setLocationError(!1)}blurEvent(e){const t=e.target.value;this.triggerGeocoder(t)}}class Sr{constructor(e=P.mustache){l(this,"routerEnabled",!1),l(this,"cachedQuery",""),l(this,"routerHelper"),l(this,"searchHelper"),l(this,"searchResultsConfig"),l(this,"searchPaginationConfig"),l(this,"searchFeedbackConfig"),l(this,"searchSortingConfig"),l(this,"searchFacetsConfig"),l(this,"relatedSearchesConfig"),l(this,"externalPromotionsConfig"),l(this,"searchInputWidget"),l(this,"searchLocationWidget"),l(this,"searchResultsWidget"),l(this,"searchFacetsWidget"),l(this,"searchPaginationWidget"),l(this,"searchFeedbackWidget"),l(this,"searchSortingWidget"),l(this,"relatedSearchesWidget"),l(this,"externalPromotionsWidget"),l(this,"answerWidget"),l(this,"locationObserver",null),l(this,"dataLayer"),l(this,"firstRequest",!0),l(this,"previousQuery",""),l(this,"eventSource",null),l(this,"renderEngine",P.mustache),e&&(this.renderEngine=e)}setRenderingEngine(e=P.mustache){this.dataLayer.setRenderingEngine(e)}handleHooks(){var e,t;(t=(e=this.dataLayer.searchstaxConfig)==null?void 0:e.hooks)!=null&&t.afterSearch&&this.dataLayer.$searchResults.subscribe(s=>{this.dataLayer.searchstaxConfig.hooks.afterSearch(s)}),setTimeout(()=>{this.dataLayer.$searchObject.subscribe(s=>{var a,r,o,n,c,h;s.query!==this.previousQuery&&this.dataLayer.setAnswerData(""),s.query!==""&&s.query!==void 0&&s.query!=="undefined"?(this.search(s),s.query!==this.previousQuery&&this.startSSE(s.query)):(a=this.dataLayer.searchLocationConfig)!=null&&a.locationSearchEnabled&&!((r=this.dataLayer.searchLocationConfig)!=null&&r.locationValuesOverride)?this.getMetadata(s):(n=(o=this.dataLayer.searchLocationConfig)==null?void 0:o.locationValuesOverride)!=null&&n.locationFilterDefaultValue&&this.dataLayer.setSearchRadius((h=(c=this.dataLayer.searchLocationConfig)==null?void 0:c.locationValuesOverride)==null?void 0:h.locationFilterDefaultValue),this.previousQuery=s.query})},10),this.dataLayer.$searchResults.subscribe(s=>{s&&this.dataLayer.searchResultsMetadata&&!this.dataLayer.cookiesDisabled&&oe.trackSearch({...this.dataLayer.parsedData.trackingData,impressions:this.dataLayer.searchResultsMetadata.impressions})})}startSSE(e){var t,s;this.eventSource&&((t=this.eventSource)==null||t.close(),this.dataLayer.setAnswerData("")),this.dataLayer.turnAIAnswerGenerationOn===!0&&this.dataLayer.questionURL&&(this.eventSource=(s=this.searchHelper)==null?void 0:s.startSSE(e,this.parseAnswerResultsResponse.bind(this)))}attachAnalyticsScript(e){oe.attachAnalyticsScript(e)}initialize(e){var t,s;if(this.dataLayer=new zi("searchstax_session_id",e.sessionId),this.renderEngine&&this.dataLayer.setRenderingEngine(this.renderEngine),this.handleHooks(),e.questionURL&&(this.dataLayer.questionURL=e.questionURL),e.analyticsBaseUrl&&typeof window<"u"&&(window.analyticsBaseUrl=e.analyticsBaseUrl,window._msq=e._msq||[],this.attachAnalyticsScript(e.analyticsSrc)),e.autoCorrect===!1&&(this.dataLayer.autoCorrect=!1),e.language&&this.dataLayer.setLanguage(e.language),e.model&&this.dataLayer.setModel(e.model),this.dataLayer.searchstaxConfig||(this.dataLayer.setSearchstaxConfig(e),this.searchHelper=new _i({...e,sessionId:this.dataLayer.sessionId},this.dataLayer),this.dataLayer.searchHelper=this.searchHelper),((t=e.router)==null?void 0:t.enabled)===void 0||((s=e.router)==null?void 0:s.enabled)===!0){this.routerEnabled=!0,this.routerHelper=new Za(e.router?e.router:{enabled:!0});const a=this.routerHelper.urlToSearchObject(window?.location.href??"");this.dataLayer.searchObject.itemsPerPage&&(a.itemsPerPage=this.dataLayer.searchObject.itemsPerPage),a.model&&this.dataLayer.setModel(a.model),a.location&&(a.location.address&&this.dataLayer.setSearchLocation(a.location.address),a.location.lat&&this.dataLayer.setSearchLat(a.location.lat),a.location.lon&&this.dataLayer.setSearchLong(a.location.lon),a.location.radius&&this.dataLayer.setSearchRadius(a.location.radius)),this.dataLayer.setSearchObject(a),addEventListener("popstate",()=>{this.routerHelper&&this.dataLayer.setSearchObject(this.routerHelper.urlToSearchObject(window?.location.href??"",this.dataLayer.searchObject.itemsPerPage))})}else this.routerHelper=new Za({})}getMetadata(e){this.searchHelper&&(e.query==="undefined"||e.query===void 0)&&this.dataLayer.setSearchObject({...e,query:"*"})}search(e){if(this.searchHelper){const t=this.dataLayer.forceNotCorrect;this.searchHelper.search(e,this.parseSearchResultsResponse.bind(this),this.firstRequest,t),this.firstRequest=!1,this.getRelatedSearches()}}getRelatedSearches(){this.searchHelper&&this.relatedSearchesConfig&&this.searchHelper.getRelatedSearches(this.dataLayer.searchObject,this.relatedSearchesConfig.relatedSearchesURL,this.relatedSearchesConfig.relatedSearchesAPIKey,this.parseRelatedSearchesResponse.bind(this))}parseRelatedSearchesResponse(e){var t,s;const a=(((t=e.response)==null?void 0:t.docs)??[]).map((o,n)=>({...o,position:n+1})),r=[];for(const o of a)r.push({relatedSearch:o.related_search,position:o.position});this.dataLayer.setSearchRelatedSearches(a),this.dataLayer.searchResultsMetadata&&!this.dataLayer.cookiesDisabled&&oe.trackRelatedSearches({...this.dataLayer.parsedData.trackingData,impressions:r,totalRelatredSearches:((s=this.dataLayer.searchRelatedSearches)==null?void 0:s.length)??0})}handleRouter(){if(this.routerEnabled){const e={...this.dataLayer.searchObject};this.dataLayer.isInfiniteScroll&&delete e.page,this.routerHelper.updateUrl(e)}}parseSearchResultsResponseMetadata(e){var t,s,a,r;const o=Ze.extractSearchResultsMetadata(e),n=((s=(t=this.dataLayer.searchLocationConfig)==null?void 0:t.locationValuesOverride)==null?void 0:s.locationFilterDefaultValue)??((r=(a=o.location)==null?void 0:a.filter)==null?void 0:r.defaultValue);!this.dataLayer.searchRadius&&n&&this.dataLayer.setSearchRadius(n),this.dataLayer.setSearchResultsMetadata(o)}parseSearchResultsResponse(e){var t,s;this.handleRouter(),this.dataLayer.setItemsPerPage(parseInt(e.responseHeader.params.rows)),this.dataLayer.setModel(e.responseHeader.params.model);let a=Ze.combineResultsWithMetadata(e),r=Ze.extractFacets(e);this.dataLayer.setSearchFacets(r),(s=(t=this.dataLayer.searchstaxConfig)==null?void 0:t.hooks)!=null&&s.afterSearch&&(a=this.dataLayer.searchstaxConfig.hooks.afterSearch(a)),this.dataLayer.setSearchExternalPromotions(e.externalLinks??[]),this.parseSearchResultsResponseMetadata(e),this.dataLayer.setSearchResults(a)}parseAnswerResultsResponse(e){this.handleRouter(),e!==Se.question&&e!==Se.notQuestion&&(this.dataLayer.setAnswerLoading(!0),this.dataLayer.setAnswerData(this.dataLayer.getAnswerData+e))}cacheFacets(){var e;(e=this.searchHelper)==null||e.cacheFacets()}parseSuggestSuggestResponse(e){var t,s;let a=e;(s=(t=this.dataLayer.searchInputConfig)==null?void 0:t.hooks)!=null&&s.afterAutosuggest&&(a=this.dataLayer.searchInputConfig.hooks.afterAutosuggest(e)),this.dataLayer.setSearchAutosuggest(a)}suggest(e,t){this.searchHelper&&this.searchHelper.suggest(e,this.parseSuggestSuggestResponse.bind(this),t)}changeLanguage(e){this.searchHelper&&this.dataLayer.setLanguage(e)}addSearchInputWidget(e,t){this.dataLayer.searchInputConfig||this.dataLayer.$locationEnabled.subscribeUntilHasValue(()=>{this.dataLayer.setSearchInputConfig(t),this.searchInputWidget=new Mr({containerId:e,config:t,searchTrigger:this.executeSearch.bind(this),suggestTrigger:this.executeSuggest.bind(this),dataLayer:this.dataLayer})},200)}addSearchLocationWidget(e,t){var s,a;this.dataLayer.searchLocationConfig||(t.locationSearchEnabled?(this.dataLayer.setLocationEnabled(!0),this.dataLayer.setSearchLocationConfig(t),t.locationValuesOverride?(this.searchLocationWidget=new rs({containerId:e,config:t,dataLayer:this.dataLayer}),(s=t?.locationValuesOverride)!=null&&s.locationFilterDefaultValue&&this.dataLayer.setSearchRadius((a=t?.locationValuesOverride)==null?void 0:a.locationFilterDefaultValue)):this.dataLayer.$searchResultsMetadata.subscribeUntilHasValue(()=>{this.searchLocationWidget=new rs({containerId:e,config:t,dataLayer:this.dataLayer})},0)):this.dataLayer.setLocationEnabled(!1))}addAnswerWidget(e,t){this.dataLayer.turnAIAnswerGenerationOn=!0,this.startSSE(this.dataLayer.searchObject.query),this.dataLayer.setAnswerData(""),this.answerWidget=new kr({containerId:e,config:t,dataLayer:this.dataLayer})}addSearchResultsWidget(e,t){this.searchResultsConfig||(this.searchResultsConfig=t,this.searchResultsWidget=new Cr({containerId:e,linkClickCallback:this.executeLinkClick.bind(this),searchTrigger:this.executeSearch.bind(this),config:t,dataLayer:this.dataLayer}))}addPaginationWidget(e,t){this.searchPaginationConfig=t,this.searchPaginationWidget=new wr({containerId:e,config:t,dataLayer:this.dataLayer,routerHelper:this.routerHelper})}addSearchFeedbackWidget(e,t){this.searchFeedbackConfig=t,this.searchFeedbackWidget=new vr({containerId:e,config:t,dataLayer:this.dataLayer,searchTrigger:this.executeSearch.bind(this)})}addSearchSortingWidget(e,t){this.searchSortingConfig=t,this.searchSortingWidget=new br({containerId:e,config:t,dataLayer:this.dataLayer})}addRelatedSearchesWidget(e,t){this.relatedSearchesConfig=t,this.relatedSearchesWidget=new yr({containerId:e,config:t,dataLayer:this.dataLayer,trackRelatedSearchClick:this.trackRelatedSearchClick.bind(this)}),setTimeout(()=>{this.getRelatedSearches()},0)}addExternalPromotionsWidget(e,t){this.externalPromotionsConfig=t,this.externalPromotionsWidget=new fr({containerId:e,config:t,dataLayer:this.dataLayer})}addFacetsWidget(e,t){this.searchFacetsConfig=t,this.searchFacetsWidget=new Lr({containerId:e,config:t,dataLayer:this.dataLayer,routerHelper:this.routerHelper},this.cacheFacets.bind(this))}executeSearch(e,t){const s={...this.dataLayer.searchObject};s.query=_.removeXSSRiskyTags(e),s.page=1,s.facets=[],s.location={...s.location},this.locationObserver&&this.dataLayer.$locationDecodingLoading.unsubscribe(this.locationObserver),this.locationObserver=this.dataLayer.$locationDecodingLoading.subscribeUntil(()=>{var a,r;s.location.address=this.dataLayer.searchLocation,s.location.radius=this.dataLayer.searchRadius,s.location.lat=this.dataLayer.searchLat,s.location.lon=this.dataLayer.searchLong,this.dataLayer.forceNotCorrect=!!t;let o=(a=this.routerHelper)==null?void 0:a.searchObjectToParams(s);o&&(o=(r=this.routerHelper)==null?void 0:r.extractParamsThatDoNotStartWithRouteName(o)),o&&(s.additionalProps=Object.keys(o).map(n=>o?{key:n,value:o[n]}:{key:"",value:""})),this.dataLayer.setSearchObject(s),this.dataLayer.lastSearchValue=s.query},!1)}executeSuggest(e){var t,s;let a={term:e,queryParams:[]};(s=(t=this.dataLayer.searchInputConfig)==null?void 0:t.hooks)!=null&&s.beforeAutosuggest&&(a=this.dataLayer.searchInputConfig.hooks.beforeAutosuggest(a)),a&&a.term!==void 0&&a.queryParams!==void 0&&this.suggest(a.term,a.queryParams)}trackRelatedSearchClick(e){var t;this.dataLayer.searchResultsMetadata&&this.dataLayer.searchRelatedSearches&&!this.dataLayer.cookiesDisabled&&oe.trackRelatedSearchClick({...this.dataLayer.parsedData.trackingData,relatedSearch:e,totalRelatredSearches:((t=this.dataLayer.searchRelatedSearches)==null?void 0:t.length)??0})}executeLinkClick(e){var t,s;let a=Ze.findResultByUniqueId(e,this.dataLayer.searchResults??[]);a&&((s=(t=this.searchResultsConfig)==null?void 0:t.hooks)!=null&&s.afterLinkClick&&(a=this.searchResultsConfig.hooks.afterLinkClick(a)),a&&this.dataLayer.searchResultsMetadata&&!this.dataLayer.cookiesDisabled&&oe.trackClick({result:a,...this.dataLayer.parsedData.trackingData}).then(()=>{typeof window<"u"&&(window.location.href=a?.url??"")}).catch(()=>{typeof window<"u"&&(window.location.href=a?.url??"")}))}setPage(e){var t;(t=this.searchPaginationWidget)==null||t.goToPage(e)}setCookiesDisabled(e){this.dataLayer.setCookiesDisabled(e)}changeResultTemplate(e){var t,s,a;this.searchResultsConfig&&(this.searchResultsConfig.templates=(t=this.searchResultsConfig)!=null&&t.templates?{...(s=this.searchResultsConfig)==null?void 0:s.templates,...e}:e,(a=this.searchResultsWidget)==null||a.changeTemplate())}}const Tr={language:"en",searchURL:"https://searchcloud-2-us-east-1.searchstax.com/29847/corpsiteuxsamples-1442/emselect",suggesterURL:"https://searchcloud-2-us-east-1.searchstax.com/29847/corpsiteuxsamples-1442_suggester/emsuggest",searchAuth:"b065448ad1484e205f4851f0ce89d128e704e2f4",trackApiKey:"DPAOKNB9c5chZZDwN1Il9dLUCLMGF1ggehy0dWewZwk",authType:"token",relatedSearchesURL:"https://app.searchstax.com/api/v1/1442/related-search/",relatedSearchesAPIKey:"fac98ad405cc50e0c0693331e8d2119de592f0e3",analyticsBaseUrl:"https://analytics-us.searchstax.com",questionURL:"https://search-ai-us.searchstax.com/api/v1/1442/answer/",model:"Default",appId:"1442",router:{enabled:!0,routeName:"searchstax",title:i=>`Search results for: ${i.query}`},hooks:{beforeSearch:function(i){const e={...i};return e.itemsPerPage=10,e}}},Ne=new Sr;Ne.initialize(Tr);function ns(i){return new URLSearchParams(window.location.search).get(i)||""}if(document.querySelectorAll(".search-field").forEach(i=>{i.addEventListener("keydown",e=>{if(e.key==="Enter"){e.preventDefault();const t=e.target.value.trim();t&&(window.location.href=`/?s=${encodeURIComponent(t)}&searchstax[query]=${encodeURIComponent(t)}&searchstax[page]=1&searchstax[model]=Default`)}})}),document.querySelectorAll(".search-button").forEach(i=>{i.addEventListener("click",e=>{e.preventDefault();const s=i.closest("form")?.querySelector(".search-field");if(s&&s.value.trim()){const a=encodeURIComponent(s.value.trim());window.location.href=`/?s=${a}&searchstax[query]=${a}&searchstax[page]=1&searchstax[model]=Default`}})}),document.getElementById("searchstax-results-container")){const i=ns("query")||ns("s");Ne.addSearchInputWidget("searchstax-input-container",{suggestAfterMinChars:3,hooks:{afterAutosuggest:function(e){return{...e}},beforeAutosuggest:function(e){return{...e}}},templates:{mainTemplate:{template:`
          <div class="site-search-page searchstax-search-input-container searchstax-search-input-container-new">
              <div class="searchstax-search-input-wrapper">
              <input type="text" id="searchstax-search-input" class="searchstax-search-input" placeholder="Search this site" aria-label="Search" />
              </div>
              <button class="search-page-button" id="searchstax-search-input-action-button" aria-label="Submit Search" role="button"></button>
          </div>
          `,searchInputId:"searchstax-search-input"},autosuggestItemTemplate:{template:`
<div class="searchstax-autosuggest-item-term-container">{{{term}}}</div>
            `}}}),Ne.addSearchResultsWidget("searchstax-results-container",{defaultSearchTerm:i,templates:{mainTemplate:{template:`
<section aria-label="search results container" tabindex="0">
<div class="searchstax-search-results-container" id="searchstax-search-results-container">
<div class="searchstax-search-results" id="searchstax-search-results"></div>
</div>
</section>
        `,searchResultsContainerId:"searchstax-search-results"},searchResultTemplate:{template:`
<div class="searchstax-search-result {{#thumbnail}} has-thumbnail {{/thumbnail}}">
                      {{#ribbon}}
<span>{{ribbon}}</span>
                      {{/ribbon}}
<div class="searchstax-search-result-content">
<div class="searchstax-search-result-title-wrapper">
<div class="searchstax-search-result-title-container">
<h2 class="searchstax-search-result-title">{{title}}</h2>
</div>
</div>
                      {{#description}}
<p class="searchstax-search-result-description searchstax-search-result-common">
                          {{description}}
</p>
                      {{/description}}

</div>
</div>
          `,searchResultUniqueIdAttribute:"data-searchstax-unique-result-id"},noSearchResultTemplate:{template:`
<div class="searchstax-no-results">
                  Sorry, we could not find any results pertaining to your search. 
<br>
                  {{#spellingSuggestion}}
<span>&nbsp;Did you mean <a href="#" aria-label="Did you mean: {{originalQuery}}" class="searchstax-suggestion-term" onclick="searchCallback('{{ spellingSuggestion }}')">{{ spellingSuggestion }}</a>?</span>
                  {{/spellingSuggestion}}
</div>
            `}}}),Ne.addPaginationWidget("searchstax-pagination-container",{templates:{mainTemplate:{template:`
        {{#results.length}}

<div class="searchstax-pagination-container" data-test-id="searchstax-pagination-container">
<div class="searchstax-pagination-content">
<div class="item">
<a class="searchstax-pagination-previous {{#isFirstPage}}disabled{{/isFirstPage}}" id="searchstax-pagination-previous" data-test-id="searchstax-pagination-previous" tabindex="0" aria-label="Previous Page">
<img class=" previous-icon" src="https://cdn.brand.illinois.edu/illinois.edu/arrow/left/blue.svg" />Previous</a>
</div>
<div class="item searchstax-pagination-details" data-test-id="searchstax-pagination-details">
              {{startResultIndex}} - {{endResultIndex}} of {{totalResults}}
</div>
<div class="item">
<a class="searchstax-pagination-next {{#isLastPage}}disabled{{/isLastPage}}" data-test-id="searchstax-pagination-next" id="searchstax-pagination-next" tabindex="0" aria-label="Next Page">
               Next<img class="previous-icon" src="https://cdn.brand.illinois.edu/illinois.edu/arrow/right/blue.svg" /></a>
</div>
</div>
</div>

        {{/results.length}}
          `,previousButtonClass:"searchstax-pagination-previous",nextButtonClass:"searchstax-pagination-next"}}})}Ne.addSearchFeedbackWidget("search-feedback-container",{templates:{main:{template:`
        {{#searchExecuted}}
<h2 class="searchstax-feedback-container" data-test-id="searchstax-feedback-container">
                 Searching for <span> {{#searchTerm}} {{searchTerm}} {{/searchTerm}} </span>
</h2>
<p> <b>Found {{totalResults}} results</b> <br> 
            {{#hasResults}}
            Viewing results {{startResultIndex}} - {{endResultIndex}} </p>
            {{/hasResults}}
        {{/searchExecuted}}
        `,originalQueryClass:"searchstax-feedback-original-query"}}}),Ne.addFacetsWidget("searchstax-facets-container",{facetingType:"or",itemsPerPageDesktop:6,itemsPerPageMobile:99,templates:{mainTemplateDesktop:{template:`
      {{#hasResultsOrExternalPromotions}}
        <div class="searchstax-facets-container-desktop">
        </div>
      {{/hasResultsOrExternalPromotions}}
      `,facetsContainerId:""},mainTemplateMobile:{template:`
        <div class="searchstax-facets-pills-container">
          <div class="searchstax-facets-pills-selected">
          </div>
        </div>

        <div class="searchstax-facets-mobile-overlay {{#overlayOpened}} searchstax-show{{/overlayOpened}}" >
          <div class="searchstax-facets-mobile-overlay-header">
            <div class="searchstax-facets-mobile-overlay-header-title"></div>
            <div class="searchstax-search-close"></div>
          </div>
          <div class="searchstax-facets-container-mobile"></div>
        </div>
      `,facetsContainerClass:"searchstax-facets-container-mobile",closeOverlayTriggerClasses:["searchstax-facets-mobile-overlay-done","searchstax-search-close"],filterByContainerClass:"searchstax-facets-pills-container",selectedFacetsContainerClass:"searchstax-facets-pills-selected"},showMoreButtonContainerTemplate:{template:`
      <div class="searchstax-facet-show-more-container">
      {{#showingAllFacets}}
        <div class="searchstax-facet-show-less-button searchstax-facet-show-button">less</div>
      {{/showingAllFacets}}
      {{^showingAllFacets}}
        <div class="searchstax-facet-show-more-button  searchstax-facet-show-button">more {{onShowMoreLessClick}}</div>
      {{/showingAllFacets}}
    </div>
      `,showMoreButtonClass:"searchstax-facet-show-more-container"},facetItemContainerTemplate:{template:`
      <div>
        <div class="searchstax-facet-title-container">
            <div class="searchstax-facet-title">
            {{label}}
            </div>
            <div class="searchstax-facet-title-arrow active"></div>
        </div>
         <div class="searchstax-facet-values-container" aria-live="polite"></div>
      </div>
      `,facetListTitleContainerClass:"searchstax-facet-title-container",facetListContainerClass:"searchstax-facet-values-container"},clearFacetsTemplate:{template:`
      {{#shouldShow}}}
      
        <div class="searchstax-facets-pill searchstax-clear-filters searchstax-facets-pill-clear-all">
            <div class="searchstax-facets-pill-label">Reset All</div>
        </div>

      {{/shouldShow}}
      `,containerClass:"searchstax-facets-pill-clear-all"},facetItemTemplate:{template:`
      <div class="searchstax-facet-input">
        <input type="checkbox" class="searchstax-facet-input-checkbox" {{#disabled}}disabled{{/disabled}} {{#isChecked}}checked{{/isChecked}}/>
      </div>
      <div class="searchstax-facet-value-label">{{value}}</div>
      <div class="searchstax-facet-value-count">({{count}})</div>
      `,inputCheckboxClass:"searchstax-facet-input-checkbox",checkTriggerClasses:["searchstax-facet-value-label","searchstax-facet-value-count"]},filterByTemplate:{template:`
      <div class="searchstax-facets-pill searchstax-facets-pill-filter-by">
        <div class="searchstax-facets-pill-label">Filter By</div>
      </div>
      `,containerClass:"searchstax-facets-pill-filter-by"},selectedFacetsTemplate:{template:`
      <div class="searchstax-facets-pill searchstax-facets-pill-facets">
        <div class="searchstax-facets-pill-label">{{value}} ({{count}})</div>
        <div class="searchstax-facets-pill-icon-close"></div>
      </div>
      `,containerClass:"searchstax-facets-pill-facets"}}})})();
